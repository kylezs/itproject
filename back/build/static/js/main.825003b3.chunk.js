(window["webpackJsonpartefacts-app"]=window["webpackJsonpartefacts-app"]||[]).push([[0],{136:function(e,t,a){e.exports=a(182)},141:function(e,t,a){},182:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(0),o=a.n(r),c=a(14),i=a.n(c);a(141),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(49),s=a(124),u=a(121),m=a(123),p=a(27),d=a(13),f=a.n(d),g=a(16),b=a(9),h=a(21),v=a(20),y=a.n(v),O=a(15),E=Object(r.createContext)({authenticated:!1,user:{},authToken:"",initiateLogin:function(){},handleAuthentication:function(){},logout:function(){}}),j=E,w=E.Provider,k=(E.Consumer,"auth-token"),S="duplicate key",x="Please, enter valid credentials",C="pk.eyJ1IjoiemR1ZmZpZWxkIiwiYSI6ImNrMWdkODhpOTBiM28zZG03eDdjZ2dmN24ifQ.vAzlFYY5S9O82SKnwX69kQ",P={uri:"/graphql/"};function N(){var e=Object(h.a)(["\nmutation VerifyToken($token: String!) {\n    verifyToken(token: $token) {\n        payload\n    }\n}\n"]);return N=function(){return e},e}var T=y()(N());var F=a(17),I=a(48),W=a(3),A=a(70),D=a(46),$=a(108),B=a(109),L=a(126),z=a(110),q=a(233);var M=function(){var e=Object(z.a)(function(e){return{progress:{margin:e.spacing(2)}}})();return o.a.createElement(q.a,{className:e.progress})},U=a(245),R=a(239),Q=a(240),_=a(241),H=a(235),V=a(234),J=a(114),Z=a.n(J),G=a(115),X=a.n(G),Y=a(116),K=a.n(Y),ee=a(127),te=a(238),ae=a(113),ne=a.n(ae),re=function(e){var t=o.a.useState(null),a=Object(b.a)(t,2),n=a[0],c=a[1],i=Object(r.useContext)(j),l=Boolean(n);function s(){c(null)}return o.a.createElement("div",null,o.a.createElement(V.a,{component:F.b,to:"/family/create",color:"inherit"},"Create Family"),o.a.createElement(V.a,{component:F.b,to:"/artefacts/manage",color:"inherit"},"Manage Artefacts"),o.a.createElement(V.a,{component:F.b,to:"/artefacts/create",color:"inherit"},"Create Artefact"),o.a.createElement(V.a,{component:F.b,to:"/map/",color:"inherit"},"Artefact Map"),o.a.createElement(H.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},color:"inherit"},o.a.createElement(ne.a,null)),o.a.createElement(ee.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:s},o.a.createElement(te.a,{onClick:s},"Profile"),o.a.createElement(te.a,{onClick:s},"Settings"),o.a.createElement(te.a,{onClick:function(){i.logout()}},"Logout")))},oe=o.a.forwardRef(function(e,t){return o.a.createElement(F.b,Object.assign({innerRef:t,to:"/login"},e))}),ce=o.a.forwardRef(function(e,t){return o.a.createElement(F.b,Object.assign({innerRef:t,to:"/signup"},e))}),ie=function(e){return o.a.createElement("div",null,o.a.createElement(V.a,{color:"inherit",underline:"none",component:ce},"Sign up"),o.a.createElement(V.a,{color:"inherit",underline:"none",component:oe},"Login"))},le=a(128),se=Object(z.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,alignText:"left"}}});function ue(e){var t=se(),a=Object(r.useContext)(j).authenticated,n=Object(le.a)(),c=n&&"dark"===n.palette.type;return o.a.createElement("div",{className:t.root},o.a.createElement(R.a,{position:"static",color:c?"inherit":"primary"},o.a.createElement(Q.a,null,o.a.createElement(_.a,{container:!0},o.a.createElement(_.a,{item:!0,xs:4,container:!0},o.a.createElement(H.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},o.a.createElement(Z.a,null)),o.a.createElement(V.a,{className:t.title,component:F.b,to:"/",color:"inherit"},"Home")),o.a.createElement(_.a,{item:!0,xs:8,container:!0,justify:"flex-end",alignItems:"center"},o.a.createElement(H.a,{className:t.menuButton,color:"inherit","aria-label":"menu",onClick:e.onToggleDarkTheme},c?o.a.createElement(K.a,null):o.a.createElement(X.a,null)),a&&o.a.createElement(re,{username:null}),!a&&o.a.createElement(ie,null))))))}var me=a(122),pe=a(244),de=a(242),fe=a(243);function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var he=function(e){localStorage.getItem("theme-type")||(localStorage.setItem("theme-type","light"),console.log("here"));var t=Object(r.useState)({palette:{primary:de.a,secondary:fe.a,background:{light:"#000000",dark:"#121212"},type:localStorage.getItem("theme-type")||"light"}}),a=Object(b.a)(t,2),n=a[0],c=a[1],i=Object(me.a)(n);return o.a.createElement(pe.a,{theme:i},o.a.createElement(U.a,null),o.a.createElement(ue,{onToggleDarkTheme:function(){var e="light"===n.palette.type?"dark":"light";localStorage.setItem("theme-type",e),c({palette:be({},n.palette,{type:e})})}}),e.children)};var ve=function(e){return o.a.createElement(he,null,"This is some cool landing page yo. Welcome!",o.a.createElement("br",null),"Also, in the future, this page should not have a navigation bar, it'll have cooler design stuff. It only has the nav bar for easier linking to signup / login for now")},ye=function(e){function t(){var e,a;Object(A.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object($.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(r)))).state={checkAuthenticated:!1},a}return Object(L.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.authenticated&&this.setState({checkAuthenticated:!0});var t=localStorage.getItem(k);!this.context.authenticated&&t?this.context.handleAuthentication(t,function(){console.log("Setting state"),e.setState({checkAuthenticated:!0})}):this.setState({checkAuthenticated:!0})}},{key:"render",value:function(){return this.props.children(this.state.checkAuthenticated)}}]),t}(r.Component);ye.contextType=j;var Oe=function(e){var t=e.loggedIn,a=e.loggedOut,n=(e.path,e.landingPage),c=Object(W.a)(e,["loggedIn","loggedOut","path","landingPage"]),i=Object(r.useContext)(j).authenticated;return a||(a="/login"),console.log("Authenticated: ",i),o.a.createElement(ye,null,function(e){return!1===e?o.a.createElement(M,null):o.a.createElement(I.b,Object.assign({},c,{render:function(e){return i?o.a.createElement(t,e):!i&&n?o.a.createElement(ve,null):o.a.createElement(I.a,{to:a})}}))})},Ee=a(81),je=a(56),we=a(265),ke=a(254),Se=a(260),xe=a(80),Ce=a(246),Pe=a(247),Ne=a(250),Te=a(249),Fe=a(248),Ie=Object(z.a)(function(e){return{textField:{padding:e.spacing(1),backgroundColor:e.palette.background.paper,textAlign:"center",marginTop:e.spacing(1)},paper:{marginTop:e.spacing(1),padding:e.spacing(1),backgroundColor:e.palette.background.paper,textAlign:"center"},button:{margin:e.spacing(1)},card:{backgroundColor:e.palette.background.paper,maxWidth:345},media:{backgroundColor:e.palette.background.paper,height:140}}});var We=function(e){e.mediaURI;var t=e.title,a=e.description,n=e.id,r=Ie();return o.a.createElement(Ce.a,{className:r.card,elevation:3},o.a.createElement(Pe.a,null,o.a.createElement(Fe.a,{className:r.media,image:"https://img1.cgtrader.com/items/995815/731bda0123/antique-old-clock-3d-model-low-poly-animated-obj-3ds-fbx-blend-dae-mtl.jpg",title:t}),o.a.createElement(Te.a,null,o.a.createElement(_.a,{item:!0,xs:!0,zeroMinWidth:!0},o.a.createElement(je.a,{gutterBottom:!0,variant:"h5",component:"h2",noWrap:!0},t)),o.a.createElement(_.a,{item:!0,xs:!0,zeroMinWidth:!0},o.a.createElement(je.a,{variant:"body2",color:"textSecondary",component:"p",noWrap:!0},a)))),o.a.createElement(Ne.a,null,o.a.createElement(V.a,{size:"small",color:"primary",component:F.b,to:"/artefacts/".concat(n)},"View"),o.a.createElement(V.a,{size:"small",color:"primary",component:F.b,to:"/artefacts/edit/".concat(n)},"Edit")))};function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var De=Object(xe.c)({accessToken:C,interactive:!0,attributionControl:!1,maxZoom:18});function $e(e){Object(le.a)();var t=e.artefacts;t||(t=[]);var a=Object(r.useState)({}),c=Object(b.a)(a,2),i=c[0],l=c[1];return o.a.createElement(De,Object.assign({style:e.mapStyle?e.mapStyle:"mapbox://styles/mapbox/streets-v9?optimize=true",containerStyle:e.containerStyle},e.mapState),t.map(function(e){var t=e.center,a=e.popup,c=Object(W.a)(e,["center","popup"]);if(t&&t.length){var s=e.id;return o.a.createElement(r.Fragment,{key:s},o.a.createElement(xe.a,{coordinates:t,onClick:function(e){l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},i,Object(n.a)({},s,!i[s])))}},o.a.createElement("img",{src:"http://maps.google.com/mapfiles/ms/icons/red.png",alt:"marker-img"})),a&&i[e.id]&&o.a.createElement(xe.b,{coordinates:t,offset:{"bottom-left":[12,-38],bottom:[0,-38],"bottom-right":[-12,-38]}},o.a.createElement(We,c)))}}))}var Be=a(158)({accessToken:C}),Le=function(e){var t={},a=e.body.features;if(!a)return t.noResults=!0,t;for(var n=[],r=0;r<a.length;r++){var o=a[r],c={};if(c.mapState={center:o.center},"place"===o.place_type[0]){var i=o.bbox,l=[[i[0],i[1]],[i[2],i[3]]];c.mapState.fitBounds=l}else"address"===o.place_type[0]&&(c.mapState.zoom=[15]);c.placeName=o.place_name,c.locationType=o.place_type[0],n.push(c)}return t.results=n,t},ze=function(e){var t={};return console.log("query error occurred"),t.error=e,t};function qe(e,t){if(!e)return new Promise(function(e,t){e()});var a={query:e,limit:5,types:["place","address"]};return t&&(a.types=t),"object"===typeof e?Be.reverseGeocode(a).send().then(function(e){return Le(e)},function(e){return ze(e)}):"string"===typeof e?Be.forwardGeocode(a).send().then(function(e){return Le(e)},function(e){return ze(e)}):void 0}function Me(e){return qe(e.address).then(function(t){return{artefact:e,response:t}})}var Ue=a(255),Re=a(237),Qe=a(257),_e=a(184),He=a(258),Ve=a(264),Je=a(259),Ze=a(236),Ge=a(186),Xe=a(251),Ye=a(79),Ke=a.n(Ye),et=a(125),tt=a(120),at=a.n(tt);function nt(){var e=Object(h.a)(["\n    mutation FamilyCreate($familyName: String!, $about: String) {\n        familyCreate(input: { familyName: $familyName, about: $about }) {\n            family {\n                familyName\n                joinCode\n            }\n        }\n    }\n"]);return nt=function(){return e},e}function rt(){var e=Object(h.a)(["\n    mutation SignupMutation(\n        $email: String!\n        $password: String!\n        $username: String!\n    ) {\n        createUser(email: $email, username: $username, password: $password) {\n            user {\n                id\n                username\n                email\n            }\n        }\n    }\n"]);return rt=function(){return e},e}function ot(){var e=Object(h.a)(["\n    query getFamilyArtefacts($id: ID!) {\n        family(id: $id) {\n            hasArtefacts {\n                edges {\n                    node {\n                        id\n                        name\n                        description\n                        address\n                    }\n                }\n            }\n        }\n    }\n"]);return ot=function(){return e},e}function ct(){var e=Object(h.a)(["\n    mutation TokenAuth($username: String!, $password: String!) {\n        tokenAuth(username: $username, password: $password) {\n            token\n        }\n    }\n"]);return ct=function(){return e},e}function it(){var e=Object(h.a)(["\n    mutation UpdateArtefactMutation(\n        $id: ID!\n        $artefactInput: ArtefactInputType!\n    ) {\n        artefactUpdate(id: $id, input: $artefactInput) {\n            artefact {\n                id\n            }\n        }\n    }\n"]);return it=function(){return e},e}function lt(){var e=Object(h.a)(["\n    query DetailView($id: ID!) {\n        artefact(id: $id) {\n            id\n            name\n            description\n            admin {\n                id\n                username\n            }\n            state\n            isPublic\n            upload\n            belongsToFamilies {\n                id\n            }\n            addedAt\n            address\n        }\n    }\n"]);return lt=function(){return e},e}function st(){var e=Object(h.a)(["\n    query artefactsQuery {\n        me {\n            id\n        }\n    }\n"]);return st=function(){return e},e}function ut(){var e=Object(h.a)(["\n    query artefactsQuery {\n        me {\n            isMemberOf {\n                familyName\n                id\n            }\n        }\n    }\n"]);return ut=function(){return e},e}function mt(){var e=Object(h.a)(["\n    query ArtefactStatesQuery($name: String!) {\n        __type(name: $name) {\n            enumValues {\n                name\n                description\n            }\n        }\n    }\n"]);return mt=function(){return e},e}function pt(){var e=Object(h.a)(["\n    mutation CreateArtefactMutation(\n        $name: String!\n        $state: String!\n        $isPublic: Boolean\n        $description: String!\n        $belongsToFamilies: [ID]\n        $address: String\n    ) {\n        artefactCreate(\n            input: {\n                name: $name\n                state: $state\n                description: $description\n                isPublic: $isPublic\n                belongsToFamilies: $belongsToFamilies\n                address: $address\n            }\n        ) {\n            artefact {\n                id\n            }\n        }\n    }\n"]);return pt=function(){return e},e}var dt=y()(pt()),ft=y()(mt()),gt=y()(ut()),bt=(y()(st()),y()(lt())),ht=y()(it()),vt=y()(ct()),yt=y()(ot()),Ot=y()(rt()),Et=y()(nt());function jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function wt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jt(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function kt(e){var t=Object(r.useContext)(j),a=t.user.username,c=e.create,i=e.edit,l=e.view,s=e.statesLoading,u=e.familiesLoading,m=e.artefactLoading;if(!c)var p=m?{}:e.artefactData.artefact,d=!m&&p.admin.username===a;var h=e.artefactStates,v=e.families;!d&&i&&(i=!1,l=!0);var y=Object(le.a)(),E=Wt(),w=Object(r.useState)(""),k=Object(b.a)(w,2),S=k[0],x=k[1],C=Object(r.useState)({}),P=Object(b.a)(C,2),N=P[0],T=P[1],F=Object(r.useState)({}),I=Object(b.a)(F,2),W=I[0],A=I[1],D=Object(r.useState)(!1),$=Object(b.a)(D,2),B=$[0],L=$[1],z=Object(r.useState)({mapState:{},prevMapState:{},locationError:""}),q=Object(b.a)(z,2),R=q[0],Q=q[1],J=Object(r.useState)(!0),Z=Object(b.a)(J,2),G=Z[0],X=Z[1],Y=Object(r.useState)([]),K=Object(b.a)(Y,2),ee=K[0],ae=K[1],ne=Object(r.useState)({}),re=Object(b.a)(ne,2),oe=re[0],ce=re[1];if((i||l)&&!m&&0!==Object.keys(p).length&&0===Object.keys(oe).length){var ie={};p.belongsToFamilies.map(function(e){return ie[e.id]=!0}),ce(wt({},p,{belongsToFamiliesBools:ie})),console.log("Query run with argument: ",p.address),qe(p.address).then(function(e){if(p.address){var t="",a="";console.log("response: ",e),e.error?(a="Unknown error occurred, check console for details",console.log(e.error)):e.noResults&&(a="No results"),a?Q(wt({},R,{locationError:a})):(Q({mapState:e.results[0].mapState,locationError:""}),t=e.results[0].placeName),X(p.address===t)}})}if(c&&v&&!oe.belongsToFamiliesBools){ie={};v.map(function(e){return ie[e.id]=!0}),ce(wt({},p,{belongsToFamiliesBools:ie}))}var se=function(t){var a=e.history;a&&a.push("/artefacts/".concat(t))},ue=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.artefactCreate.artefact.id,se(a);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Creation errors occurred:",t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("update error occured: ",t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),de=Object(O.b)(dt,{onCompleted:ue,onError:me}),fe=Object(b.a)(de,2),ge=fe[0],be=fe[1],he=be.error,ve=be.loading,ye=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:x(""),L(!0);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Oe=Object(O.b)(ht,{onCompleted:ye,onError:pe}),Se=Object(b.a)(Oe,2),xe=Se[0],Ce=Se[1].error,Pe=function(e,t){var a=oe[e];ce(wt({},oe,Object(n.a)({},e,t))),i&&S!==e&&T(a)},Ne=function(e,t,a){"belongsToFamiliesBools"===e&&(t=wt({},oe.belongsToFamiliesBools,Object(n.a)({},a,t))),Pe(e,t),A(t),i&&S!==e&&x(e)},Te=function(){Pe(S,N),x(""),"address"===S&&(Q(wt({},R,{mapState:R.prevMapState,prevMapState:{}})),ae([]))},Fe=function(){Q(wt({},R,{locationError:"Select a search result or clear search field"}))},Ie=function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(G){e.next=3;break}return Fe(),e.abrupt("return");case 3:(a=new FileReader).onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var e=a.result;console.log(e)},oe.files&&oe.files.forEach(function(e){return a.readAsArrayBuffer(e)}),n=oe.belongsToFamiliesBools?Object.keys(oe.belongsToFamiliesBools).filter(function(e){return oe.belongsToFamiliesBools[e]}):[],r={name:oe.name,description:oe.description,state:oe.state,isPublic:!!oe.isPublic&&oe.isPublic,belongsToFamilies:n,address:oe.address?oe.address:""},console.log("Input to GQL creation mutation:",r),ge({variables:r});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=8;break}if(a={},G){e.next=5;break}return Fe(),e.abrupt("return");case 5:"belongsToFamiliesBools"===S?a.belongsToFamilies=Object.keys(oe.belongsToFamiliesBools).filter(function(e){return oe.belongsToFamiliesBools[e]}):a[S]=W,console.log("Input to GQL update mutation: input",a),xe({variables:{id:p.id,artefactInput:a}});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function Ae(){return o.a.createElement(V.a,{variant:"contained",color:"primary",type:"submit",className:E.button,onClick:We,fullWidth:!0,padding:1},"Save")}function De(){return o.a.createElement(V.a,{variant:"contained",color:"default",className:E.button,onClick:Te,fullWidth:!0,padding:1},"Cancel")}function Be(){return o.a.createElement(_.a,{container:!0,justify:"space-evenly",alignItems:"center",spacing:1,style:{marginTop:1}},o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(Ae,null)),o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(De,null)),Ce&&o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(ke.a,{error:!0},"Error Updating Artefact")))}function Le(e,t){"clickaway"!==t&&L(!1)}var ze,Me=!he,Ye=u||s;ze=y&&"dark"===y.palette.type?"mapbox://styles/mapbox/dark-v10?optimize=true":"mapbox://styles/mapbox/streets-v9?optimize=true";return i&&Ye?o.a.createElement(M,null):o.a.createElement(r.Fragment,null,o.a.createElement(U.a,null),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c?Ie(e):We(e)},className:E.form},o.a.createElement(_.a,{container:!0,spacing:1,alignItems:"stretch",alignContent:"stretch",justify:"space-evenly"},o.a.createElement(_.a,{item:!0,xs:12,container:!0,justify:"center"},o.a.createElement(_.a,{item:!0,xs:12,sm:8},o.a.createElement(je.a,{variant:"h4",className:E.title},c&&"Create"," ",i&&"Edit"," ",l&&"View"," Artefact"),!l&&o.a.createElement(je.a,{variant:"subtitle1",className:E.title},c&&"Artefacts are belongings of the family, enter as much or as little detail as you like",i&&"Click to start editing"))),o.a.createElement(_.a,{item:!0,xs:12,sm:6,container:!0,spacing:1},o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:E.paperWrapper,elevation:3},o.a.createElement(Ue.a,{className:E.formControl,fullWidth:!0},o.a.createElement(we.a,{id:"artefact-name",label:"Artefact name",variant:"outlined",required:!0,fullWidth:!0,value:oe.name||"",inputProps:{readOnly:l},onChange:function(e){return Ne("name",e.target.value)},disabled:i&&!!S&&"name"!==S}),i&&"name"===S&&o.a.createElement(Be,null)))),o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:E.paperWrapper,elevation:3},o.a.createElement(Ue.a,{className:E.formControl,fullWidth:!0},o.a.createElement(we.a,{id:"state",label:"Artefact State",variant:"outlined",required:!0,fullWidth:!0,value:oe.state||"",inputProps:{readOnly:l},onChange:function(e){return Ne("state",e.target.value)},select:!0,disabled:i&&!!S&&"state"!==S},Object.keys(h).map(function(t){return o.a.createElement(te.a,{value:e.artefactStates[t],key:t},t)})),i&&"state"===S&&o.a.createElement(Be,null)))),o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:E.paperWrapper,elevation:3},o.a.createElement(Ue.a,{className:E.formControl,fullWidth:!0},o.a.createElement(we.a,{id:"description",label:"Description",variant:"outlined",required:!0,fullWidth:!0,multiline:!0,rows:6,value:oe.description||"",inputProps:{readOnly:l},onChange:function(e){return Ne("description",e.target.value)},disabled:i&&!!S&&"description"!==S}),i&&"description"===S&&o.a.createElement(Be,null)))),o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:E.paperWrapper,elevation:3},o.a.createElement(Ue.a,{className:E.formControl,fullWidth:!0},o.a.createElement(we.a,{id:"artefact-admin",label:"Artefact Admin",variant:"outlined",required:!0,fullWidth:!0,value:oe.admin&&0!==Object.keys(oe.admin).length?oe.admin.username:t.user.username,inputProps:{readOnly:l},onChange:function(e){return console.log("admin field was changed")},disabled:!0}))))),o.a.createElement(_.a,{item:!0,xs:12,sm:6,container:!0,spacing:1,alignContent:"stretch"},o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:E.paperWrapper,elevation:3},o.a.createElement(Ue.a,{className:E.formControl,fullWidth:!0},o.a.createElement(Re.a,{subheader:o.a.createElement(Qe.a,{component:"div"},"Privacy"),dense:!0},o.a.createElement(_e.a,{disabled:i&&!!S&&"isPublic"!==S},!l&&o.a.createElement(He.a,null,o.a.createElement(Ve.a,{edge:"start",checked:oe.isPublic||!1,tabIndex:-1,onClick:function(e){return Ne("isPublic",e.target.checked)}})),o.a.createElement(Je.a,{primary:"Public"}))),i&&"isPublic"===S&&o.a.createElement(Be,null)))),o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:E.paperWrapper,elevation:3},o.a.createElement(Ue.a,{className:E.formControl,fullWidth:!0},o.a.createElement(Re.a,{subheader:o.a.createElement(Qe.a,{component:"div"},l?"Belongs to":"Select which of your families the artefact belongs to")},v.map(function(e){if(oe.belongsToFamiliesBools)return oe.belongsToFamiliesBools&&!oe.belongsToFamiliesBools[e.id]&&(oe.belongsToFamiliesBools[e.id]=!1),!l||oe.belongsToFamiliesBools[e.id]?o.a.createElement(_e.a,{key:e.id,dense:!0,disabled:i&&!!S&&"belongsToFamiliesBools"!==S},!l&&o.a.createElement(He.a,null,o.a.createElement(Ve.a,{edge:"start",checked:oe.belongsToFamiliesBools&&oe.belongsToFamiliesBools[e.id]||!1,onClick:function(t){return Ne("belongsToFamiliesBools",t.target.checked,e.id)},tabIndex:-1})),o.a.createElement(Je.a,{primary:e.familyName})):void 0})),i&&"belongsToFamiliesBools"===S&&o.a.createElement(Be,null)))),!l&&o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:E.paperWrapper,elevation:3},o.a.createElement(et.a,{initialFiles:oe.files||[],onChange:function(e){return Ne("files",e)},dropzoneClass:E.dropzone})))),o.a.createElement(_.a,{container:!0,item:!0,xs:12,spacing:1},o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:E.paperWrapper,elevation:3},o.a.createElement(Ue.a,{className:E.formControl,fullWidth:!0},o.a.createElement(we.a,{id:"address",label:"Address",variant:"outlined",fullWidth:!0,value:oe.address||"",inputProps:{readOnly:l},onChange:function(e){Ne("address",e.target.value),e.target.value?X(!1):X(!0)},error:!!R.locationError,InputProps:{endAdornment:!l&&o.a.createElement(H.a,{className:E.iconButton,"aria-label":"search",id:"search",onClick:function(e){return function(e){if(e)return console.log("Query run with argument: ",e),qe(e).then(function(e){var t="";return e.error&&(t="Unknown error occurred, check console for details",console.log(e.error)),e.noErrors&&(t="No results"),t?Q(wt({},R,{locationError:t})):ae(e.results),e})}(oe.address)}},o.a.createElement(at.a,null)),style:{marginBottom:3}},onKeyDown:function(e){13!==e.keyCode||l||(e.preventDefault(),document.getElementById("search").click())},helperText:R.locationError}),o.a.createElement(Ze.a,{id:ee.length?"results":void 0,open:!!ee.length,anchorEl:document.getElementById("address"),onClose:function(e){return ae([])},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},o.a.createElement(Re.a,{component:"div",disablePadding:!0},ee.map(function(e){return o.a.createElement(_e.a,{key:e.placeName,button:!0,className:E.nested,onClick:function(t){return function(e){var t={mapState:e.mapState,locationError:""};"address"!==S||R.prevMapState||(t.prevMapState=R.mapState),Ne("address",e.placeName),ae([]),Q(wt({},R,{},t)),X(!0)}(e)}},o.a.createElement(Je.a,{primary:e.placeName}))}))),i&&"address"===S&&o.a.createElement(Be,null),o.a.createElement(_.a,{container:!0,style:{marginTop:1}},o.a.createElement($e,{className:E.map,mapStyle:ze,mapState:R.mapState,containerStyle:{height:"60vh",width:"100vw"},artefacts:[{center:R.mapState.center}]})))))),c&&o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(V.a,{name:"create",label:"Create",type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:ve},"Create"),!Me&&o.a.createElement(ke.a,{error:!Me},"Unknown Error Occurred"))),o.a.createElement(Ge.a,{onClickAway:Le},o.a.createElement(Xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:B,autoHideDuration:2e3,onClose:Le,ContentProps:{"aria-describedby":"message-id"},message:o.a.createElement("span",{id:"message-id"},"Edit successful"),action:[o.a.createElement(V.a,{key:"view",color:"secondary",size:"small",onClick:function(e){se(p.id)&&Le()}},"VIEW"),o.a.createElement(H.a,{key:"close","aria-label":"close",color:"inherit",onClick:Le,className:E.close},o.a.createElement(Ke.a,null))]}))))}var St=Object(I.g)(function(e){return o.a.createElement(he,null,o.a.createElement(_.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"80vh"}},o.a.createElement(_.a,{item:!0,xs:10},o.a.createElement(kt,e))))});function xt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ct(e){var t=e.child,a=e.childProps,c=Object(W.a)(e,["child","childProps"]),i=Object(r.useState)([]),l=Object(b.a)(i,2),s=l[0],u=l[1],m=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xt(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{families:s,familiesLoading:Object(O.c)(gt,{onCompleted:function(e){return u(e.me.isMemberOf)},onError:function(e){return console.log(e)}}).loading});return o.a.createElement(t,Object.assign({},c,m))}function Pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Nt(e){var t=e.child,a=e.childProps,c=Object(W.a)(e,["child","childProps"]),i=Object(r.useState)({}),l=Object(b.a)(i,2),s=l[0],u=l[1],m=function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o in a={},t.__type.enumValues)r=t.__type.enumValues[o],n=r.description,a[n]=r.name;u(a);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pt(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{artefactStates:s,statesLoading:Object(O.c)(ft,{variables:{name:"ArtefactState"},onCompleted:m,onError:function(e){return console.log(e)}}).loading});return o.a.createElement(t,Object.assign({},c,p))}function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ft(e){var t=e.child,a=e.childProps,c=Object(W.a)(e,["child","childProps"]);console.log("HERE");Object(r.useContext)(j).user.username;var i=Object(O.c)(bt,{variables:{id:c.match.params.id},onError:function(e){return console.log(e)}}),l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a,{artefactData:i.data,artefactLoading:i.loading});return o.a.createElement(t,Object.assign({},c,l))}var It=Object(z.a)(function(e){return{root:{marginLeft:e.spacing(1),marginRight:e.spacing(1),margin:e.spacing(1)},paper:{padding:e.spacing(2),backgroundColor:e.palette.background.paper,alignItems:"center",alignContent:"stretch",justify:"center"},form:{display:"flex",flexWrap:"wrap"},submit:{margin:e.spacing(3,0,2)}}}),Wt=Object(z.a)(function(e){return{root:{width:"100%",height:"100%",backgroundColor:e.palette.background.paper,justifyContent:"center"},formControl:{height:"100%",justifyContent:"center"},title:{marginLeft:e.spacing(3),marginRight:e.spacing(3),padding:e.spacing(1),textAlign:"center"},paper:{padding:e.spacing(1),backgroundColor:e.palette.background.paper},paperWrapper:{padding:e.spacing(1),backgroundColor:e.palette.background.paper,height:"100%",alignItems:"center"},button:{height:"100%"},map:{height:"200px",type:e.palette.type},form:{marginBottom:e.spacing(10),marginTop:e.spacing(2),display:"flex",flexWrap:"wrap",textAlign:"center"},iconButton:{padding:10},dropzone:{backgroundColor:e.palette.background.paper,minHeight:"80px"}}});function At(e){var t=Object(r.useContext)(j),a=It(),n=Object(r.useState)(""),c=Object(b.a)(n,2),i=c[0],l=c[1],s=Object(r.useState)(""),u=Object(b.a)(s,2),m=u[0],p=u[1],d=Object(r.useState)(!1),h=Object(b.a)(d,2),v=h[0],y=h[1],E=Object(r.useState)(!1),w=Object(b.a)(E,2),S=w[0],C=w[1],P=function(){var a=Object(g.a)(f.a.mark(function a(n){var r;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=n.tokenAuth.token,t.handleAuthentication(r),localStorage.setItem(k,r),e.history.push("/");case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),N=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("_handleError run"),t.graphQLErrors&&(a=t.graphQLErrors[0].message.substring(0,15),x.startsWith(a)?(y(!0),console.log("invalid credentials")):(console.log("unexpect error(s):"),console.log(t),C(!0)));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=Object(O.b)(vt,{onCompleted:P,onError:N}),I=Object(b.a)(T,1)[0],W=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I({variables:{username:i,password:m}}),t.preventDefault();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(Ee.a,{className:a.paper,elevation:6},o.a.createElement("form",{onSubmit:W,className:a.form},o.a.createElement(je.a,{component:"h1",variant:"h5",className:a.root},"Log In"),o.a.createElement(we.a,{className:a.root,variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",autoFocus:!0,onChange:function(e){return l(e.target.value)},error:v}),o.a.createElement(we.a,{className:a.root,variant:"outlined",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",onChange:function(e){return p(e.target.value)},error:v,helperText:v?"Please enter valid credentials":""}),o.a.createElement(_.a,{container:!0,justify:"center",alignItems:"center",spacing:3},o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(V.a,{className:a.root,name:"submit",label:"Submit",type:"submit",variant:"contained",color:"primary",fullWidth:!0},"Log In"),S&&o.a.createElement(ke.a,{error:S,className:a.root},"Unknown Error Occurred")),o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(Se.a,{component:F.b,to:"/signup",className:a.root,color:"inherit"},"Need an account? Sign up")))))}var Dt=function(e){return o.a.createElement(he,null,o.a.createElement(_.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"80vh"}},o.a.createElement(_.a,{item:!0,xs:10,sm:8,md:6,lg:4},o.a.createElement(At,e))))},$t=new(a(177));$t.is().min(6).is().max(100).has().uppercase().has().digits().is().not().oneOf(["password","Password123"]);var Bt=function(e){for(var t="",a=0;a<e.length;a++){a>=1&&(t+=" | ");var n=e[a];"min"===n&&(t+="Password must be at least ".concat(6," characters long")),"max"===n&&(t+="Password must be at most ".concat(100," characters long")),"uppercase"===n&&(t+="Password must have an uppercase letter"),"digits"===n&&(t+="Password must have a digit"),"oneOf"===n&&(t+="Password is too common")}return t};function Lt(e){var t=Object(r.useState)(""),n=Object(b.a)(t,2),c=n[0],i=n[1],l=Object(r.useState)(""),s=Object(b.a)(l,2),u=s[0],m=s[1],p=Object(r.useState)(""),d=Object(b.a)(p,2),h=d[0],v=d[1],y=Object(r.useState)(""),E=Object(b.a)(y,2),j=E[0],w=E[1],k=Object(r.useState)(!1),x=Object(b.a)(k,2),C=x[0],P=x[1],N=Object(r.useState)(!1),T=Object(b.a)(N,2),I=T[0],W=(T[1],Object(r.useState)(!1)),A=Object(b.a)(W,2),D=A[0],$=A[1],B=Object(r.useState)([]),L=Object(b.a)(B,2),z=L[0],q=L[1],M=Object(r.useState)(!1),U=Object(b.a)(M,2),R=U[0],Q=U[1],H=a(181),J=It(),Z=function(){var t=Object(g.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.history.push("/login");case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),G=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("_handleError run"),t.graphQLErrors&&(a=t.graphQLErrors[0].message.substring(0,10),S.startsWith(a)?P(!0):(console.log("unexpect error(s):"),console.log(t),Q(!0)));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),X=Object(O.b)(Ot,{onCompleted:Z,onError:G}),Y=Object(b.a)(X,1)[0],K=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("form submitted"),Y({variables:{username:c,email:u,password:h}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v(t),a=$t.validate(t,{list:!0}),q(a),0!==a.length?$(!1):$(!0);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),te=!!h&&!D,ae=!!j&&!(j===h),ne=!!h&&(!(j===h)||!D)||!!u&&!H.validate(u),re=!!u&&!H.validate(u),oe=I||re,ce="";return re?ce="Email is invalid":I&&(ce="Email is taken"),o.a.createElement(Ee.a,{className:J.paper,elevation:6},o.a.createElement("form",{className:J.form,onSubmit:K},o.a.createElement(je.a,{component:"h1",variant:"h5",className:J.root},"Sign up"),o.a.createElement(we.a,{className:J.root,onChange:function(e){return i(e.target.value)},variant:"outlined",required:!0,fullWidth:!0,autoComplete:"username",label:"Username",type:"username",autoFocus:!0,error:C,helperText:C?"Username is taken":""}),o.a.createElement(we.a,{className:J.root,variant:"outlined",required:!0,fullWidth:!0,autoComplete:"email",label:"Email",type:"email",onChange:function(e){return m(e.target.value)},error:oe,helperText:ce}),o.a.createElement(we.a,{className:J.root,variant:"outlined",required:!0,fullWidth:!0,autoComplete:"password",label:"Password",type:"password",onChange:function(e){return ee(e.target.value)},error:te,helperText:te?Bt(z):""}),o.a.createElement(we.a,{className:J.root,variant:"outlined",required:!0,fullWidth:!0,label:"Confirm Password",type:"password",onChange:function(e){return w(e.target.value)},error:ae,helperText:ae?"Passwords must match":""}),o.a.createElement(_.a,{container:!0,justify:"center",alignItems:"center",spacing:3},o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(V.a,{className:J.root,fullWidth:!0,label:"Submit",type:"submit",variant:"contained",color:"primary",disabled:ne},"Sign Up"),R&&o.a.createElement(ke.a,{error:R})),o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(Se.a,{className:J.root,component:F.b,to:"/login",color:"inherit"},"Already have an account? Log in")))))}var zt=function(e){return o.a.createElement(he,null,o.a.createElement(_.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"80vh"}},o.a.createElement(_.a,{item:!0,xs:10,sm:8,md:6,lg:4},o.a.createElement(Lt,e))))};var qt=function(){return Object(r.useContext)(j).logout(),o.a.createElement(I.a,{to:"/login"})},Mt=a(252),Ut=a(266),Rt=a(253),Qt=function(e){var t=Wt(),a=e.children,n=e.onClose;return o.a.createElement(Mt.a,{disableTypography:!0,className:t.root},o.a.createElement(je.a,{variant:"h6"},a),n?o.a.createElement(H.a,{"aria-label":"close",className:t.closeButton,onClick:n},o.a.createElement(Ke.a,null)):null)};function _t(e){var t=Wt(),a=Object(r.useContext)(j).user.username,n=Object(r.useState)(""),c=Object(b.a)(n,2),i=c[0],l=c[1],s=Object(r.useState)(""),u=Object(b.a)(s,2),m=u[0],p=u[1],d=Object(r.useState)(""),h=Object(b.a)(d,2),v=h[0],y=h[1],E=Object(r.useState)(!1),w=Object(b.a)(E,2),k=w[0],S=w[1],x=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a=t.familyCreate.family.joinCode,y(a),S(!0);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=Object(O.b)(Et,{onCompleted:x}),P=Object(b.a)(C,2),N=P[0],T=P[1].data,F=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("Family name: "+i),console.log("About: "+m),N({variables:{familyName:i,about:m}});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(e){e.preventDefault(),S(!1)};return o.a.createElement("form",{className:t.form,onSubmit:F},o.a.createElement(_.a,{container:!0,spacing:2,direction:"row",alignItems:"stretch",alignContent:"stretch",justify:"space-evenly"},o.a.createElement(_.a,{item:!0,xs:12,container:!0,justify:"center"},o.a.createElement(je.a,{variant:"h4",className:t.title},"Create Family"),o.a.createElement(je.a,{variant:"subtitle1",className:t.title},"Families are how you manage your artefacts. We recognise there is often complex overlap between families. That's why you can create and be a part of several families, so you can separate which of the artefacts you manage belong to which family.")),o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:t.paper,elevation:3},o.a.createElement(Ue.a,{className:t.formControl,fullWidth:!0},o.a.createElement(we.a,{variant:"outlined",required:!0,fullWidth:!0,id:"family-name",label:"Family name",autoFocus:!0,onChange:function(e){return l(e.target.value)}})))),o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:t.paper,elevation:3},o.a.createElement(Ue.a,{className:t.formControl,fullWidth:!0},o.a.createElement(we.a,{variant:"outlined",multiline:!0,rows:6,fullWidth:!0,id:"about",label:"Tell people about your family",onChange:function(e){return p(e.target.value)}})))),o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(Ee.a,{className:t.paper,elevation:3},o.a.createElement(Ue.a,{className:t.formControl,fullWidth:!0},o.a.createElement(we.a,{variant:"outlined",disabled:!0,defaultValue:a,fullWidth:!0,id:"family-admin",label:"Family Admin",onChange:function(e){return console.log("hello")}})))),o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(V.a,{name:"create",label:"Create",type:"submit",fullWidth:!0,variant:"contained",color:"primary",elevation:10},"Create"))),T&&o.a.createElement(Ut.a,{open:k,onClose:I},o.a.createElement(Qt,{onClose:I},"Begin adding members to '",i,"'!"),o.a.createElement(Rt.a,null,o.a.createElement(je.a,{align:"center"},"Begin getting members to join your family! Simply share the code below to your family members, get them to sign up and then they can join!",o.a.createElement("br",null),v))))}var Ht=function(e){return o.a.createElement(he,null,o.a.createElement(U.a,null),o.a.createElement(_.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"80vh"}},o.a.createElement(_.a,{item:!0,xs:6},o.a.createElement(_t,e))))};function Vt(e){var t={child:Ft,childProps:{child:St},create:!0};return o.a.createElement(Nt,Object.assign({},e,t,{child:Ct}))}function Jt(e){var t={child:Ft,childProps:{child:St},view:!0};return o.a.createElement(Nt,Object.assign({},e,{child:Ct,childProps:t}))}function Zt(){var e=Object(h.a)(["\n    query artefactsQuery($first: Int!) {\n        me {\n            artefactAdministratorOf(first: $first) {\n                edges {\n                    node {\n                        id\n                        name\n                        description\n                        upload\n                    }\n                }\n            }\n        }\n    }\n"]);return Zt=function(){return e},e}var Gt=Object(z.a)(function(e){return{textField:{padding:e.spacing(1),backgroundColor:e.palette.background.paper,textAlign:"center",marginTop:e.spacing(1)},paper:{marginTop:e.spacing(1),padding:e.spacing(1),backgroundColor:e.palette.background.paper,textAlign:"center"},button:{margin:e.spacing(1)}}}),Xt=y()(Zt());var Yt=function(e){Gt();var t=Object(r.useState)([]),a=Object(b.a)(t,2),n=a[0],c=a[1],i=Object(O.c)(Xt,{variables:{first:10},onCompleted:function(e){return c(e.me.artefactAdministratorOf.edges)}}),l=i.data,s=i.loading;return console.log("The data is: ",l),s?o.a.createElement("p",null,"Loading..."):o.a.createElement(he,null,o.a.createElement(U.a,null),o.a.createElement(_.a,{container:!0,spacing:2},o.a.createElement(_.a,{item:!0,xs:12},o.a.createElement(_.a,{container:!0,justify:"center",spacing:2},n.map(function(e){return o.a.createElement(_.a,{item:!0,key:e.node.id},o.a.createElement(We,{mediaURI:"https://assets.pernod-ricard.com/nz/media_images/test.jpg?hUV74FvXQrWUBk1P2.fBvzoBUmjZ1wct",title:e.node.name,description:e.node.description,id:e.node.id}))})))))};function Kt(e){var t={child:Ft,childProps:{child:St},edit:!0};return o.a.createElement(Nt,Object.assign({},e,{child:Ct,childProps:t}))}function ea(e){return o.a.createElement("div",{style:{padding:"50px"}},o.a.createElement("h1",{style:{color:"red"}},"404 Page Not Found"),o.a.createElement("h3",null,"If you're seeing this page..."),o.a.createElement("img",{src:"https://media0.giphy.com/media/KVZXay4Uduy8XHpZRc/giphy.gif",alt:""}),o.a.createElement("p",null,o.a.createElement("a",{href:"/"},"Return home")))}var ta=a(261),aa=a(262),na=a(267),ra=a(263);function oa(){var e=Object(h.a)(["\nmutation SelectFamilyMutation($profileId: Int!, $toFamily: String!) {\n    updateProfile(input: {\n        id: $profileId,\n        selectedFamily: $toFamily\n    }) {\n        id\n        selectedFamily\n    }\n}"]);return oa=function(){return e},e}function ca(){var e=Object(h.a)(["\nmutation JoinFamily($joinCode: String!) {\n  familyJoin(joinCode: $joinCode) {\n    family {\n      familyName\n      familyAdmin {\n          username\n      }\n    }\n  }\n}"]);return ca=function(){return e},e}function ia(){var e=Object(h.a)(["\n        query {\n            me {\n            isMemberOf {\n            id\n            familyName\n            joinCode\n            hasArtefacts {\n                edges {\n                node {\n                    id\n                    name\n                    admin {\n                    username\n                    }\n                }\n                }\n            }\n            }\n            profile {\n                id\n                selectedFamily {\n                    id\n                    familyName\n                    joinCode\n                        hasArtefacts {\n                            edges {\n                                node {\n                                    id\n                                    name\n                                    description\n                                    upload\n                                }\n                            }\n                        }\n                    }\n                }\n        }\n    }"]);return ia=function(){return e},e}var la=Object(z.a)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:"80%",backgroundColor:e.palette.background.paper},icon:{color:"rgba(255, 255, 255, 0.54)"}}}),sa=y()(ia()),ua=y()(ca()),ma=y()(oa());var pa=function(e){var t=la(),a=Object(r.useContext)(j).user.username,n=Object(r.useState)(""),c=Object(b.a)(n,2),i=c[0],l=c[1],s=Object(O.b)(ua,{refetchQueries:function(e){return[{query:sa}]}}),u=Object(b.a)(s,2),m=u[0],p=(u[1].data,Object(O.c)(sa,{onCompleted:function(e){!function(e){e.me.profile.selectedFamily||console.error("User has not selected a family")}(e)}})),d=p.data,f=p.loading,g=(p.called,Object(O.b)(ma,{refetchQueries:function(e){return[{query:sa}]}})),h=Object(b.a)(g,2),v=h[0],y=(h[1].data,o.a.useRef(null));if(f)return o.a.createElement("p",null,"Loading...");var E=d.me.profile.selectedFamily,w=d.me.isMemberOf,k=d.me.profile.id,S=[];return E&&(S=d.me.profile.selectedFamily.hasArtefacts.edges),o.a.createElement(he,null,o.a.createElement(U.a,null),o.a.createElement(_.a,{container:!0,spacing:3},o.a.createElement(_.a,{item:!0,xs:9},E&&o.a.createElement("div",null,o.a.createElement(je.a,{variant:"h1"},E.familyName),o.a.createElement(je.a,{variant:"h5"},"Join code: ",E.joinCode)),!E&&o.a.createElement(je.a,{variant:"h2"},"Join and/or Select a Family"),o.a.createElement("h4",null,"Your username is (temp, for testing): ",a),o.a.createElement(ta.a,{cellHeight:"auto",className:t.gridList,cols:2},S.map(function(e,t){return o.a.createElement(aa.a,{key:t},o.a.createElement(We,{key:t,mediaURI:e.node.upload,title:e.node.name,description:e.node.description,id:e.node.id}))}))),o.a.createElement(_.a,{item:!0,xs:3},o.a.createElement(na.a,{ref:y,htmlFor:"outlined-age-simple"},"Select Family"),o.a.createElement(ra.a,{variant:"outlined",fullWidth:!0,value:E?E.id:null,onChange:function(e){e.preventDefault();var t=e.target.value;v({variables:{profileId:k,toFamily:t}})},inputProps:{name:"age",id:"outlined-age-simple",styles:{padding:"4px"}},padding:"5px"},w&&w.map(function(e,t){return o.a.createElement(te.a,{key:e.id,value:e.id},e.familyName)})),o.a.createElement(Ue.a,{fullWidth:!0},o.a.createElement(we.a,{id:"joinCodeField",label:"Join a family",value:i,className:t.textField,margin:"normal",onChange:function(e){return l(e.target.value)},fullWidth:!0}),o.a.createElement(V.a,{variant:"outlined",onClick:function(){0!==i.length?m({variables:{joinCode:i}}):console.error("Enter a valid joinCode")}},"Join Family")))))};function da(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function fa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?da(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):da(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ga(e){var t="mapbox://styles/mapbox/streets-v9?optimize=true";"dark"===Object(le.a)().palette.type&&(t="mapbox://styles/mapbox/dark-v10?optimize=true");var a=Object(O.a)(yt),n=Object(b.a)(a,2),c=n[0],i=n[1],l=i.called,s=(i.loading,i.data),u=e.families;e.familiesLoading;u.length&&!l&&c({variables:{id:u[0].id}});var m=[],p=Object(r.useState)([]),d=Object(b.a)(p,2),f=d[0],g=d[1],h=Object(r.useState)(!1),v=Object(b.a)(h,2),y=v[0],E=v[1];if(s&&s.family&&!y){m=s.family.hasArtefacts.edges.map(function(e){return e.node});for(var j=[],w=0;w<m.length;w++)m[w].address&&j.push(Me(m[w]).then(function(e){var t=e.response,a=e.artefact;if(!t.error)return fa({},a,{popup:!0,center:t.results[0].mapState.center});console.log(t.error)}));Promise.all(j).then(function(e){return g(e)}),E(!0)}return o.a.createElement($e,{mapStyle:t,mapState:{zoom:[0]},containerStyle:{height:"91vh",width:"100vw"},artefacts:f})}var ba=function(e){return o.a.createElement(he,null,o.a.createElement(Ct,Object.assign({},e,{child:ga})))};var ha=function(e){return o.a.createElement(F.a,null,o.a.createElement(U.a,null),o.a.createElement("div",null,o.a.createElement(I.d,null,o.a.createElement(Oe,{exact:!0,path:"/",loggedIn:pa,landingPage:!0}),o.a.createElement(I.b,{exact:!0,path:"/login/",component:Dt}),o.a.createElement(I.b,{exact:!0,path:"/signup/",component:zt}),o.a.createElement(I.b,{exact:!0,path:"/logout/",component:qt}),o.a.createElement(Oe,{exact:!0,path:"/artefacts/create/",loggedIn:Vt,landingPage:!0}),o.a.createElement(Oe,{exact:!0,path:"/artefacts/manage/",loggedIn:Yt,landingPage:!0}),o.a.createElement(Oe,{exact:!0,path:"/artefacts/:id/",loggedIn:Jt,landingPage:!0}),o.a.createElement(Oe,{exact:!0,path:"/artefacts/edit/:id/",loggedIn:Kt,landingPage:!0}),o.a.createElement(Oe,{exact:!0,path:"/family/create/",loggedIn:Ht,landingPage:!0}),o.a.createElement(Oe,{exact:!0,path:"/map/",loggedIn:ba,landingPage:!0}),o.a.createElement(I.b,{component:ea}))))};function va(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ya(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?va(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):va(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Oa=Object(s.a)({uri:P.uri}),Ea=Object(u.a)(function(e,t){var a=t.headers,n=localStorage.getItem(k);return{headers:ya({},a,{authorization:n?"JWT ".concat(n):""})}}),ja=new l.a({link:Ea.concat(Oa),cache:new m.a});i.a.render(o.a.createElement(p.a,{client:ja},o.a.createElement(function(e){var t=this,a=Object(r.useState)(!1),n=Object(b.a)(a,2),c=n[0],i=n[1],l=Object(r.useState)({}),s=Object(b.a)(l,2),u=s[0],m=s[1],p=Object(r.useState)(""),d=Object(b.a)(p,2),h=d[0],v=d[1],y=Object(O.b)(T),E=Object(b.a)(y,2),j=E[0],S=E[1],x=S.error,C=S.loading,P=function(){var e=Object(g.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=localStorage.getItem(k)),e.next=3,j({variables:{token:t}}).then(function(e){N(e),a&&a()}).catch(function(e){localStorage[k]="",a&&a()});case 3:if(!x){e.next=6;break}return console.log("[Error] handleAuthentication()"),e.abrupt("return");case 6:C&&console.log("Thing is loading");case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),N=function(e){if(x)console.log("Invalid data, please sign in again");else{var t=e.data.verifyToken.payload.username;console.log("Here's the user id: ",e.data.verifyToken.payload.id);var a={username:t};i(!0),v(e.verifyToken),m(a)}},F={authenticated:c,authToken:h,user:u,initiateLogin:function(){t.history.pushState(null,"login")},handleAuthentication:P,logout:function(){console.log("Logout called"),i(!1),m({}),v(""),localStorage[k]=""}};return o.a.createElement(w,{value:F},e.children)},null,o.a.createElement(ha,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[136,1,2]]]);
//# sourceMappingURL=main.825003b3.chunk.js.map