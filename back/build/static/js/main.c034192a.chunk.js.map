{"version":3,"sources":["serviceWorker.js","authContext.js","constants.js","components/Auth.js","components/LoggedInBar.js","components/NotLoggedInBar.js","components/Header.js","components/Layout.js","components/Loading.js","components/ArtefactCard.js","components/Map.js","components/MapAPI.js","gqlQueriesMutations.js","components/GetFamiliesWrapper.js","components/GetStatesWrapper.js","components/GetArtefactWrapper.js","components/ArtefactFamilyFormStyling.js","components/HelpDialog.js","views/LandingPage.js","components/PrivateRoute.js","views/LoginView.js","components/passwordValidator.js","views/SignupView.js","components/Logout.js","views/CreateFamilyView.js","views/artefactViews/components/CreateButton.js","views/artefactViews/components/Head.js","views/artefactViews/components/Name.js","views/artefactViews/components/State.js","views/artefactViews/components/Description.js","views/artefactViews/components/Admin.js","views/artefactViews/components/Date.js","views/artefactViews/components/Privacy.js","views/artefactViews/components/Families.js","views/artefactViews/components/Images.js","views/artefactViews/components/Address.js","views/artefactViews/components/EditButtons.js","views/artefactViews/components/FieldWrapper.js","views/artefactViews/components/SuccessSnackbar.js","views/artefactViews/components/DeleteDialog.js","views/artefactViews/components/HelpContent.js","views/artefactViews/ArtefactView.js","views/artefactViews/CreateArtefactView.js","views/artefactViews/DetailView.js","views/artefactViews/ManageArtefactsView.js","views/artefactViews/EditArtefactView.js","views/Error404View.js","views/UserHomeView.js","views/MapView.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","authContext","createContext","authenticated","user","initiateLogin","handleAuthentication","logout","AuthProvider","Provider","AUTH_TOKEN","Consumer","USERNAME_TAKEN_ERR_MSG","INVALID_CRED_ERR_MSG","MY_ACCESS_TOKEN","config","uri","mediaRoot","VERIFY_TOKEN_MUTATION","gql","useStyles","makeStyles","theme","drawer","width","marginTop","spacing","ComingSoon","require","Trianglify","height","png","style","position","marginLeft","padding","fontSize","color","backgroundColor","borderRadius","zIndex","drawerOpen","setDrawerOpen","setHelpOpen","classes","React","useState","anchorEl","setAnchorEl","context","useContext","open","handleClose","Drawer","anchor","onClose","e","className","role","onClick","onKeyDown","List","name","path","icon","Home","Group","Apps","Create","Map","map","Icon","ListItem","button","key","component","RouterLink","to","ListItemIcon","ListItemText","primary","IconButton","edge","aria-label","Help","aria-controls","aria-haspopup","event","currentTarget","AccountCircle","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","disabled","LoginLink","forwardRef","props","ref","innerRef","SignupLink","Button","underline","root","flexGrow","iconButton","marginRight","title","alignText","MenuAppBar","loggedIn","useTheme","dark","palette","type","setOpen","AppBar","elevation","Toolbar","Menu","Typography","variant","noWrap","onToggleDarkTheme","Brightness7","Brightness4","LoggedInBar","username","NotLoggedInBar","typography","fontFamily","h1","fontWeight","h2","h3","h4","h5","h6","lightPalette","indigo","secondary","main","teal","darkPalette","deepPurple","error","background","paper","default","lightTheme","createMuiTheme","darkTheme","localStorage","getItem","setItem","setTheme","helpOpen","children","Children","child","cloneElement","console","log","ThemeProvider","CssBaseline","newTheme","Grid","container","alignItems","justify","CircularProgress","textField","textAlign","margin","card","media","ArtefactCard","artefact","upload","description","admin","patternURI","setPatternURI","mediaURI","x_colors","light","y_colors","Card","CardMedia","image","CardContent","item","xs","gutterBottom","align","CardActions","size","fullWidth","popup","minWidth","mapProps","accessToken","attributionControl","maxZoom","minZoom","Mapbox","ReactMapboxGl","interactive","InteractiveMapbox","MapType","artefacts","openArtefactID","setOpenArtefactID","handleSetOpenArtefact","mapStyle","containerStyle","mapState","center","initPopupOpen","length","coordinates","src","alt","offset","bottom","geocodingService","mbxGeocoding","_handleResponse","response","out","features","body","noResults","results","i","feature","result","place_type","bboxCoords","bbox","fitBounds","zoom","placeName","place_name","locationType","push","_handleError","geocodeQuery","query","types","Promise","resolve","reject","args","limit","reverseGeocode","send","then","forwardGeocode","artefactGeocodeQuery","address","CREATE_ARTEFACT_MUTATION_STR","GET_ARTEFACT_STATES_QUERY","GET_FAMILIES_QUERY","ARTEFACT_DETAIL","UPDATE_ARTEFACT_MUTATION","LOGIN_MUTATION","GET_FAMILY_ARTEFACTS","SIGNUP_MUTATION","CREATE_FAMILY_MUTATION","DELETE_ARTEFACT_MUTATION","GetFamiliesWrapper","Child","childProps","rest","families","setFamilies","thisChildProps","familiesLoading","useQuery","onCompleted","data","me","isMemberOf","onError","loading","GetStatesWrapper","artefactStates","setArtefactStates","_saveArtefactStates","statesData","a","temp","__type","enumValues","state","desc","statesLoading","variables","GetArtefactWrapper","params","artefactData","artefactLoading","justifyContent","formControl","fieldTitle","paperWrapper","editLinkButton","deleteButton","form","marginBottom","display","flexWrap","dropzone","dropzoneText","outerContainer","alignContent","switch","MyDialogContent","content","Dialog","maxWidth","aria-labelledby","DialogActions","HomePageButton","linkTo","LandingPage","landingTheme","responsiveFontSizes","typing","setTyping","useEffect","href","rel","top","right","cursor","show","onTypingDone","Delay","ms","Backspace","count","delay","left","particles","number","value","density","enable","value_area","shape","stroke","polygon","nb_sides","opacity","random","anim","speed","opacity_min","sync","size_min","line_linked","distance","move","direction","straight","out_mode","bounce","attract","rotateX","rotateY","interactivity","detect_on","events","onhover","mode","onclick","resize","modes","grab","bubble","duration","repulse","particles_nb","remove","retina_detect","WaitWraper","checkAuthenticated","this","setState","localToken","Component","contextType","UnwrappedPrivateRoute","LoggedIn","loggedOut","landingPage","Loading","render","PrivateRoute","Layout","submit","Login","history","setUsername","password","setPassword","invalidCred","setInvalidCred","unknownError","setUnknownError","_confirm","token","tokenAuth","errors","graphQLErrors","subMessage","message","substring","startsWith","useMutation","login","submitForm","preventDefault","Paper","onSubmit","TextField","required","label","autoFocus","onChange","target","helperText","FormHelperText","Link","CenterWrapping","minHeight","sm","md","lg","PASSWORD_SCHEMA","is","min","max","has","uppercase","digits","not","oneOf","parseFailedRules","rules","output","rule","Signup","email","setEmail","confirmPassword","setConfirmPassword","usernameIsTaken","setUsernameIsTaken","emailIsTaken","validPassword","setValidPassword","failedPassRules","setFailedPassRules","emailValidator","signup","changePassword","pass","failedRules","validate","list","errorPassword","errorConfirmPassword","disableSubmit","invalidEmail","emailError","emailErrMsg","autoComplete","Logout","HelpContent","DialogTitle","DialogContent","DialogContentText","CreateFamilyView","artefactFamilyFormUseStyles","familyName","setFamilyName","about","setAbout","joinCode","setJoinCode","_completed","familyCreate","family","createFamily","FormControl","multiline","rows","defaultValue","HelpDialog","text","noErrors","states","setters","isAdmin","openDelete","create","edit","view","showEditButton","showDeleteButton","visibility","setMode","CreateButton","handleSetField","inputProps","readOnly","select","Object","keys","numFams","clearable","minDate","inputVariant","format","openTo","date","KeyboardButtonProps","FormControlLabel","control","Switch","checked","isPublic","belongsToFamiliesBools","values","filter","disablePadding","dense","Checkbox","tabIndex","initialFiles","files","acceptedFiles","filesLimit","dropzoneClass","dropzoneTextStyle","dropzoneParagraph","imageStyle","handleGeocodeQuery","setAddressIsSearchResult","setLocationState","handleSetLocationResult","locationState","InputProps","endAdornment","initial","keyCode","document","getElementById","click","Popover","queryResults","undefined","nested","save","cancel","updateErrors","MyButton","editButtonProps","beingEdited","thisBeingEdited","someBeingEdited","EditButtons","viewArtefact","ClickAwayListener","onClickAway","Snackbar","autoHideDuration","ContentProps","action","close","deleteArtefact","ArtefactView","setBeingEdited","prevValue","setPrevValue","snackbarOpen","setSnackbarOpen","deleteOpen","setDeleteOpen","prevMapState","addressIsSearchResult","newState","belong","val","belongsToFamilies","fieldName","handleUnselectedSearchField","pushViewArtefactURL","pushHomeURL","handleCreationCompleted","artefactCreate","updateCompleted","deleteCompleted","handleCreationError","handleUpdateError","handleDeleteError","createArtefact","successCallback","errorCallback","form_data","FormData","append","JSON","stringify","url","axios","post","headers","res","catch","err","updateArtefact","parseDate","toISOString","slice","famIDs","input","saveChange","artefactInput","componentProps","addressProps","newLocationState","showPrivacy","components","comp","Name","State","Admin","Date","Description","Privacy","Families","Images","componentsViewMode","regularView","Head","widthProps","FieldWrapper","Address","SuccessSnackbar","DeleteDialog","withRouter","utils","DateFnsUtils","CreateArtefactView","EditArtefactView","LIST_OF_ARTEFACTS","ManageArtefactsView","artefactEdges","artefactAdministratorOf","edges","node","Error404View","overflow","HOMEPAGE_INFO","JOIN_FAMILY_MUTATION","SELECT_FAMILY_MUTATION","UserHomeView","selectedFamily","profileId","formJoinCode","setFormJoinCode","copied","setCopied","refetchQueries","joinFamilyMutation","fetchPolicy","home_data","home_data_loading","selectFamily","profile","hasArtefacts","onCopy","newFamily","toFamily","SelectProps","autoWidth","overlay","success","green","MapStyles","MapView","defaultMapStyle","selectedArtefact","mapArtefacts","setMapArtefacts","setMapState","msg","errorSnackbar","setErrorSnackbar","promiseArr","all","handleChange","newCenter","coord","fam","SnackbarContent","aria-describedby","App","exact","DetailView","httpLink","createHttpLink","authLink","setContext","_","authorization","client","ApolloClient","link","concat","cache","InMemoryCache","defaultOptions","watchQuery","errorPolicy","ReactDOM","setAuthenticated","setUser","VerifyToken","authToken","_callback","setSession","verifyToken","payload","authProviderValue","pushState","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c034192a.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createContext } from \"react\";\n\nconst authContext = createContext({\n    authenticated: false, // to check if authenticated or not\n    user: {}, // store all the user details\n    initiateLogin: () => { }, \n    handleAuthentication: () => { }, \n    logout: () => { }\n});\n\nexport default authContext;\nexport const AuthProvider = authContext.Provider;\nexport const AuthConsumer = authContext.Consumer;","export const AUTH_TOKEN = 'auth-token'\nexport const THEME_TYPE = 'theme-type'\nexport const USERNAME_TAKEN_ERR_MSG = `duplicate key`\nexport const INVALID_CRED_ERR_MSG = `Please, enter valid credentials`\nexport const MY_ACCESS_TOKEN =\n           'pk.eyJ1IjoiemR1ZmZpZWxkIiwiYSI6ImNrMWdkODhpOTBiM28zZG03eDdjZ2dmN24ifQ.vAzlFYY5S9O82SKnwX69kQ'\n\n// GQL API for prod vs dev\n\n// Whatever server the app is on, /graphql/\nconst prod = {\n    uri: '/graphql/',\n    mediaRoot: 'https://artefact-picture.s3.amazonaws.com/media/'\n}\n\n// In case running dev on either :8000 or :3000, this must be specified as full path\nconst dev = {\n    uri: 'http://localhost:8000/graphql/',\n    mediaRoot: 'http://localhost:8000/media/'\n}\n\n// If npm run build => production, if npm start => development (built into react)\nexport const config = process.env.NODE_ENV === 'development' ? dev : prod\n","import React, { useState } from \"react\";\nimport gql from 'graphql-tag';\nimport { useMutation } from '@apollo/react-hooks';\nimport { AuthProvider } from \"../authContext\";\nimport { AUTH_TOKEN } from '../constants'\n\n\nconst VERIFY_TOKEN_MUTATION = gql`\nmutation VerifyToken($token: String!) {\n    verifyToken(token: $token) {\n        payload\n    }\n}\n`\n\n// Component that allows for Authentication throughout the application\nexport default function Auth(props) {\n    const [authenticated, setAuthenticated] = useState(false)\n    const [user, setUser] = useState({})\n    const [VerifyToken, {error, loading }] = useMutation(VERIFY_TOKEN_MUTATION)\n\n    const handleAuthentication = async (authToken, _callback) => {\n        \n        // const token = localStorage.getItem(AUTH_TOKEN)\n\n        await VerifyToken({ variables: { token: authToken } }).then((data) => {\n            setSession(data)\n            if (_callback) {\n                _callback();\n            }\n        }).catch((errors) => {\n            // If could not validate it, remove it to stop unnecessary requests\n            localStorage[AUTH_TOKEN] = \"\"\n            setAuthenticated(false)\n            if (_callback) {\n                _callback();\n            }\n        }\n\n        );\n        if (error) {\n            console.error(error);\n            return;\n        }\n\n        if (loading) {\n            console.log(\"Loading...\");\n        }\n\n    };\n\n    const setSession = (data) => {\n\n        const username = data.data.verifyToken.payload.username\n        const user = {\n            username: username,\n        };\n        setAuthenticated(true);\n        setUser(user);\n    }\n\n    const initiateLogin = () => {\n        this.history.pushState(null, 'login');\n    };\n\n    const logout = () => {\n        setAuthenticated(false);\n        setUser({});\n        localStorage[AUTH_TOKEN] = \"\";\n    };\n\n    const authProviderValue = {\n        authenticated,\n        user,\n        initiateLogin: initiateLogin,\n        handleAuthentication: handleAuthentication,\n        logout: logout\n    };\n\n    return (\n        <AuthProvider value={authProviderValue}>\n            {props.children}\n        </AuthProvider>\n    );\n}\n","import React, { useContext, useState } from 'react'\nimport {\n    IconButton,\n    Menu,\n    MenuItem,\n    Button,\n    makeStyles,\n    Drawer,\n    List,\n    ListItem,\n    ListItemText,\n    ListItemIcon\n} from '@material-ui/core'\n\nimport { teal, deepPurple, indigo } from '@material-ui/core/colors'\n\nimport {\n    Home,\n    Group,\n    Create,\n    Map,\n    Apps,\n    AccountCircle,\n    Help\n} from '@material-ui/icons'\n\nimport authContext from '../authContext'\nimport { Link as RouterLink } from 'react-router-dom'\nimport zIndex from '@material-ui/core/styles/zIndex'\n\nconst useStyles = makeStyles(theme => ({\n    drawer: {\n        width: 'auto',\n        marginTop: theme.spacing(5)\n    }\n}))\n\nconst Trianglify = require('trianglify')\nconst pattern = Trianglify({ width: 200, height: 200 })\nconst mediaURI = pattern.png()\n\nconst ComingSoon = () => {\n    return (\n            <span style={{\n                position: \"absolute\",\n                marginTop: \"15px\",\n                marginLeft: \"2px\",\n                padding: \"1px\",\n                fontSize: \"10px\",\n                color: \"white\",\n                backgroundColor: \"#00BCD4\",\n                borderRadius: \"4px\",\n                zIndex: 2\n            }}>\n                Coming Soon\n            </span>\n    )\n}\n\nexport default ({ drawerOpen, setDrawerOpen, setHelpOpen }) => {\n    const classes = useStyles()\n    const [anchorEl, setAnchorEl] = React.useState(null)\n    const context = useContext(authContext)\n    const open = Boolean(anchorEl)\n\n    function handleMenu(event) {\n        setAnchorEl(event.currentTarget)\n    }\n\n    function handleClose() {\n        setAnchorEl(null)\n    }\n\n    function handleLogout() {\n        context.logout()\n    }\n\n    return (\n        <div>\n            <Drawer\n                anchor='left'\n                open={drawerOpen}\n                onClose={e => setDrawerOpen(false)}\n            >\n                <div\n                    className={classes.drawer}\n                    role='presentation'\n                    onClick={e => setDrawerOpen(false)}\n                    onKeyDown={e => setDrawerOpen(false)}\n                >\n                    <List>\n                        {[\n                            { name: 'Home', path: '/', icon: Home },\n                            {\n                                name: 'Create Family',\n                                path: '/family/create/',\n                                icon: Group\n                            },\n                            {\n                                name: 'Manage Artefacts',\n                                path: '/artefacts/manage/',\n                                icon: Apps\n                            },\n                            {\n                                name: 'Create Artefact',\n                                path: '/artefacts/create/',\n                                icon: Create\n                            },\n                            { name: 'Artefact Map', path: '/map/', icon: Map }\n                        ].map(({ name, path, icon: Icon }) => (\n                            <ListItem\n                                button\n                                key={path}\n                                component={RouterLink}\n                                to={path}\n                                style={{ borderRadius: 10 }}\n                            >\n                                <ListItemIcon>\n                                    <Icon />\n                                </ListItemIcon>\n                                <ListItemText\n                                    primary={name}\n                                />\n                            </ListItem>\n                        ))}\n                    </List>\n                </div>\n            </Drawer>\n\n            <IconButton\n                edge='start'\n                color='inherit'\n                aria-label='menu'\n                onClick={() => setHelpOpen(true)}\n            >\n                <Help />\n            </IconButton>\n\n            <IconButton\n                aria-label='account of current user'\n                aria-controls='menu-appbar'\n                aria-haspopup='true'\n                onClick={handleMenu}\n                color='inherit'\n            >\n                <AccountCircle />\n            </IconButton>\n            <Menu\n                id='menu-appbar'\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right'\n                }}\n                keepMounted\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right'\n                }}\n                open={open}\n                onClose={handleClose}\n            >\n                <MenuItem onClick={handleClose} disabled>\n                    Profile\n                    <ComingSoon />\n                </MenuItem>\n                <MenuItem onClick={handleClose} disabled>\n                    Settings\n                    <ComingSoon />\n                </MenuItem>\n                <MenuItem onClick={handleLogout}>Logout</MenuItem>\n            </Menu>\n        </div>\n    )\n}\n","import React from 'react';\nimport { Button } from '@material-ui/core';\nimport { Link as RouterLink } from 'react-router-dom';\n\nconst LoginLink = React.forwardRef((props, ref) => (\n    <RouterLink innerRef={ref} to=\"/login\" {...props} />\n));\n\nconst SignupLink = React.forwardRef((props, ref) => (\n    <RouterLink innerRef={ref} to=\"/signup\" {...props} />\n));\n\n\nexport default props => {\n    return (\n        <div>\n            <Button color=\"inherit\" underline=\"none\" component={SignupLink}>Sign up</Button>\n            <Button color=\"inherit\" underline=\"none\" component={LoginLink}>Login</Button>\n        </div>\n    );\n};\n","import React, { useContext, useState } from 'react'\nimport {\n    IconButton,\n    Toolbar,\n    AppBar,\n    Button,\n    makeStyles,\n    Grid,\n    Typography,\n    Link\n} from '@material-ui/core'\n// import MenuIcon from '@material-ui/icons/Menu'\n\nimport { Home, Menu, Brightness4, Brightness7 } from '@material-ui/icons'\n\nimport LoggedInBar from './LoggedInBar'\nimport NotLoggedInBar from './NotLoggedInBar'\nimport { Link as RouterLink } from 'react-router-dom'\nimport { useTheme } from '@material-ui/styles'\n\nimport authContext from '../authContext'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        flexGrow: 1\n    },\n    iconButton: {\n        marginRight: theme.spacing(1)\n    },\n    title: {\n        flexGrow: 1,\n        alignText: 'left'\n    }\n}))\n\nexport default function MenuAppBar(props) {\n    const classes = useStyles()\n\n    const context = useContext(authContext)\n    let loggedIn = context.authenticated\n    let username = null\n\n    const theme = useTheme()\n    const dark = theme && theme.palette.type === 'dark'\n\n    const [open, setOpen] = useState(false)\n    return (\n        <div className={classes.root}>\n            <AppBar position='static' color='primary' elevation={6}>\n                <Toolbar>\n                    <IconButton\n                        className={classes.iconButton}\n                        edge='start'\n                        color='inherit'\n                        aria-label='menu'\n                        onClick={e => setOpen(true)}\n                    >\n                        <Menu />\n                    </IconButton>\n\n                    <IconButton\n                        className={classes.iconButton}\n                        color='inherit'\n                        aria-label='home'\n                        component={RouterLink}\n                        to='/'\n                    >\n                        <Home />\n                    </IconButton>\n\n                    <Typography variant='h6' className={classes.title} noWrap>\n                        Artefacts Register\n                    </Typography>\n\n\n                    <IconButton\n                        className={classes.iconButton}\n                        color='inherit'\n                        aria-label='theme-toggle'\n                        onClick={props.onToggleDarkTheme}\n                    >\n                        {!dark ? <Brightness4 /> : <Brightness7 />}\n                    </IconButton>\n\n                    {loggedIn ? (\n                        <LoggedInBar\n                            username={username}\n                            drawerOpen={open}\n                            setDrawerOpen={setOpen}\n                            setHelpOpen={props.setHelpOpen}\n                        />\n                    ) : (\n                        <NotLoggedInBar />\n                    )}\n                </Toolbar>\n            </AppBar>\n        </div>\n    )\n}\n","import React, { useState } from 'react'\nimport { CssBaseline } from '@material-ui/core'\nimport Header from './Header'\n\nimport { createMuiTheme } from '@material-ui/core/styles'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { teal, deepPurple, indigo } from '@material-ui/core/colors'\n\nimport { THEME_TYPE } from '../constants.js'\n\nconst typography = {\n    fontFamily: 'Dosis, Roboto, sans-serif',\n    h1: {\n        fontFamily: 'Roboto, sans-serif',\n        fontWeight: 100,\n    },\n    h2: {\n        fontFamily: 'Roboto, sans-serif',\n        fontWeight: 100,\n    },\n    h3: {\n        fontFamily: 'Roboto, sans-serif'\n    },\n    h4: {\n        fontFamily: 'Roboto, sans-serif'\n    },\n    h5: {\n        fontFamily: 'Roboto, sans-serif'\n    },\n    h6: {\n        fontFamily: 'Roboto, sans-serif'\n    }\n}\n\n// const typography = {\n//     fontFamily: 'Roboto, Dosis, sans-serif',\n//     h1: {\n//         fontFamily: 'Dosis, sans-serif'\n//     },\n//     h2: {\n//         fontFamily: 'Dosis, sans-serif'\n//     },\n//     h3: {\n//         fontFamily: 'Dosis, sans-serif'\n//     },\n//     h4: {\n//         fontFamily: 'Dosis, sans-serif'\n//     },\n//     h5: {\n//         fontFamily: 'Dosis, sans-serif'\n//     },\n//     h6: {\n//         fontFamily: 'Dosis, sans-serif'\n//     }\n// }\n\nconst lightPalette = {\n    primary: indigo,\n    secondary: {\n        main: teal[400]\n    },\n    type: 'light'\n}\n\nconst darkPalette = {\n    primary: {\n        main: deepPurple['A100']\n    },\n    secondary: teal,\n    error: {\n        main: '#CF6679'\n    },\n    background: {\n        paper: '#303030',\n        default: '#121212'\n    },\n    type: 'dark'\n}\n\nconst lightTheme = createMuiTheme({\n    palette: lightPalette,\n    type: 'light',\n    typography: typography\n})\n\nconst darkTheme = createMuiTheme({\n    palette: darkPalette,\n    type: 'dark',\n    typography: typography\n})\n\n\nexport default props => {\n    // Get the user's theme from local storage. This will clear if localStorage.clear()\n    if (!localStorage.getItem(THEME_TYPE)) {\n        localStorage.setItem(THEME_TYPE, 'light')\n    }\n\n    const [theme, setTheme] = useState(\n        localStorage.getItem(THEME_TYPE) === 'light' ? lightTheme : darkTheme\n    )\n\n    // Called on click of dark theme button\n    const toggleDarkTheme = () => {\n        var newTheme = theme.palette.type === 'light' ? 'dark' : 'light'\n        localStorage.setItem(THEME_TYPE, newTheme)\n        setTheme(newTheme === 'light' ? lightTheme : darkTheme)\n    }\n\n    const [helpOpen, setHelpOpen] = useState(false)\n    const children = React.Children.map(props.children, child => {\n        return React.cloneElement(child, {\n            helpOpen: helpOpen,\n            setHelpOpen: setHelpOpen\n        })\n    })\n\n    console.log(theme.typography)\n    return (\n        <ThemeProvider theme={theme}>\n            <CssBaseline />\n            <Header\n                onToggleDarkTheme={toggleDarkTheme}\n                setHelpOpen={setHelpOpen}\n            />\n            {children}\n        </ThemeProvider>\n    )\n}\n","import React from 'react'\nimport { CircularProgress, Grid } from '@material-ui/core'\n\n\n// So user knows the page is loading, present a nice spinny circle\nexport default () => (\n    <Grid\n        container\n        alignItems='center'\n        justify='center'\n        style={{ height: '90vh' }}\n    >\n        <CircularProgress />\n    </Grid>\n)\n","import React, { useState } from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { useTheme } from '@material-ui/styles'\nimport Card from '@material-ui/core/Card'\nimport CardActionArea from '@material-ui/core/CardActionArea'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardMedia from '@material-ui/core/CardMedia'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport { Link as RouterLink } from 'react-router-dom'\n\nimport { config } from '../constants'\n\nvar Trianglify = require('trianglify')\n\nconst useStyles = makeStyles(theme => ({\n    textField: {\n        // marginLeft: theme.spacing(1),\n        // marginRight: theme.spacing(1),\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.paper,\n        textAlign: 'center',\n        marginTop: theme.spacing(1)\n    },\n    paper: {\n        marginTop: theme.spacing(1),\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.paper,\n        textAlign: 'center'\n    },\n    button: {\n        margin: theme.spacing(1)\n    },\n    card: {\n        backgroundColor: theme.palette.background.paper,\n        // maxWidth: 345,\n        borderRadius: 10\n        // height: '100%'\n    },\n    media: {\n        backgroundColor: theme.palette.background.paper,\n        height: 170\n    }\n}))\n\n/*\nThis component is to present a summary of the artefact to a user, it's used in the homepage\nand manage page as a quick way to assist navigating through artefacts\n*/\nfunction ArtefactCard({ artefact }) {\n    const classes = useStyles()\n    const theme = useTheme()\n\n    const { upload, name, description, id, admin } = artefact\n    const [patternURI, setPatternURI] = useState('')\n\n    var mediaURI = config.mediaRoot + upload\n    if (upload === 'False' && !patternURI) {\n        // use primary colour of theme as a seed for the random colour generation\n        var pattern = Trianglify({\n            width: 500,\n            height: 500,\n            x_colors: [theme.palette.primary.dark, theme.palette.secondary.light],\n            y_colors: 'random'\n        })\n        setPatternURI(pattern.png())\n    }\n\n    return (\n        <Card className={classes.card} elevation={3}>\n            <CardMedia\n                className={classes.media}\n                image={patternURI ? patternURI : mediaURI}\n                title={name}\n            />\n            <CardContent>\n                <Grid container>\n                    <Grid item xs={9}>\n                        <Typography\n                            gutterBottom\n                            variant='h5'\n                            component='h2'\n                            noWrap\n                        >\n                            {name}\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={3}>\n                        <Typography\n                            gutterBottom\n                            variant='overline'\n                            component='h2'\n                            noWrap\n                            align='right'\n                        >\n                            {admin.username}\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Typography\n                            variant='body2'\n                            color='textSecondary'\n                            component='p'\n                            noWrap\n                        >\n                            {description}\n                        </Typography>\n                    </Grid>\n                </Grid>\n            </CardContent>\n            <CardActions>\n                <Button\n                    size='small'\n                    fullWidth\n                    color='primary'\n                    component={RouterLink}\n                    to={`/artefacts/${id}`}\n                >\n                    View\n                </Button>\n                {/* <Button\n                    size='small'\n                    color='secondary'\n                    component={RouterLink}\n                    to={`/artefacts/edit/${id}`}\n                >\n                    Edit\n                </Button> */}\n            </CardActions>\n        </Card>\n    )\n}\n\nexport default ArtefactCard\n","import React, { Fragment, useState } from 'react'\nimport ReactMapboxGl, { Marker, Popup } from 'react-mapbox-gl'\nimport { MY_ACCESS_TOKEN } from '../constants'\nimport ArtefactCard from '../components/ArtefactCard'\nimport { makeStyles } from '@material-ui/core/styles'\nimport './popup.css'\n\nconst useStyles = makeStyles(theme => ({\n    popup: {\n        zIndex: '50 !important',\n        minWidth: '300px'\n    }\n}))\n\nconst mapProps = {\n    accessToken: MY_ACCESS_TOKEN,\n    attributionControl: false,\n    maxZoom: 18,\n    minZoom: 2\n}\nconst Mapbox = ReactMapboxGl({\n    ...mapProps,\n    interactive: false\n})\n\nconst InteractiveMapbox = ReactMapboxGl({\n    ...mapProps,\n    interactive: true\n})\n\nexport default function Map(props) {\n    const classes = useStyles()\n\n    const MapType = props.interactive ? InteractiveMapbox : Mapbox\n    var artefacts = props.artefacts\n    if (!artefacts) artefacts = []\n\n    const [openArtefactID, setOpenArtefactID] = useState('')\n\n    const handleSetOpenArtefact = id => {\n        if (openArtefactID === id) {\n            setOpenArtefactID('')\n        } else {\n            setOpenArtefactID(id)\n        }\n    }\n\n    const onMapClick = () => {\n        handleSetOpenArtefact('')\n        if (props.onClick) {\n            props.onClick()\n        }\n    }\n\n    return (\n        <MapType\n            style={\n                props.mapStyle\n                    ? props.mapStyle\n                    : 'mapbox://styles/mapbox/streets-v9?optimize=true'\n            }\n            containerStyle={props.containerStyle}\n            {...props.mapState}\n            onClick={onMapClick}\n        >\n            {artefacts.map(artefact => {\n                var { center, popup, initPopupOpen, id, ...rest } = artefact\n                if (initPopupOpen) {\n                    artefact.initPopupOpen = false\n                    setOpenArtefactID(id)\n                }\n                if (!center || !center.length) {\n                    return null\n                }\n                return (\n                    <Fragment key={id}>\n                        <Marker\n                            coordinates={center}\n                            onClick={e => handleSetOpenArtefact(id)}\n                        >\n                            <img\n                                src={\n                                    'http://maps.google.com/mapfiles/ms/icons/red.png'\n                                }\n                                alt='marker-img'\n                            />\n                        </Marker>\n                        {popup && openArtefactID === id && (\n                            <Popup\n                                coordinates={center}\n                                offset={{\n                                    'bottom-left': [12, -38],\n                                    bottom: [0, -38],\n                                    'bottom-right': [-12, -38]\n                                }}\n                                className={classes.popup}\n                            >\n                                <ArtefactCard artefact={artefact} />\n                            </Popup>\n                        )}\n                    </Fragment>\n                )\n            })}\n        </MapType>\n    )\n}\n","import { MY_ACCESS_TOKEN } from '../constants'\n// import { geocodeQuery } from '.'\nconst mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding')\nconst geocodingService = mbxGeocoding({ accessToken: MY_ACCESS_TOKEN })\n\nconst _handleResponse = response => {\n    var out = {}\n    // console.log('GEOCODING RESPONSE: ', response.body)\n    const features = response.body.features\n    if (!features) {\n        out.noResults = true\n        return out\n    }\n    var results = []\n    for (var i = 0; i < features.length; i++) {\n        var feature = features[i]\n        var result = {}\n        result.mapState = { center: feature.center }\n\n        if (feature.place_type[0] === 'place') {\n            const bboxCoords = feature.bbox\n            if (bboxCoords) {\n                const bbox = [\n                    [bboxCoords[0], bboxCoords[1]],\n                    [bboxCoords[2], bboxCoords[3]]\n                ]\n                result.mapState.fitBounds = bbox\n            }\n        } else if (feature.place_type[0] === 'address') {\n            result.mapState.zoom = [15]\n        }\n        result.placeName = feature.place_name\n        result.locationType = feature.place_type[0]\n        results.push(result)\n    }\n    out.results = results\n    return out\n}\n\nconst _handleError = error => {\n    var out = {}\n    console.log('query error occurred')\n    out.error = error\n    return out\n}\n\nexport default function geocodeQuery(query, types) {\n    if (!query) {\n        return new Promise(function(resolve, reject) {\n            resolve()\n        })\n    }\n\n    var args = {\n        query: query,\n        limit: 5,\n    }\n    if (types) args.types = types\n\n    if (typeof query === 'object') {\n        return geocodingService\n            .reverseGeocode(args)\n            .send()\n            .then(\n                response => _handleResponse(response),\n                error => _handleError(error)\n            )\n    } else if (typeof query === 'string') {\n        return geocodingService\n            .forwardGeocode(args)\n            .send()\n            .then(\n                response => _handleResponse(response),\n                error => _handleError(error)\n            )\n    }\n}\n\nexport function artefactGeocodeQuery(artefact) {\n    return geocodeQuery(artefact.address).then(response => {\n        return { artefact: artefact, response: response }\n    })\n}\n","import gql from 'graphql-tag'\n\n// Get the id back to allow for querying for the artefact later\nexport const CREATE_ARTEFACT_MUTATION = gql`\n    mutation CreateArtefactMutation(\n        $name: String!\n        $state: String!\n        $isPublic: Boolean\n        $description: String!\n        $belongsToFamilies: [ID]\n        $address: String\n        $date: String\n    ) {\n        artefactCreate(\n            input: {\n                name: $name\n                state: $state\n                description: $description\n                isPublic: $isPublic\n                belongsToFamilies: $belongsToFamilies\n                address: $address\n                date: $date\n            }\n        ) {\n            artefact {\n                id\n            }\n        }\n    }\n`\n\nexport const CREATE_ARTEFACT_MUTATION_STR = `\nmutation CreateArtefactMutation(\n        $name: String!\n        $state: String!\n        $isPublic: Boolean\n        $description: String!\n        $belongsToFamilies: [ID]\n        $address: String\n        $date: String\n    ) {\n        artefactCreate(\n            input: {\n                name: $name\n                state: $state\n                description: $description\n                isPublic: $isPublic\n                belongsToFamilies: $belongsToFamilies\n                address: $address\n                date: $date\n            }\n        ) {\n            artefact {\n                id\n            }\n        }\n    }\n`\n\nexport const GET_ARTEFACT_STATES_QUERY = gql`\n    query ArtefactStatesQuery($name: String!) {\n        __type(name: $name) {\n            enumValues {\n                name\n                description\n            }\n        }\n    }\n`\n\nexport const GET_FAMILIES_QUERY = gql`\n    query artefactsQuery {\n        me {\n            isMemberOf {\n                familyName\n                id\n            }\n        }\n    }\n`\n\nexport const GET_MY_ID_QUERY = gql`\n    query artefactsQuery {\n        me {\n            id\n        }\n    }\n`\n\nexport const ARTEFACT_DETAIL = gql`\n    query DetailView($id: ID!) {\n        artefact(id: $id) {\n            id\n            name\n            description\n            admin {\n                id\n                username\n            }\n            state\n            isPublic\n            upload\n            belongsToFamilies {\n                id\n            }\n            addedAt\n            address\n            date\n        }\n    }\n`\n\nexport const UPDATE_ARTEFACT_MUTATION = gql`\n    mutation UpdateArtefactMutation(\n        $id: ID!\n        $artefactInput: ArtefactInputType!\n    ) {\n        artefactUpdate(id: $id, input: $artefactInput) {\n            artefact {\n                id\n            }\n        }\n    }\n`\n\nexport const LOGIN_MUTATION = gql`\n    mutation TokenAuth($username: String!, $password: String!) {\n        tokenAuth(username: $username, password: $password) {\n            token\n        }\n    }\n`\n\nexport const GET_FAMILY_ARTEFACTS = gql`\n    query getFamilyArtefacts($id: ID!) {\n        family(id: $id) {\n            hasArtefacts {\n                edges {\n                    node {\n                        id\n                        name\n                        description\n                        address\n                        upload\n                        admin {\n                            username\n                        }\n                    }\n                }\n            }\n        }\n    }\n`\n\nexport const SIGNUP_MUTATION = gql`\n    mutation SignupMutation(\n        $email: String!\n        $password: String!\n        $username: String!\n    ) {\n        createUser(email: $email, username: $username, password: $password) {\n            user {\n                id\n                username\n                email\n            }\n        }\n    }\n`\n\n// Get the familyName and joinCode back to present to the user straight away after\n// successful creation\nexport const CREATE_FAMILY_MUTATION = gql`\n    mutation FamilyCreate($familyName: String!, $about: String) {\n        familyCreate(input: { familyName: $familyName, about: $about }) {\n            family {\n                familyName\n                joinCode\n            }\n        }\n    }\n`\n\nexport const DELETE_ARTEFACT_MUTATION = gql`\n    mutation ArtefactDelete($id: ID!) {\n        artefactDelete(id: $id) {\n            ok\n        }\n    }\n`\n","import React, { useState } from 'react'\nimport { useQuery } from '@apollo/react-hooks'\n\nimport {\n    GET_FAMILIES_QUERY\n} from '../gqlQueriesMutations'\n\nexport default function GetFamiliesWrapper({\n    child: Child,\n    childProps,\n    ...rest\n}) {\n\n    const [families, setFamilies] = useState([])\n    // get users families\n    const { loading } = useQuery(GET_FAMILIES_QUERY, {\n        onCompleted: data => setFamilies(data.me.isMemberOf),\n        onError: error => console.log(error)\n    })\n\n    var thisChildProps = {\n        ...childProps,\n        families: families,\n        familiesLoading: loading\n    }\n\n    return <Child {...rest} {...thisChildProps} />\n}\n","import React, { useState } from 'react'\nimport { useQuery } from '@apollo/react-hooks'\n\nimport { GET_ARTEFACT_STATES_QUERY } from '../gqlQueriesMutations'\n\nexport default function GetStatesWrapper({\n    child: Child,\n    childProps,\n    ...rest\n}) {\n    // get artefact states\n    const [artefactStates, setArtefactStates] = useState({})\n    const _saveArtefactStates = async statesData => {\n        var temp = {}\n        var desc\n        var state\n        for (var i in statesData.__type.enumValues) {\n            state = statesData.__type.enumValues[i]\n            desc = state.description\n            temp[desc] = state.name\n        }\n        setArtefactStates(temp)\n    }\n    const { loading } = useQuery(GET_ARTEFACT_STATES_QUERY, {\n        variables: {\n            name: 'ArtefactState'\n        },\n        onCompleted: _saveArtefactStates,\n        onError: error => console.log(error)\n    })\n\n    var thisChildProps = {\n        ...childProps,\n        artefactStates: artefactStates,\n        statesLoading: loading\n    }\n\n    return <Child {...rest} {...thisChildProps} />\n}\n","import React from 'react'\nimport { useQuery } from '@apollo/react-hooks'\nimport { ARTEFACT_DETAIL } from '../gqlQueriesMutations'\n\nexport default function GetArtefactWrapper({\n    child: Child,\n    childProps,\n    ...rest\n}) {\n    const { data, loading } = useQuery(ARTEFACT_DETAIL, {\n        variables: {\n            id: rest.match.params.id\n        },\n        onError: error => console.error(error),\n    })\n\n    var thisChildProps = {\n        ...childProps,\n        artefactData: data,\n        artefactLoading: loading,\n    }\n\n    return <Child {...rest} {...thisChildProps} />\n}\n","import { makeStyles } from '@material-ui/core/styles'\n\nexport default makeStyles(theme => ({\n    root: {\n        width: '100%',\n        height: '100%',\n        backgroundColor: theme.palette.background.paper,\n        justifyContent: 'center'\n    },\n    formControl: {\n        height: '100%',\n        justifyContent: 'flex-start',\n        textAlign: 'left'\n    },\n    fieldTitle: {\n        textAlign: 'left',\n        marginLeft: theme.spacing(1)\n    },\n    paper: {\n        padding: theme.spacing(1),\n        // textAlign: 'center',\n        backgroundColor: theme.palette.background.paper\n    },\n    paperWrapper: {\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.paper,\n        width: '100%',\n        borderRadius: 10\n    },\n    button: {\n        height: '100%'\n    },\n    editLinkButton: {\n        width: '60px',\n        height: '30px',\n        margin: theme.spacing(1)\n    },\n    deleteButton: {\n        width: '60px',\n        height: '30px',\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.error.main\n    },\n    map: {\n        height: '200px',\n        type: theme.palette.type\n    },\n    form: {\n        marginBottom: theme.spacing(10),\n        marginTop: theme.spacing(2),\n        display: 'flex',\n        flexWrap: 'wrap',\n        textAlign: 'center'\n    },\n    iconButton: {\n        padding: 10\n    },\n    dropzone: {\n        backgroundColor: theme.palette.background.paper + '!important',\n        height: '100%',\n        borderRadius: 10,\n        alignItems: 'flex-start !important'\n    },\n    dropzoneText: {\n        fontSize: 'medium !important'\n        // margin: '0 !important'\n    },\n    outerContainer: {\n        spacing: theme.spacing(1),\n        alignItems: 'stretch',\n        alignContent: 'stretch',\n        justifyContent: 'center'\n    },\n    switch: {\n        justifyContent: 'center',\n        textAlign: 'center'\n    }\n}))\n","import React from 'react'\nimport { Button, Dialog, DialogActions } from '@material-ui/core'\n\nexport default ({ open, setOpen, content: MyDialogContent, ...rest }) => (\n    <Dialog\n        fullWidth\n        maxWidth='sm'\n        open={open}\n        onClose={() => setOpen(false)}\n        aria-labelledby='help-title'\n    >\n        <MyDialogContent {...rest} />\n        <DialogActions>\n            <Button onClick={() => setOpen(false)} color='primary'>\n                Close\n            </Button>\n        </DialogActions>\n    </Dialog>\n)\n","import React, { useState, useEffect } from 'react'\nimport Particles from 'react-particles-js'\nimport { Button } from '@material-ui/core'\nimport { createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles'\nimport { ThemeProvider } from '@material-ui/styles'\nimport Typography from '@material-ui/core/Typography'\nimport Typist from 'react-typist'\nimport { Link as RouterLink } from 'react-router-dom'\n\n/*\nThe page that users come to when they first encounter our app. It's a marketing page\n\n*/\nfunction HomePageButton(props) {\n    const { linkTo } = props\n    return (\n        <Button\n            style={{\n                color: '#f0f0f0',\n                padding: '12px',\n                margin: '4px',\n                marginTop: '8px'\n            }}\n            component={RouterLink}\n            to={linkTo}\n        >\n            {props.children}\n        </Button>\n    )\n}\n\nfunction LandingPage(props) {\n    // Help the landing page be mobile friendly\n    let landingTheme = createMuiTheme()\n    landingTheme = responsiveFontSizes(landingTheme)\n\n    // Allow for looping of the typing animation\n    const [typing, setTyping] = useState(true)\n    useEffect(() => {\n        setTyping(true)\n    }, [typing])\n\n    const typingDone = () => {\n        setTyping(false)\n    }\n\n    return (\n        <div>\n            <ThemeProvider theme={landingTheme}>\n                <link\n                    href='https://fonts.googleapis.com/css?family=Dosis&display=swap'\n                    rel='stylesheet'\n                ></link>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top: 0,\n                        right: '20px',\n                        zIndex: 4\n                    }}\n                >\n                    <HomePageButton linkTo='/signup'>Sign up</HomePageButton>\n                    <HomePageButton linkTo='/login'>Login</HomePageButton>\n                </div>\n                <Typography\n                    theme={landingTheme}\n                    variant='h1'\n                    style={{\n                        marginLeft: '8%',\n                        marginRight: '8%',\n                        marginTop: '10%',\n                        zIndex: 3,\n                        position: 'relative',\n                        fontWeight: 'lighter',\n                        fontFamily: 'Dosis',\n                        color: '#f0f0f0'\n                    }}\n                >\n                    Family Artefacts Register\n                </Typography>\n                <Typography\n                    variant='h2'\n                    theme={landingTheme}\n                    style={{\n                        marginLeft: '8%',\n                        marginRight: '8%',\n                        marginTop: '1%',\n                        zIndex: 3,\n                        position: 'relative',\n                        top: '8rem',\n                        fontWeight: 'lighter',\n                        fontFamily: 'Dosis',\n                        color: '#f0f0f0'\n                    }}\n                >\n                    {typing ? (\n                        <Typist\n                            cursor={{ show: false }}\n                            onTypingDone={typingDone}\n                        >\n                            <Typist.Delay ms={400} />\n                            <span>Connecting you to your family</span>\n                            <span> and your familys history.</span>\n                            <Typist.Backspace count={10} delay={200} />\n                            <span>'s history.</span>\n                            <Typist.Backspace count={56} delay={5000} />\n                        </Typist>\n                    ) : (\n                        ''\n                    )}\n                </Typography>\n                <Particles\n                    style={{\n                        position: 'fixed',\n                        left: 0,\n                        top: 0,\n                        background: 'rgb(103, 58, 183)',\n                        background:\n                            'linear-gradient(90deg, rgba(103, 58, 183, 1) 25%, rgba(63, 81, 181, 1) 100%, rgba(255, 255, 255, 1) 100%)'\n                    }}\n                    params={{\n                        particles: {\n                            number: {\n                                value: 120,\n                                density: {\n                                    enable: true,\n                                    value_area: 800\n                                }\n                            },\n                            color: {\n                                value: '#ffffff'\n                            },\n                            shape: {\n                                type: 'circle',\n                                stroke: {\n                                    width: 0,\n                                    color: '#FFFFFF'\n                                },\n                                polygon: {\n                                    nb_sides: 5\n                                },\n                                image: {\n                                    src: 'img/github.svg',\n                                    width: 100,\n                                    height: 100\n                                }\n                            },\n                            opacity: {\n                                value: 0.44093831673801875,\n                                random: false,\n                                anim: {\n                                    enable: false,\n                                    speed: 1,\n                                    opacity_min: 0.1,\n                                    sync: false\n                                }\n                            },\n                            size: {\n                                value: 4.008530152163807,\n                                random: true,\n                                anim: {\n                                    enable: false,\n                                    speed: 40,\n                                    size_min: 0.1,\n                                    sync: false\n                                }\n                            },\n                            line_linked: {\n                                enable: true,\n                                distance: 150,\n                                color: '#ffffff',\n                                opacity: 0.4,\n                                width: 1\n                            },\n                            move: {\n                                enable: true,\n                                speed: 6,\n                                direction: 'none',\n                                random: false,\n                                straight: false,\n                                out_mode: 'out',\n                                bounce: false,\n                                attract: {\n                                    enable: false,\n                                    rotateX: 600,\n                                    rotateY: 1200\n                                }\n                            }\n                        },\n                        interactivity: {\n                            detect_on: 'canvas',\n                            events: {\n                                onhover: {\n                                    enable: true,\n                                    mode: 'grab'\n                                },\n                                onclick: {\n                                    enable: true,\n                                    mode: 'push'\n                                },\n                                resize: true\n                            },\n                            modes: {\n                                grab: {\n                                    distance: 400,\n                                    line_linked: {\n                                        opacity: 1\n                                    }\n                                },\n                                bubble: {\n                                    distance: 400,\n                                    size: 40,\n                                    duration: 2,\n                                    opacity: 8,\n                                    speed: 3\n                                },\n                                repulse: {\n                                    distance: 200,\n                                    duration: 0.4\n                                },\n                                push: {\n                                    particles_nb: 4\n                                },\n                                remove: {\n                                    particles_nb: 2\n                                }\n                            }\n                        },\n                        retina_detect: true\n                    }}\n                ></Particles>\n            </ThemeProvider>\n        </div>\n    )\n}\nexport default LandingPage\n","import React, { Component, useContext } from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport authContext from '../authContext'\nimport { AUTH_TOKEN } from '../constants'\nimport { Loading, Layout } from './'\nimport LandingPage from '../views/LandingPage'\n\nclass WaitWraper extends Component {\n    state = { checkAuthenticated: false }\n    static contextType = authContext\n\n    componentDidMount() {\n        if (this.context.authenticated) {\n            this.setState({ checkAuthenticated: true })\n        }\n        const localToken = localStorage.getItem(AUTH_TOKEN)\n        // If there's no token, then they can't have been logged in i.e. checkauthenticated complete\n        if (!this.context.authenticated && localToken) {\n            this.context.handleAuthentication(localToken, () => {\n                this.setState({ checkAuthenticated: true })\n            })\n        } else {\n            this.setState({ checkAuthenticated: true })\n        }\n    }\n\n    render() {\n        // Render the children with a function using state as the argument\n        return this.props.children(this.state.checkAuthenticated)\n    }\n}\n\nconst UnwrappedPrivateRoute = ({\n    loggedIn: LoggedIn,\n    loggedOut,\n    path,\n    landingPage,\n    ...rest\n}) => {\n    const context = useContext(authContext)\n    const authenticated = context.authenticated\n\n    if (!loggedOut) {\n        loggedOut = '/login'\n    }\n\n    console.log('Authenticated: ', authenticated)\n    return (\n        <WaitWraper>\n            {checkAuthenticated =>\n                checkAuthenticated === false ? (\n                    <Loading />\n                ) : (\n                    <Route\n                        {...rest}\n                        render={props => {\n                            if (authenticated) {\n                                return <LoggedIn {...props} {...rest} />\n                            } else if (!authenticated && landingPage) {\n                                return <LandingPage />\n                            } else {\n                                return <Redirect to={loggedOut} />\n                            }\n                        }}\n                    />\n                )\n            }\n        </WaitWraper>\n    )\n}\n\nexport const PrivateRoute = props => (\n    <Layout>\n        <UnwrappedPrivateRoute {...props} />\n    </Layout>\n)\n","import React, { useState, useContext } from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\n\nimport {\n    Button,\n    TextField,\n    FormHelperText,\n    Link,\n    Grid,\n    Typography,\n    Paper,\n    makeStyles\n} from '@material-ui/core'\n\nimport { useMutation } from '@apollo/react-hooks'\n\nimport authContext from '../authContext'\nimport { AUTH_TOKEN, INVALID_CRED_ERR_MSG } from '../constants.js'\nimport { Layout } from '../components'\n\nimport { LOGIN_MUTATION } from '../gqlQueriesMutations'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        margin: theme.spacing(1),\n        borderRadius: 10\n    },\n    paper: {\n        padding: theme.spacing(2),\n        backgroundColor: theme.palette.background.paper,\n        alignItems: 'center',\n        alignContent: 'stretch',\n        justify: 'center',\n        borderRadius: 10\n    },\n    form: {\n        display: 'flex',\n        flexWrap: 'wrap'\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2)\n    }\n}))\n\nfunction Login({ history }) {\n    const context = useContext(authContext)\n    const classes = useStyles()\n\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [invalidCred, setInvalidCred] = useState(false)\n    const [unknownError, setUnknownError] = useState(false)\n\n    const _confirm = async data => {\n        const { token } = data.tokenAuth\n        context.handleAuthentication(token)\n        localStorage.setItem(AUTH_TOKEN, token)\n        history.push(`/`)\n    }\n\n    const _handleError = async errors => {\n        console.log('_handleError run')\n        if (errors.graphQLErrors) {\n            const subMessage = errors.graphQLErrors[0].message.substring(0, 15)\n            if (INVALID_CRED_ERR_MSG.startsWith(subMessage)) {\n                setInvalidCred(true)\n                console.log('invalid credentials')\n            } else {\n                console.log('unexpect error(s):')\n                console.log(errors)\n                setUnknownError(true)\n            }\n        }\n    }\n\n    const [login] = useMutation(LOGIN_MUTATION, {\n        onCompleted: _confirm,\n        onError: _handleError\n    })\n\n    const submitForm = async event => {\n        login({ variables: { username: username, password: password } })\n        event.preventDefault()\n    }\n\n    return (\n        <Paper className={classes.paper} elevation={6}>\n            <form onSubmit={submitForm} className={classes.form}>\n                <Typography\n                    component='h1'\n                    variant='h5'\n                    className={classes.root}\n                >\n                    Log In\n                </Typography>\n                <TextField\n                    className={classes.root}\n                    variant='outlined'\n                    required\n                    fullWidth\n                    id='username'\n                    label='Username'\n                    autoFocus\n                    onChange={e => setUsername(e.target.value)}\n                    error={invalidCred}\n                />\n                <TextField\n                    className={classes.root}\n                    variant='outlined'\n                    required\n                    fullWidth\n                    label='Password'\n                    type='password'\n                    id='password'\n                    onChange={e => setPassword(e.target.value)}\n                    error={invalidCred}\n                    helperText={\n                        invalidCred ? 'Please enter valid credentials' : ''\n                    }\n                />\n\n                <Grid\n                    container\n                    justify='center'\n                    alignItems='center'\n                    spacing={3}\n                >\n                    <Grid item xs={6}>\n                        <Button\n                            className={classes.root}\n                            name='submit'\n                            label='Submit'\n                            type='submit'\n                            variant='contained'\n                            color='primary'\n                            fullWidth\n                        >\n                            Log In\n                        </Button>\n\n                        {unknownError && (\n                            <FormHelperText\n                                error={unknownError}\n                                className={classes.root}\n                            >\n                                Unknown Error Occurred\n                            </FormHelperText>\n                        )}\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <Link\n                            component={RouterLink}\n                            to='/signup'\n                            className={classes.root}\n                            color='secondary'\n                        >\n                            Need an account? Sign up\n                        </Link>\n                    </Grid>\n                </Grid>\n            </form>\n        </Paper>\n    )\n}\n\nconst CenterWrapping = props => (\n    <Grid\n        container\n        spacing={0}\n        direction='column'\n        alignItems='center'\n        justify='center'\n        style={{ minHeight: '80vh' }}\n    >\n        <Grid item xs={10} sm={8} md={6} lg={4}>\n            <Login {...props} />\n        </Grid>\n    </Grid>\n)\n\nexport default props => (\n    <Layout>\n        <CenterWrapping {...props} />\n    </Layout>\n)\n","var passwordValidator = require('password-validator');\n\n// Create a schema\nexport var PASSWORD_SCHEMA = new passwordValidator();\n\nconst min_len = 6\nconst max_len = 100\n\n// NOTE: for every rule added to the Schema, a corresponding parsing conditional should be added below\nPASSWORD_SCHEMA\n    .is().min(min_len)                                    // Minimum length 8\n    .is().max(max_len)                                  // Maximum length 100\n    .has().uppercase()                              // Must have uppercase letters\n    .has().digits()                                 // Must have digits\n    .is().not().oneOf(['password', 'Password123']); // Blacklist these values\n    // .has().lowercase()                              // Must have lowercase letters\n    // .has().not().spaces()                           // Should not have spaces\n\nexport const parseFailedRules = (rules) => {\n    var output = ''\n    for (var i=0; i < rules.length; i++){\n        if (i >=1) output += \" | \"\n        \n        var rule = rules[i]\n        if (rule === 'min'){\n            output += `Password must be at least ${min_len} characters long`\n        }\n        if (rule === 'max') {\n            output += `Password must be at most ${max_len} characters long`\n        }\n        if (rule === 'uppercase') {\n            output += `Password must have an uppercase letter`\n        }\n        if (rule === 'digits') {\n            output += `Password must have a digit`\n        }\n        if (rule === 'oneOf') {\n            output += `Password is too common`\n        }\n    }\n    return output\n}","import React, { useState } from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\n\nimport {\n    Button,\n    TextField,\n    FormHelperText,\n    Link,\n    Grid,\n    Typography,\n    Paper,\n    makeStyles\n} from '@material-ui/core'\n\nimport { useMutation } from '@apollo/react-hooks'\n\nimport { Layout } from '../components'\nimport { USERNAME_TAKEN_ERR_MSG } from '../constants.js'\nimport {\n    PASSWORD_SCHEMA,\n    parseFailedRules\n} from '../components/passwordValidator.js'\n\nimport { SIGNUP_MUTATION } from '../gqlQueriesMutations'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        margin: theme.spacing(1),\n        borderRadius: 10\n    },\n    paper: {\n        padding: theme.spacing(2),\n        backgroundColor: theme.palette.background.paper,\n        alignItems: 'center',\n        alignContent: 'stretch',\n        justify: 'center',\n        borderRadius: 10\n    },\n    form: {\n        display: 'flex',\n        flexWrap: 'wrap'\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2)\n    }\n}))\n\nfunction Signup(props) {\n    const [username, setUsername] = useState('')\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [confirmPassword, setConfirmPassword] = useState('')\n    const [usernameIsTaken, setUsernameIsTaken] = useState(false)\n    const [emailIsTaken, setEmailIsTaken] = useState(false)\n    const [validPassword, setValidPassword] = useState(false)\n    const [failedPassRules, setFailedPassRules] = useState([])\n    const [unknownError, setUnknownError] = useState(false)\n\n    var emailValidator = require('email-validator')\n\n    const classes = useStyles()\n    const _confirm = async data => {\n        // handle signup errors and potentially login\n        props.history.push(`/login`)\n    }\n\n    const _handleError = async errors => {\n        console.log('_handleError run')\n        if (errors.graphQLErrors) {\n            const subMessage = errors.graphQLErrors[0].message.substring(0, 10)\n            if (USERNAME_TAKEN_ERR_MSG.startsWith(subMessage)) {\n                setUsernameIsTaken(true)\n            } else {\n                console.log('unexpect error(s):')\n                console.log(errors)\n                setUnknownError(true)\n            }\n        }\n    }\n\n    const [signup] = useMutation(SIGNUP_MUTATION, {\n        onCompleted: _confirm,\n        onError: _handleError\n    })\n\n    const submitForm = async event => {\n        event.preventDefault()\n        console.log('form submitted')\n        signup({\n            variables: { username: username, email: email, password: password }\n        })\n    }\n\n    const changePassword = async pass => {\n        setPassword(pass)\n\n        // password validation\n        var failedRules = PASSWORD_SCHEMA.validate(pass, { list: true })\n        setFailedPassRules(failedRules)\n        if (failedRules.length !== 0) {\n            setValidPassword(false)\n        } else {\n            setValidPassword(true)\n        }\n    }\n\n    const errorPassword = !!password && !validPassword\n    const errorConfirmPassword =\n        !!confirmPassword && !(confirmPassword === password)\n\n    const disableSubmit =\n        (!!password && (!(confirmPassword === password) || !validPassword)) ||\n        (!!email && !emailValidator.validate(email))\n\n    const invalidEmail = !!email && !emailValidator.validate(email)\n    const emailError = emailIsTaken || invalidEmail\n    var emailErrMsg = ''\n    if (invalidEmail) {\n        emailErrMsg = 'Email is invalid'\n    } else if (emailIsTaken) {\n        emailErrMsg = 'Email is taken'\n    }\n\n    return (\n        <Paper className={classes.paper} elevation={6}>\n            <form className={classes.form} onSubmit={submitForm}>\n                <Typography\n                    component='h1'\n                    variant='h5'\n                    className={classes.root}\n                >\n                    Sign up\n                </Typography>\n\n                <TextField\n                    className={classes.root}\n                    onChange={e => setUsername(e.target.value)}\n                    variant='outlined'\n                    required\n                    fullWidth\n                    autoComplete='username'\n                    label='Username'\n                    type='username'\n                    autoFocus\n                    error={usernameIsTaken}\n                    helperText={usernameIsTaken ? 'Username is taken' : ''}\n                />\n\n                <TextField\n                    className={classes.root}\n                    variant='outlined'\n                    required\n                    fullWidth\n                    autoComplete='email'\n                    label='Email'\n                    type='email'\n                    onChange={e => setEmail(e.target.value)}\n                    error={emailError}\n                    helperText={emailErrMsg}\n                />\n\n                <TextField\n                    className={classes.root}\n                    variant='outlined'\n                    required\n                    fullWidth\n                    autoComplete='password'\n                    label='Password'\n                    type='password'\n                    onChange={e => changePassword(e.target.value)}\n                    error={errorPassword}\n                    helperText={\n                        errorPassword ? parseFailedRules(failedPassRules) : ''\n                    }\n                />\n\n                <TextField\n                    className={classes.root}\n                    variant='outlined'\n                    required\n                    fullWidth\n                    label='Confirm Password'\n                    type='password'\n                    onChange={e => setConfirmPassword(e.target.value)}\n                    error={errorConfirmPassword}\n                    helperText={\n                        errorConfirmPassword ? 'Passwords must match' : ''\n                    }\n                />\n\n                <Grid\n                    container\n                    justify='center'\n                    alignItems='center'\n                    spacing={3}\n                >\n                    <Grid item xs={6}>\n                        <Button\n                            className={classes.root}\n                            fullWidth\n                            label='Submit'\n                            type='submit'\n                            variant='contained'\n                            color='primary'\n                            disabled={disableSubmit}\n                        >\n                            Sign Up\n                        </Button>\n                        {unknownError && (\n                            <FormHelperText\n                                error={unknownError}\n                            ></FormHelperText>\n                        )}\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <Link\n                            className={classes.root}\n                            component={RouterLink}\n                            to='/login'\n                            color='secondary'\n                        >\n                            Already have an account? Log in\n                        </Link>\n                    </Grid>\n                </Grid>\n            </form>\n        </Paper>\n    )\n}\n\nconst CenterWrapping = props => (\n    <Grid\n        container\n        spacing={0}\n        direction='column'\n        alignItems='center'\n        justify='center'\n        style={{ minHeight: '80vh' }}\n    >\n        <Grid item xs={10} sm={8} md={6} lg={4}>\n            <Signup {...props} />\n        </Grid>\n    </Grid>\n)\n\nexport default props => (\n    <Layout>\n        <CenterWrapping {...props} />\n    </Layout>\n)\n","import React, { useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport authContext from '../authContext';\n\nfunction Logout() {\n    const context = useContext(authContext);\n    context.logout();\n\n    return (\n        <Redirect to='/login' />\n    );\n}\n\nexport default Logout;\n","import React, { useContext, useState, Fragment } from 'react'\nimport {\n    Button,\n    CssBaseline,\n    TextField,\n    Typography,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogContentText,\n    DialogActions,\n    Grid,\n    Paper,\n    FormControl\n} from '@material-ui/core'\n\nimport { useMutation } from '@apollo/react-hooks'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\n\nimport { HelpDialog } from '../components'\nimport authContext from '../authContext'\nimport { artefactFamilyFormUseStyles } from '../components'\nimport { CREATE_FAMILY_MUTATION } from '../gqlQueriesMutations'\n\nconst HelpContent = () => (\n    <Fragment>\n        <DialogTitle id='help-title'>Help</DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                Create a family by filling out the form and clicking \"create\"\n            </DialogContentText>\n            <DialogContentText>\n                On creation you will receive a join code which will allow others\n                to join your new family\n            </DialogContentText>\n        </DialogContent>\n    </Fragment>\n)\n\nfunction CreateFamilyView(props) {\n    const classes = artefactFamilyFormUseStyles()\n\n    const context = useContext(authContext)\n    const username = context.user.username\n\n    const [familyName, setFamilyName] = useState('')\n    const [about, setAbout] = useState('')\n    const [joinCode, setJoinCode] = useState('')\n    const [open, setOpen] = useState(false)\n\n    const _completed = async data => {\n        const { joinCode } = data.familyCreate.family\n        setJoinCode(joinCode)\n        setOpen(true)\n    }\n\n    // back to const once done\n    const [createFamily, { data }] = useMutation(CREATE_FAMILY_MUTATION, {\n        onCompleted: _completed\n    })\n\n    // Call the mutation on form submission\n    const submitForm = async event => {\n        event.preventDefault()\n        createFamily({\n            variables: {\n                familyName: familyName,\n                about: about\n            }\n        })\n    }\n\n    const handleClose = event => {\n        event.preventDefault()\n        setOpen(false)\n        props.history.push(`/`)\n    }\n\n    return (\n        <form className={classes.form} onSubmit={submitForm}>\n            <Grid container spacing={1} className={classes.outerContainer}>\n                <Grid item xs={12} container justify='center'>\n                    <Typography variant='h4'>Create Family</Typography>\n\n                    <Typography variant='subtitle1'>\n                        Families are how you manage your artefacts. We recognise\n                        there is often complex overlap between families. That's\n                        why you can create and be a part of several families, so\n                        you can separate which of the artefacts you manage\n                        belong to which family.\n                    </Typography>\n                </Grid>\n\n                <Grid item xs={12}>\n                    <Paper className={classes.paperWrapper} elevation={3}>\n                        <FormControl className={classes.formControl} fullWidth>\n                            <TextField\n                                variant='outlined'\n                                required\n                                fullWidth\n                                id='family-name'\n                                label='Family name'\n                                autoFocus\n                                onChange={e => setFamilyName(e.target.value)}\n                            />\n                        </FormControl>\n                    </Paper>\n                </Grid>\n                <Grid item xs={12}>\n                    <Paper className={classes.paperWrapper} elevation={3}>\n                        <FormControl className={classes.formControl} fullWidth>\n                            <TextField\n                                variant='outlined'\n                                multiline\n                                rows={6}\n                                fullWidth\n                                id='about'\n                                label='Tell people about your family'\n                                onChange={e => setAbout(e.target.value)}\n                            />\n                        </FormControl>\n                    </Paper>\n                </Grid>\n\n                <Grid item xs={12}>\n                    <Paper className={classes.paperWrapper} elevation={3}>\n                        <FormControl className={classes.formControl} fullWidth>\n                            <TextField\n                                variant='outlined'\n                                disabled\n                                defaultValue={username}\n                                fullWidth\n                                id='family-admin'\n                                label='Family Admin'\n                                onChange={e =>\n                                    console.error(\n                                        'The admin value was changed, how is this even possible?'\n                                    )\n                                }\n                            />\n                        </FormControl>\n                    </Paper>\n                </Grid>\n\n                <Grid item xs={12}>\n                    <Button\n                        name='create'\n                        label='Create'\n                        type='submit'\n                        fullWidth\n                        variant='contained'\n                        color='secondary'\n                    >\n                        Create\n                    </Button>\n                </Grid>\n            </Grid>\n\n            <HelpDialog\n                open={props.helpOpen}\n                setOpen={props.setHelpOpen}\n                content={HelpContent}\n            />\n\n            {data && (\n                <Dialog open={open} onClose={handleClose}>\n                    <DialogTitle onClose={handleClose}>\n                        Begin adding members to '{familyName}'!\n                    </DialogTitle>\n                    <DialogContent>\n                        <Typography align='left'>\n                            You can now add artefacts to this family. To view\n                            them simply select '{familyName}' from the Select\n                            Family dropdown on your home dashboard.\n                            <br />\n                            Begin getting members to join your family! Simply\n                            share the code below to your family members, get\n                            them to sign up and then they can join!\n                            <br />\n                            <br />\n                            {joinCode} &nbsp;\n                            <CopyToClipboard text={joinCode}>\n                                <Button variant='outlined'>Copy</Button>\n                            </CopyToClipboard>\n                        </Typography>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color='primary' autoFocus>\n                            Continue\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            )}\n        </form>\n    )\n}\n\nexport default props => (\n    <Fragment>\n        <CssBaseline />\n        <Grid\n            container\n            spacing={0}\n            direction='column'\n            alignItems='center'\n            justify='center'\n            style={{ minHeight: '80vh' }}\n        >\n            <Grid item xs={11} md={6}>\n                <CreateFamilyView {...props} />\n            </Grid>\n        </Grid>\n    </Fragment>\n)\n","import React, { Fragment } from 'react'\n\nimport { Button, FormHelperText } from '@material-ui/core'\n\nexport default ({ noErrors, ...rest }) => (\n    <Fragment>\n        <Button\n            {...rest}\n            color='secondary'\n            variant='contained'\n            type='submit'\n        >\n            Save\n        </Button>\n        {!noErrors && (\n            <FormHelperText error={!noErrors}>\n                Unknown Error Occurred\n            </FormHelperText>\n        )}\n    </Fragment>\n)\n","import React, { Fragment } from 'react'\nimport { Grid, Typography, Button } from '@material-ui/core'\nimport CreateButton from './CreateButton'\n\nexport default ({\n    states,\n    setters,\n    classes,\n    isAdmin,\n    openDelete,\n    noErrors\n}) => {\n    const { create, edit, view } = states.mode\n    const showEditButton = view && isAdmin\n    const showDeleteButton = edit && isAdmin\n\n    return (\n        <Fragment>\n            {(showEditButton || showDeleteButton || create) && (\n                <div\n                    className={classes.editLinkButton}\n                    style={{\n                        marginRight: 'auto',\n                        // width: '65px',\n                        height: '20px',\n                        visibility: 'hidden'\n                    }}\n                />\n            )}\n            <Typography variant='h4' align='center'>\n                {create && 'Create'} {edit && 'Edit'} {view && 'View'} Artefact\n            </Typography>\n            {showEditButton && (\n                <Button\n                    color='secondary'\n                    variant='contained'\n                    onClick={e => setters.setMode({ edit: true })}\n                    className={classes.editLinkButton}\n                    style={{ marginLeft: 'auto' }}\n                >\n                    Edit\n                </Button>\n            )}\n            {showDeleteButton && (\n                <Button\n                    color='default'\n                    variant='contained'\n                    onClick={openDelete}\n                    className={classes.editLinkButton}\n                    style={{ marginLeft: 'auto' }}\n                >\n                    Delete\n                </Button>\n            )}\n\n            {create && (\n                <CreateButton\n                    noErrors={noErrors}\n                    className={classes.editLinkButton}\n                    style={{ marginLeft: 'auto' }}\n                />\n            )}\n            {create && (\n                <Grid item xs={12}>\n                    <Typography variant='subtitle1' align='center'>\n                        Artefacts are belongings of the family, enter as much or\n                        as little detail as you like\n                    </Typography>\n                </Grid>\n            )}\n        </Fragment>\n    )\n}\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\n\nexport default ({ states, setters, disabled, name }) => {\n    var { view } = states.mode\n    var { state } = states\n    var { handleSetField } = setters\n    return (\n        <TextField\n            // style={{ height: '100%' }}\n            // InputProps={{ style: {height: '100%'} }}\n            id='artefact-name'\n            label='Artefact name'\n            variant='outlined'\n            autoFocus={!view}\n            required\n            fullWidth\n            value={state.name || ''}\n            inputProps={{ readOnly: view }}\n            onChange={e => handleSetField(name, e.target.value)}\n            disabled={disabled}\n        />\n    )\n}\n","import React from 'react'\nimport { TextField, MenuItem } from '@material-ui/core'\n\nexport default ({ states, setters, artefactStates, disabled, name }) => {\n    var { view } = states.mode\n    var { state } = states\n    var { handleSetField } = setters\n    return (\n        <TextField\n            id='state'\n            label='Artefact State'\n            variant='outlined'\n            required\n            fullWidth\n            value={state.state || ''}\n            inputProps={{\n                readOnly: view\n            }}\n            onChange={e => handleSetField(name, e.target.value)}\n            select\n            disabled={disabled}\n        >\n            {Object.keys(artefactStates).map(value => {\n                return (\n                    <MenuItem value={artefactStates[value]} key={value}>\n                        {value}\n                    </MenuItem>\n                )\n            })}\n        </TextField>\n    )\n}\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\n\nexport default ({ states, setters, disabled, name, numFams }) => {\n    var { view } = states.mode\n    var { state } = states\n    var { handleSetField } = setters\n\n    return (\n        <TextField\n            id='description'\n            label='Description'\n            variant='outlined'\n            required\n            fullWidth\n            multiline\n            value={state.description || ''}\n            inputProps={{\n                readOnly: view\n            }}\n            onChange={e => handleSetField(name, e.target.value)}\n            disabled={disabled}\n        />\n    )\n}\n","import React from 'react'\nimport { TextField } from '@material-ui/core'\n\nexport default ({ states, username }) => {\n    var { view } = states.mode\n    var { state } = states\n    return (\n        <TextField\n            id='artefact-admin'\n            label='Artefact Admin'\n            variant='outlined'\n            required\n            fullWidth\n            value={\n                state.admin && Object.keys(state.admin).length !== 0\n                    ? state.admin.username\n                    : username\n            }\n            inputProps={{\n                readOnly: true\n            }}\n            onChange={e => console.log('admin field was changed')}\n        />\n    )\n}\n","import React from 'react'\n\nimport 'date-fns'\nimport { KeyboardDatePicker } from '@material-ui/pickers'\n\nexport default ({ states, setters, disabled, name }) => {\n    var { view } = states.mode\n    var { state } = states\n    var { handleSetField } = setters\n    return (\n        <KeyboardDatePicker\n            disabled={view || disabled}\n            clearable\n            minDate={'1500-01-01'}\n            // variant='inline'\n            inputVariant='outlined'\n            format='dd/MM/yyyy'\n            openTo='year'\n            label='Date (dd/mm/yyyy)'\n            value={state.date}\n            onChange={date => handleSetField(name, date)}\n            KeyboardButtonProps={{\n                'aria-label': 'change date'\n            }}\n        />\n    )\n}\n","import React, { Fragment } from 'react'\nimport {\n    Switch,\n    FormHelperText,\n    Typography,\n    FormControlLabel,\n    Button\n} from '@material-ui/core'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\n\nexport default ({ states, setters, disabled, name, classes }) => {\n    var { create, edit, view } = states.mode\n    var { state } = states\n    var { handleSetField } = setters\n\n    if (create || edit) {\n        return (\n            <Fragment>\n                <Typography variant='h6' className={classes.fieldTitle}>\n                    Privacy\n                </Typography>\n                <FormControlLabel\n                    control={\n                        <Switch\n                            checked={state.isPublic || false}\n                            onChange={e =>\n                                handleSetField(name, e.target.checked)\n                            }\n                            // edge='end'\n                            disabled={disabled}\n                        />\n                    }\n                    style={{ marginLeft: 3 }}\n                    label='Public'\n                />\n                <FormHelperText className={classes.fieldTitle}>\n                    {state.isPublic\n                        ? 'Viewable by anyone'\n                        : 'Viewable by family members only'}\n                </FormHelperText>\n            </Fragment>\n        )\n    } else if (view && state.isPublic) {\n        return (\n            <Fragment>\n                <Typography variant='h6' className={classes.fieldTitle}>\n                    This artefact is public, accessible by link\n                </Typography>\n                <CopyToClipboard text={window.location.href}>\n                    <Button variant='outlined'>Copy Link</Button>\n                </CopyToClipboard>\n            </Fragment>\n        )\n    } else {\n        return null\n    }\n}\n","import React, { Fragment } from 'react'\nimport {\n    List,\n    ListItem,\n    ListItemIcon,\n    ListItemText,\n    Checkbox,\n    Typography\n} from '@material-ui/core'\n\nexport default ({ states, setters, families, disabled, name, classes }) => {\n    var { view } = states.mode\n    var { state } = states\n    var { handleSetField } = setters\n\n    if (\n        view &&\n        state.belongsToFamiliesBools &&\n        Object.values(state.belongsToFamiliesBools).filter(value => value)\n            .length === 0\n    ) {\n        return (\n            <Typography variant='h6' className={classes.fieldTitle}>\n                This artefact doesn't belong to any of your families\n            </Typography>\n        )\n    }\n\n    return (\n        <Fragment>\n            <Typography variant='h6' className={classes.fieldTitle}>\n                {!view\n                    ? 'Families the artefact belongs to'\n                    : 'Belongs to your families'}\n            </Typography>\n            <List disablePadding>\n                {families.map(family => {\n                    if (\n                        state.belongsToFamiliesBools &&\n                        (!view || state.belongsToFamiliesBools[family.id])\n                    ) {\n                        return (\n                            <ListItem key={family.id} dense disabled={disabled}>\n                                {!view && (\n                                    <ListItemIcon>\n                                        <Checkbox\n                                            edge='start'\n                                            checked={\n                                                state.belongsToFamiliesBools[\n                                                    family.id\n                                                ] || false\n                                            }\n                                            onClick={e =>\n                                                handleSetField(name, {\n                                                    ...state.belongsToFamiliesBools,\n                                                    [family.id]:\n                                                        e.target.checked\n                                                })\n                                            }\n                                            tabIndex={-1}\n                                        />\n                                    </ListItemIcon>\n                                )}\n                                <ListItemText primary={family.familyName} />\n                            </ListItem>\n                        )\n                    }\n                    return null\n                })}\n            </List>\n        </Fragment>\n    )\n}\n","import React, { Fragment } from 'react'\nimport { DropzoneArea } from 'material-ui-dropzone'\nimport { Typography, CircularProgress } from '@material-ui/core'\nimport Image from 'material-ui-image'\nimport { useTheme } from '@material-ui/styles'\n\nimport { config } from '../../../constants'\n\nexport default ({ classes, states, setters, name }) => {\n    const theme = useTheme()\n    var { edit, create, view } = states.mode\n    var { state } = states\n    var { handleSetField } = setters\n    return (\n        <Fragment>\n            <Typography variant='h6' className={classes.fieldTitle}>\n                Images\n            </Typography>\n            {edit && (\n                <Typography variant='caption' className={classes.fieldTitle}>\n                    Editing coming soon...\n                </Typography>\n            )}\n\n            {create && (\n                <DropzoneArea\n                    initialFiles={state.files || []}\n                    acceptedFiles={['image/*']}\n                    dropzoneText=''\n                    filesLimit={1}\n                    onChange={files => handleSetField(name, files)}\n                    dropzoneClass={classes.dropzone}\n                    classes={{\n                        dropzoneTextStyle: classes.fieldTitle,\n                        dropzoneParagraph: classes.fieldTitle\n                    }}\n                />\n            )}\n            {(view || edit) && state.upload !== 'False' && (\n                <Image\n                    src={config.mediaRoot + state.upload}\n                    loading={<CircularProgress />}\n                    color={theme.palette.background.paper}\n                    imageStyle={{ borderRadius: 10 }}\n                />\n            )}\n        </Fragment>\n    )\n}\n","import React, { Fragment } from 'react'\nimport {\n    TextField,\n    Grid,\n    IconButton,\n    Popover,\n    List,\n    ListItem,\n    ListItemText,\n} from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { Map } from '../../../components'\n\nexport default ({\n    states,\n    setters,\n    classes,\n    name,\n    handleGeocodeQuery,\n    disabled\n}) => {\n    var { view } = states.mode\n    var {\n        handleSetField,\n        setAddressIsSearchResult,\n        setLocationState,\n        handleSetLocationResult\n    } = setters\n    var { locationState, state } = states\n\n    const theme = useTheme()\n    var mapStyle\n    if (theme && theme.palette.type === 'dark') {\n        mapStyle = 'mapbox://styles/mapbox/dark-v10?optimize=true'\n    } else {\n        mapStyle = 'mapbox://styles/mapbox/streets-v9?optimize=true'\n    }\n\n    return (\n        <Fragment>\n            <TextField\n                id='address'\n                label='Address'\n                variant='outlined'\n                fullWidth\n                disabled={disabled}\n                value={state.address || ''}\n                inputProps={{\n                    readOnly: view\n                }}\n                onChange={e => {\n                    handleSetField(name, e.target.value)\n                    if (e.target.value) {\n                        setAddressIsSearchResult(false)\n                    } else {\n                        // allow blank address\n                        setAddressIsSearchResult(true)\n                    }\n                }}\n                error={!!locationState.error}\n                InputProps={{\n                    endAdornment: !view && (\n                        <IconButton\n                            className={classes.iconButton}\n                            aria-label='search'\n                            id='search'\n                            onClick={e =>\n                                handleGeocodeQuery({\n                                    query: state.address,\n                                    initial: false\n                                })\n                            }\n                        >\n                            <SearchIcon />\n                        </IconButton>\n                    ),\n                    style: { marginBottom: 3 }\n                }}\n                onKeyDown={e => {\n                    if (e.keyCode === 13 && !view) {\n                        e.preventDefault()\n                        document.getElementById('search').click()\n                    }\n                }}\n                helperText={locationState.error}\n            />\n            <Popover\n                id={locationState.queryResults.length ? 'results' : undefined}\n                open={!!locationState.queryResults.length}\n                anchorEl={document.getElementById('address')}\n                onClose={e =>\n                    setLocationState({\n                        ...locationState,\n                        queryResults: []\n                    })\n                }\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left'\n                }}\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'left'\n                }}\n            >\n                <List component='div' disablePadding>\n                    {locationState.queryResults.map(result => (\n                        <ListItem\n                            key={result.placeName}\n                            button\n                            className={classes.nested}\n                            onClick={e => handleSetLocationResult(result)}\n                        >\n                            <ListItemText primary={result.placeName} />\n                        </ListItem>\n                    ))}\n                </List>\n            </Popover>\n\n            <Grid container style={{ marginTop: 1 }}>\n                <Map\n                    interactive={false}\n                    className={classes.map}\n                    mapState={locationState.mapState}\n                    mapStyle={mapStyle}\n                    containerStyle={{\n                        height: '60vh',\n                        width: '100vw',\n                        borderRadius: 20,\n                        marginTop: 5\n                    }}\n                    artefacts={[\n                        {\n                            center: locationState.mapState.center,\n                            id: -1\n                        }\n                    ]}\n                />\n            </Grid>\n        </Fragment>\n    )\n}\n","import React from 'react'\nimport { Button, Grid, FormHelperText } from '@material-ui/core'\n\nexport default ({ save, cancel, updateErrors, classes }) => {\n    function MyButton(props) {\n        return (\n            <Button\n                variant='contained'\n                color={props.color}\n                className={classes.button}\n                onClick={props.onClick}\n                fullWidth\n                padding={1}\n            >\n                {props.name}\n            </Button>\n        )\n    }\n\n    return (\n        <Grid\n            container\n            justify='space-evenly'\n            alignItems='center'\n            spacing={1}\n            style={{ marginTop: 1 }}\n        >\n            <Grid item xs={6}>\n                <MyButton onClick={save} name='Save' color='primary' />\n            </Grid>\n            <Grid item xs={6}>\n                <MyButton\n                    onClick={cancel}\n                    name='Cancel'\n                    color='secondary'\n                />\n            </Grid>\n\n            {updateErrors && (\n                <Grid item xs={12}>\n                    <FormHelperText error>\n                        Error Updating Artefact\n                    </FormHelperText>\n                </Grid>\n            )}\n        </Grid>\n    )\n}\n","import React from 'react'\nimport { Grid, FormControl, Paper } from '@material-ui/core'\nimport EditButtons from './EditButtons'\n\nexport default ({\n    child: Child,\n    childProps,\n    name,\n    classes,\n    editButtonProps,\n    ...rest\n}) => {\n    var { beingEdited, states } = childProps\n    var { edit } = states.mode\n    var thisBeingEdited = beingEdited === name\n    var someBeingEdited = edit && !!beingEdited\n    return (\n        <Paper className={classes.paperWrapper} elevation={3}>\n            <FormControl className={classes.formControl} fullWidth>\n                <Child\n                    {...childProps}\n                    disabled={someBeingEdited && !thisBeingEdited}\n                    name={name}\n                    classes={classes}\n                    {...rest}\n                />\n\n                {thisBeingEdited && <EditButtons {...editButtonProps} />}\n            </FormControl>\n        </Paper>\n    )\n}\n","import React from 'react'\nimport {\n    Button,\n    Snackbar,\n    IconButton,\n    ClickAwayListener\n} from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\n\nexport default ({ open, setOpen, viewArtefact, classes, id }) => {\n    return (\n        <ClickAwayListener onClickAway={() => setOpen(false)}>\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left'\n                }}\n                open={open}\n                autoHideDuration={2000}\n                onClose={() => setOpen(false)}\n                ContentProps={{\n                    'aria-describedby': 'message-id'\n                }}\n                message={<span id='message-id'>Edit successful</span>}\n                action={[\n                    <Button\n                        key='view'\n                        color='secondary'\n                        size='small'\n                        onClick={e => viewArtefact(id)}\n                    >\n                        VIEW\n                    </Button>,\n                    <IconButton\n                        key='close'\n                        aria-label='close'\n                        color='inherit'\n                        onClick={() => setOpen(false)}\n                        className={classes.close}\n                    >\n                        <CloseIcon />\n                    </IconButton>\n                ]}\n            />\n        </ClickAwayListener>\n    )\n}\n","import React from 'react'\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogContentText,\n    DialogActions,\n    Button\n} from '@material-ui/core'\n\nexport default ({ open, setOpen, deleteArtefact, artefact }) => {\n    return (\n        <Dialog\n            fullWidth\n            maxWidth='sm'\n            open={open}\n            onClose={() => setOpen(false)}\n            aria-labelledby='help-title'\n        >\n            <DialogTitle>Delete Artefact</DialogTitle>\n            <DialogContent>\n                <DialogContentText>This cannot be undone</DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => setOpen(false)} color='secondary'>\n                    Cancel\n                </Button>\n                <Button\n                    onClick={() =>\n                        deleteArtefact({ variables: { id: artefact.id } })\n                    }\n                    color='primary'\n                >\n                    Delete\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n","import React, { Fragment } from 'react'\nimport {\n    DialogContent,\n    DialogContentText,\n    DialogTitle\n} from '@material-ui/core'\n\nexport default ({ mode }) => {\n    const { edit, create, view } = mode\n    return (\n        <Fragment>\n            <DialogTitle id='help-title'>Help</DialogTitle>\n            {create && (\n                <DialogContent>\n                    <DialogContentText>\n                        Create an artefact by filling out the form and clicking\n                        \"save\"\n                    </DialogContentText>\n                    <DialogContentText>\n                        The artefact will only be viewable by members of the\n                        selected families, unless the artefact is set to\n                        \"public\"\n                    </DialogContentText>\n                    <DialogContentText>\n                        Only you will be able to edit the artefact after\n                        creation\n                    </DialogContentText>\n                </DialogContent>\n            )}\n\n            {edit && (\n                <DialogContent>\n                    <DialogContentText>\n                        Edit a field by clicking on it, save and cancel buttons\n                        will appear\n                    </DialogContentText>\n                    <DialogContentText>\n                        After clicking \"save\" the change is final\n                    </DialogContentText>\n                </DialogContent>\n            )}\n\n            {view && (\n                <DialogContent>\n                    <DialogContentText>\n                        Here you can view the details of an artefact\n                    </DialogContentText>\n                    <DialogContentText>\n                        If you are the admin of the artefact, a button labelled\n                        \"edit\" in the top right corner will enable editing mode\n                    </DialogContentText>\n                </DialogContent>\n            )}\n        </Fragment>\n    )\n}\n","import React, { useContext, useState, Fragment } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { useMutation } from '@apollo/react-hooks'\n\nimport { CssBaseline, Grid, CircularProgress } from '@material-ui/core'\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers'\n\nimport DateFnsUtils from '@date-io/date-fns'\n\nimport { geocodeQuery, artefactFamilyFormUseStyles } from '../../components'\n\nimport {\n    Head,\n    Name,\n    State,\n    Description,\n    Admin,\n    Date,\n    Privacy,\n    Families,\n    Images,\n    FieldWrapper,\n    Address,\n    SuccessSnackbar,\n    DeleteDialog,\n    CreateButton,\n    HelpContent\n} from './components'\nimport authContext from '../../authContext'\n\nimport { HelpDialog } from '../../components'\n\nimport {\n    CREATE_ARTEFACT_MUTATION_STR,\n    UPDATE_ARTEFACT_MUTATION,\n    DELETE_ARTEFACT_MUTATION\n} from '../../gqlQueriesMutations'\n\nimport { AUTH_TOKEN, config } from '../../constants'\nimport axios from 'axios'\n\nfunction ArtefactView(props) {\n    // get the mode\n    const [mode, setMode] = useState({\n        create: props.create,\n        edit: props.edit,\n        view: props.view\n    })\n\n    // get families, states, and artefact data\n    var { statesLoading, familiesLoading, artefactLoading } = props\n    var { artefactStates, families } = props\n\n    // if viewing an existing artefact get the details (potentially unloaded)\n    const context = useContext(authContext)\n    const username = context.user.username\n    console.log(\"Username in view artefact: \" + username)\n    console.log(\"Authenticated in view artefact: \" + username)\n    let creationErrors\n\n    if (!mode.create) {\n        var artefact = !artefactLoading ? props.artefactData.artefact : {}\n        var isAdmin = !artefactLoading\n            ? artefact.admin.username === username\n            : false\n    }\n\n    // only allow admins to see the edit page\n    if (!isAdmin && mode.edit) {\n        setMode({ view: true })\n    }\n\n    const classes = artefactFamilyFormUseStyles()\n\n    // state variables for use in the \"edit\" mode:\n    // the name of the field being edited, for use in the \"edit\" mode\n    const [beingEdited, setBeingEdited] = useState('')\n    // the value of the field being edited before it was changed\n    const [prevValue, setPrevValue] = useState({})\n    // a message indicating successful edit\n    const [snackbarOpen, setSnackbarOpen] = useState(false)\n    const [deleteOpen, setDeleteOpen] = useState(false)\n\n    // state variables for the map\n    const [locationState, setLocationState] = useState({\n        mapState: {},\n        prevMapState: {},\n        error: '',\n        queryResults: []\n    })\n    // the address field of the main state object must be a query result on submit\n    const [addressIsSearchResult, setAddressIsSearchResult] = useState(true)\n\n    // makes a geocode query and sets the map's state accordingly\n    // <inital> intended for use on loading in an artefact in edit or view mode\n    // if <initial> is true then it will set the map to the first\n    // result of the query rather than presenting query results\n    const handleGeocodeQuery = ({ query, initial }) => {\n        if (query) {\n            console.log('Query run with argument: ', query)\n            return geocodeQuery(query).then(response => {\n                var newState = {}\n                if (response.noErrors) {\n                    newState.error = 'No results'\n                } else if (response.error) {\n                    newState.error =\n                        'Unknown error occurred, check console for details'\n                    console.log(response.error)\n                }\n\n                if (initial) {\n                    newState.mapState = response.results[0].mapState\n                    setAddressIsSearchResult(true)\n                } else {\n                    newState.queryResults = response.results\n                }\n                setLocationState({\n                    ...locationState,\n                    ...newState\n                })\n            })\n        }\n    }\n\n    // state object for the input fields, GQL mutation variables taken from this\n    const [state, setState] = useState({})\n    // if in edit or view mode load in the data for the artefact into the state\n    // only if the artefact has loaded and this hasn't already run\n    if (\n        (mode.edit || mode.view) &&\n        !artefactLoading &&\n        Object.keys(state).length === 0 &&\n        families\n    ) {\n        let belong = {}\n        families.map(val => (belong[val.id] = false))\n        artefact.belongsToFamilies.map(val => (belong[val.id] = true))\n        console.log(\"Artefact being printed\")\n        console.log(artefact)\n\n        setState({\n            ...artefact,\n            belongsToFamiliesBools: belong\n        })\n        handleGeocodeQuery({ query: artefact.address, initial: true })\n    }\n\n    // if in create mode, initialise the booleans for the family checkboxes to false\n    if (mode.create && families && !state.belongsToFamiliesBools) {\n        let belong = {}\n        families.map(val => (belong[val.id] = false))\n\n        setState({ belongsToFamiliesBools: belong, date: null, state: 'OKY' })\n    }\n\n    // handler for setting the state object\n    const handleSetField = (fieldName, value) => {\n        if (mode.edit && beingEdited !== fieldName) {\n            setBeingEdited(fieldName)\n            setPrevValue(state[fieldName])\n        }\n        setState({\n            ...state,\n            [fieldName]: value\n        })\n    }\n\n    // handler for setting the map state when a user selects a location result\n    const handleSetLocationResult = result => {\n        var newLocationState = {\n            mapState: result.mapState,\n            error: '',\n            queryResults: []\n        }\n        if (beingEdited === 'address' && !locationState.prevMapState) {\n            newLocationState.prevMapState = locationState.mapState\n        }\n        handleSetField('address', result.placeName)\n\n        setLocationState({\n            ...locationState,\n            ...newLocationState\n        })\n        setAddressIsSearchResult(true)\n    }\n\n    // reset the map to before the location was edited\n    const resetMapToPrevState = () => {\n        setLocationState({\n            ...locationState,\n            mapState: locationState.prevMapState,\n            queryResults: [],\n            prevMapState: {}\n        })\n    }\n\n    // reset the field being edited\n    const cancelEditing = () => {\n        handleSetField(beingEdited, prevValue)\n        setBeingEdited('')\n\n        if (beingEdited === 'address') {\n            resetMapToPrevState()\n        }\n    }\n\n    // handle an edited but not finalised search field on submit\n    const handleUnselectedSearchField = () => {\n        setLocationState({\n            ...locationState,\n            error: 'Select a search result or clear search field before saving'\n        })\n    }\n\n    // send user to view the specified artefact\n    const pushViewArtefactURL = id => {\n        const { history } = props\n        if (history) {\n            history.push(`/artefacts/${id}`)\n        }\n        setMode({ view: true })\n    }\n\n    // send user to home\n    const pushHomeURL = () => {\n        const { history } = props\n        if (history) {\n            history.push(`/`)\n        }\n    }\n\n    // handlers for GQL mutations\n    const handleCreationCompleted = data => {\n        console.log(\"here's the data\")\n        console.log(data)\n        var id = data.data.artefactCreate.artefact.id\n        pushViewArtefactURL(id)\n    }\n    const updateCompleted = async data => {\n        setBeingEdited('')\n        setSnackbarOpen(true)\n    }\n    const deleteCompleted = async data => {\n        pushHomeURL()\n    }\n    const handleCreationError = async errors => {\n        console.error('Creation errors occurred:', errors)\n    }\n    const handleUpdateError = async errors => {\n        console.error('Update errors occured: ', errors)\n    }\n    const handleDeleteError = async errors => {\n        console.error('Deletion errors occured: ', errors)\n    }\n\n    const createArtefact = async (\n        variables,\n        successCallback,\n        errorCallback\n    ) => {\n        let form_data = new FormData()\n        // Image not passed through by variables\n        if (state.files && state.files.length) {\n            form_data.append('itemImage', state.files[0])\n        }\n        form_data.append('query', CREATE_ARTEFACT_MUTATION_STR)\n        form_data.append('variables', JSON.stringify(variables))\n        let url = config.uri\n        axios\n            .post(url, form_data, {\n                headers: {\n                    'Authorization': 'JWT ' + localStorage.getItem(AUTH_TOKEN),\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                    'Content-Transfer-Encoding': 'multipart/form-data'\n                }\n            })\n            .then(res => {\n                successCallback(res.data)\n            })\n            .catch(err => {\n                // console.error(err);\n                errorCallback(err)\n            })\n    }\n\n    const [updateArtefact, { error: updateErrors }] = useMutation(\n        UPDATE_ARTEFACT_MUTATION,\n        {\n            onCompleted: updateCompleted,\n            onError: handleUpdateError\n        }\n    )\n\n    const [deleteArtefact, { error: deleteErrors }] = useMutation(\n        DELETE_ARTEFACT_MUTATION,\n        {\n            onCompleted: deleteCompleted,\n            onError: handleDeleteError\n        }\n    )\n\n    const parseDate = date => {\n        return date ? date.toISOString().slice(0, -1) : null\n    }\n\n    // for creation of a new artefact\n    const submitForm = async event => {\n        if (!addressIsSearchResult) {\n            handleUnselectedSearchField()\n            return\n        }\n\n        var famIDs = []\n        if (state.belongsToFamiliesBools) {\n            famIDs = Object.keys(state.belongsToFamiliesBools).filter(\n                id => state.belongsToFamiliesBools[id]\n            )\n        }\n\n        // File/uploaded included directly from state, multipart request\n        var input = {\n            name: state.name,\n            description: state.description,\n            state: state.state,\n            isPublic: state.isPublic ? state.isPublic : false,\n            belongsToFamilies: famIDs,\n            address: state.address ? state.address : ''\n        }\n        if (state.date) {\n            input.date = parseDate(state.date)\n        }\n        createArtefact(input, handleCreationCompleted, handleCreationError)\n    }\n\n    // for updating an existing artefact\n    const saveChange = async event => {\n        if (mode.edit) {\n            var input = {}\n            if (!addressIsSearchResult) {\n                handleUnselectedSearchField()\n                return\n            } else if (beingEdited === 'belongsToFamiliesBools') {\n                input['belongsToFamilies'] = Object.keys(\n                    state.belongsToFamiliesBools\n                ).filter(id => state.belongsToFamiliesBools[id])\n            } else if (beingEdited === 'date') {\n                input[beingEdited] = parseDate(state[beingEdited])\n            } else {\n                input[beingEdited] = state[beingEdited]\n            }\n\n            console.log('Input to GQL update mutation: input', input)\n            updateArtefact({\n                variables: {\n                    id: artefact.id,\n                    artefactInput: input\n                }\n            })\n        }\n    }\n\n    const noErrors = !creationErrors\n    const dataLoading = familiesLoading || statesLoading\n\n    // select the submit handler\n    const submitHandler = e => {\n        e.preventDefault()\n        mode.create ? submitForm(e) : saveChange(e)\n    }\n\n    // if ((mode.edit || mode.view) && dataLoading) {\n    //     return <CircularProgress />\n    // }\n\n    const editButtonProps = {\n        save: saveChange,\n        cancel: cancelEditing,\n        updateErrors: updateErrors,\n        classes: classes\n    }\n\n    const componentProps = {\n        classes: classes,\n        beingEdited: beingEdited,\n        artefactStates: artefactStates,\n        username: context.user.username,\n        families: families,\n        states: {\n            state: state,\n            locationState: locationState,\n            mode: mode\n        },\n        setters: {\n            handleSetField: handleSetField,\n            setMode\n        }\n    }\n\n    const addressProps = {\n        ...componentProps,\n        handleGeocodeQuery: handleGeocodeQuery,\n        setters: {\n            ...componentProps.setters,\n            setLocationState: setLocationState,\n            setAddressIsSearchResult: setAddressIsSearchResult,\n            handleSetLocationResult: handleSetLocationResult\n        }\n    }\n\n    const showPrivacy =\n        !mode.view || (Object.keys(state).length !== 0 && state.isPublic)\n    const components = [\n        { comp: Name, name: 'name' },\n        { comp: State, name: 'state' },\n        { comp: Admin, name: 'admin' },\n        { comp: Date, name: 'date' },\n        { comp: Description, name: 'description' },\n        { comp: showPrivacy ? Privacy : null, name: 'isPublic' },\n        { comp: Families, name: 'belongsToFamiliesBools' },\n        {\n            comp: mode.view && state.upload === 'False' || state.upload === \"undefined\" ? null : Images,\n            name: 'files'\n        }\n    ]\n\n    const componentsViewMode = [\n        { comp: Name, name: 'name' },\n        { comp: State, name: 'state' },\n        { comp: Admin, name: 'admin' },\n        { comp: Date, name: 'date' },\n        { comp: Description, name: 'description' },\n        { comp: Families, name: 'belongsToFamiliesBools' },\n        { comp: showPrivacy ? Privacy : null, name: 'isPublic' }\n    ]\n    const regularView = !mode.view || state.upload === 'False'\n\n    return (\n        <form onSubmit={submitHandler} className={classes.form}>\n            <Grid container className={classes.outerContainer} spacing={1}>\n                <Grid\n                    item\n                    xs={12}\n                    container\n                    justify='center'\n                    alignItems='center'\n                    spacing={1}\n                >\n                    <Head\n                        isAdmin={isAdmin}\n                        openDelete={() => setDeleteOpen(true)}\n                        noErrors={noErrors}\n                        {...componentProps}\n                    />\n                </Grid>\n\n                {regularView &&\n                    components.map(({ comp, name, widthProps }) => {\n                        if (comp === null) return null\n                        if (!widthProps) widthProps = { xs: 12, sm: 6 }\n                        return (\n                            <Grid\n                                container\n                                item\n                                {...widthProps}\n                                key={name}\n                                alignContent='stretch'\n                            >\n                                <FieldWrapper\n                                    key={comp}\n                                    child={comp}\n                                    name={name}\n                                    childProps={componentProps}\n                                    editButtonProps={editButtonProps}\n                                    classes={classes}\n                                />\n                            </Grid>\n                        )\n                    })}\n\n                {!regularView && (\n                    <Fragment>\n                        <Grid\n                            container\n                            item\n                            xs={12}\n                            sm={6}\n                            // alignItems='flex-start'\n                            alignContent='stretch'\n                        >\n                            <FieldWrapper\n                                child={Images}\n                                name={'files'}\n                                childProps={componentProps}\n                                editButtonProps={editButtonProps}\n                                classes={classes}\n                            />\n                        </Grid>\n\n                        <Grid\n                            container\n                            item\n                            xs={12}\n                            sm={6}\n                            // alignItems='flex-start'\n                            alignContent='stretch'\n                            spacing={1}\n                        >\n                            {componentsViewMode.map(\n                                ({ comp, name, widthProps }) => {\n                                    if (comp === null) return null\n                                    if (!widthProps) widthProps = { xs: 12 }\n                                    return (\n                                        <Grid\n                                            container\n                                            item\n                                            {...widthProps}\n                                            key={name}\n                                            // alignItems='flex-start'\n                                            alignContent='stretch'\n                                            padding={1}\n                                        >\n                                            <FieldWrapper\n                                                key={comp}\n                                                child={comp}\n                                                name={name}\n                                                childProps={componentProps}\n                                                editButtonProps={\n                                                    editButtonProps\n                                                }\n                                                classes={classes}\n                                            />\n                                        </Grid>\n                                    )\n                                }\n                            )}\n                        </Grid>\n                    </Fragment>\n                )}\n\n                {(!mode.view || state.address) && (\n                    <Grid item xs={12}>\n                        <FieldWrapper\n                            child={Address}\n                            name='address'\n                            childProps={addressProps}\n                            editButtonProps={editButtonProps}\n                            classes={classes}\n                        />\n                    </Grid>\n                )}\n\n                {mode.create && (\n                    <Grid item xs={12} md={12}>\n                        <CreateButton noErrors={noErrors} fullWidth />\n                    </Grid>\n                )}\n\n                <SuccessSnackbar\n                    open={snackbarOpen}\n                    setOpen={setSnackbarOpen}\n                    viewArtefact={pushViewArtefactURL}\n                    classes={classes}\n                    id={artefact ? artefact.id : '-1'}\n                />\n\n                <DeleteDialog\n                    open={deleteOpen}\n                    setOpen={setDeleteOpen}\n                    deleteArtefact={deleteArtefact}\n                    artefact={artefact}\n                />\n\n                <HelpDialog\n                    open={props.helpOpen}\n                    setOpen={props.setHelpOpen}\n                    content={HelpContent}\n                    mode={mode}\n                />\n            </Grid>\n        </form>\n    )\n}\n\nfunction Wrapped(props) {\n    return (\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n            <Grid\n                container\n                spacing={0}\n                alignItems='flex-start'\n                justify='center'\n                style={{ minHeight: '80vh' }}\n            >\n                <Grid item xs={11} md={9}>\n                    <CssBaseline />\n                    <ArtefactView {...props} />\n                </Grid>\n            </Grid>\n        </MuiPickersUtilsProvider>\n    )\n}\n\nexport default withRouter(Wrapped)\n","import React from 'react'\nimport ArtefactView from './ArtefactView'\nimport {\n    GetArtefactWrapper,\n    GetFamiliesWrapper,\n    GetStatesWrapper\n} from '../../components'\n\nexport default function CreateArtefactView(props) {\n    const childProps = {\n        child: GetArtefactWrapper,\n        childProps: {\n            child: ArtefactView\n        },\n        create: true\n    }\n    return (\n        <GetStatesWrapper\n            {...props}\n            {...childProps}\n            child={GetFamiliesWrapper}\n        />\n    )\n}\n","import React from 'react'\nimport ArtefactView from './ArtefactView'\nimport {\n    GetArtefactWrapper,\n    GetFamiliesWrapper,\n    GetStatesWrapper\n} from '../../components'\n\nexport default function EditArtefactView(props) {\n    const thisChildProps = {\n        child: GetArtefactWrapper,\n        childProps: {\n            child: ArtefactView\n        },\n        view: true\n    }\n    return (\n        <GetStatesWrapper\n            {...props}\n            child={GetFamiliesWrapper}\n            childProps={thisChildProps}\n        />\n    )\n}\n","import React, { useState, Fragment } from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { CssBaseline, Grid, Typography } from '@material-ui/core'\nimport {\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    Paper,\n    Link\n} from '@material-ui/core'\nimport gql from 'graphql-tag'\nimport { useQuery } from '@apollo/react-hooks'\nimport { ArtefactCard, Loading, HelpDialog } from '../../components'\nimport { Link as RouterLink } from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        padding: theme.spacing(3)\n    }\n}))\n\nconst LIST_OF_ARTEFACTS = gql`\n    query artefactsQuery {\n        me {\n            artefactAdministratorOf {\n                edges {\n                    node {\n                        id\n                        name\n                        description\n                        upload\n                        admin {\n                            username\n                        }\n                    }\n                }\n            }\n        }\n    }\n`\n\nconst HelpContent = () => (\n    <Fragment>\n        <DialogTitle id='help-title'>Help</DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                Here you can view all of the artefacts which you are an admin of\n            </DialogContentText>\n            <DialogContentText>\n                Click view to see more about the artefact or to edit it\n            </DialogContentText>\n        </DialogContent>\n    </Fragment>\n)\n\nexport default function ManageArtefactsView(props) {\n    const classes = useStyles()\n    const [state, setState] = useState({ loading: true })\n\n    let { data, loading } = useQuery(LIST_OF_ARTEFACTS, {\n        onCompleted: data =>\n            setState({\n                artefactEdges: data.me.artefactAdministratorOf.edges,\n                loading: false\n            }),\n        onError: errors => console.log(errors)\n    })\n\n    return (\n        <Fragment>\n            <CssBaseline />\n            <Grid\n                container\n                spacing={2}\n                justify='center'\n                className={classes.container}\n            >\n                <Grid item xs={12}>\n                    <Typography variant='h4' align='center'>\n                        Manage Artefacts\n                    </Typography>\n                    <Typography variant='subtitle1' align='center'>\n                        Here you can view all the artefacts you are an admin of\n                    </Typography>\n                </Grid>\n                {state.loading ? (\n                    <Loading />\n                ) : state.artefactEdges.length !== 0 ? (\n                    state.artefactEdges.map(edge => (\n                        <Grid\n                            item\n                            xs={12}\n                            sm={6}\n                            md={4}\n                            lg={3}\n                            key={edge.node.id}\n                        >\n                            <ArtefactCard artefact={edge.node} />\n                        </Grid>\n                    ))\n                ) : (\n                    <Paper\n                        className={classes.paper}\n                        style={{\n                            marginTop: 15,\n                            padding: '6px'\n                        }}\n                    >\n                        You are not managing any artefacts, click\n                        <Link\n                            component={RouterLink}\n                            to='/artefacts/create'\n                            color='secondary'\n                        >\n                            {' here '}\n                        </Link>\n                        to create one.\n                    </Paper>\n                )}\n            </Grid>\n\n            <HelpDialog\n                open={props.helpOpen}\n                setOpen={props.setHelpOpen}\n                content={HelpContent}\n            />\n        </Fragment>\n    )\n}\n","import React from 'react'\nimport ArtefactView from './ArtefactView'\nimport {\n    GetArtefactWrapper,\n    GetFamiliesWrapper,\n    GetStatesWrapper\n} from '../../components'\n\nexport default function EditArtefactView(props) {\n    const thisChildProps = {\n        child: GetArtefactWrapper,\n        childProps: {\n            child: ArtefactView\n        },\n        edit: true\n    }\n\n    return (\n            <GetStatesWrapper\n                {...props}\n                child={GetFamiliesWrapper}\n                childProps={thisChildProps}\n            />\n    )\n}\n","import React from 'react'\n\nexport default function Error404View(props) {\n    return (\n        <div style={{padding:'50px'}}>\n            <h1 style={{color: 'red'}}>404 Page Not Found</h1>\n            <h3>If you're seeing this page...</h3>\n            <img src=\"https://media0.giphy.com/media/KVZXay4Uduy8XHpZRc/giphy.gif\" alt='You are lost - Obi Wan'/>\n            <p><a href=\"/\">Return home</a></p>\n        </div>\n    )\n}","import React, { useContext, useState, Fragment } from 'react'\nimport { Link as RouterLink } from 'react-router-dom'\n\nimport authContext from '../authContext'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n    Typography,\n    Button,\n    TextField,\n    Grid,\n    Paper,\n    Link,\n    MenuItem,\n    Snackbar,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    CssBaseline\n} from '@material-ui/core'\nimport gql from 'graphql-tag'\nimport { useMutation, useQuery } from '@apollo/react-hooks'\nimport { ArtefactCard, Loading, HelpDialog } from '../components'\nimport { Redirect } from 'react-router-dom'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper\n    },\n    icon: {\n        color: 'rgba(255, 255, 255, 0.54)'\n    },\n    outerContainer: {\n        padding: theme.spacing(2)\n    },\n    card: {\n        alignContent: 'stretch'\n    },\n    paper: {\n        padding: theme.spacing(1),\n        borderRadius: 10\n    },\n}))\n\nconst HOMEPAGE_INFO = gql`\n    query {\n        me {\n            isMemberOf {\n                id\n                familyName\n                joinCode\n                hasArtefacts {\n                    edges {\n                        node {\n                            id\n                            name\n                            admin {\n                                username\n                            }\n                        }\n                    }\n                }\n            }\n            profile {\n                id\n                selectedFamily {\n                    id\n                    familyName\n                    joinCode\n                    about\n                    hasArtefacts {\n                        edges {\n                            node {\n                                id\n                                name\n                                description\n                                upload\n                                admin {\n                                    username\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n`\n\nconst JOIN_FAMILY_MUTATION = gql`\n    mutation JoinFamily($joinCode: String!) {\n        familyJoin(joinCode: $joinCode) {\n            family {\n                familyName\n                familyAdmin {\n                    username\n                }\n            }\n        }\n    }\n`\n\nconst SELECT_FAMILY_MUTATION = gql`\n    mutation SelectFamilyMutation($profileId: Int!, $toFamily: String!) {\n        updateProfile(input: { id: $profileId, selectedFamily: $toFamily }) {\n            id\n            selectedFamily\n        }\n    }\n`\n\nconst HelpContent = () => (\n    <Fragment>\n        <DialogTitle id='help-title'>Help</DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                Select from your families in the corner to view their artefacts.\n            </DialogContentText>\n            <DialogContentText>\n                Enter a family's join code in the box underneath to join a\n                family.\n            </DialogContentText>\n            <DialogContentText>\n                The join code can be copied by clicking the button underneath\n                the family name.\n            </DialogContentText>\n        </DialogContent>\n    </Fragment>\n)\n\nexport default function UserHomeView(props) {\n    const classes = useStyles()\n    const context = useContext(authContext)\n    const [formJoinCode, setFormJoinCode] = useState('')\n    const [copied, setCopied] = useState(false)\n\n    // After a new family has been joined, refetch the home info to update it, so the user\n    // Can now see that family in the bar\n    const [joinFamilyMutation, { data: join_data, loading: join_loading }] = useMutation(\n        JOIN_FAMILY_MUTATION,\n        {\n            refetchQueries: data => [{ query: HOMEPAGE_INFO }]\n        }\n    )\n\n    const handleJoinFamily = () => {\n        if (formJoinCode.length === 0) {\n            console.error('Enter a valid joinCode')\n            return\n        }\n\n        joinFamilyMutation({ variables: { joinCode: formJoinCode } })\n    }\n\n    let { data: home_data, loading: home_data_loading } = useQuery(\n        HOMEPAGE_INFO, \n        {\n            fetchPolicy: 'cache-and-network'\n        }\n    )\n\n    const [selectFamily, { data: select_data, loading: select_loading }] = useMutation(\n        SELECT_FAMILY_MUTATION,\n        {\n            refetchQueries: data => [{ query: HOMEPAGE_INFO }]\n        }\n    )\n\n    const handleChange = event => {\n        event.preventDefault()\n        const newFamily = event.target.value\n        selectFamily({\n            variables: { profileId: profileId, toFamily: newFamily }\n        })\n    }\n\n    if (home_data_loading) {\n        console.log(\"home data is loading on refetch\")\n        return <Loading />\n    }\n\n    let selectedFamily;\n    let families;\n    let profileId;\n    \n    if (home_data) {\n        selectedFamily = home_data.me.profile.selectedFamily\n        families = home_data.me.isMemberOf\n        profileId = home_data.me.profile.id\n    } else {\n        // Go to logout to remove token which is normally the cause of this error\n        console.error('User data was not defined, but fetched, logging out')\n        return <Redirect to='/logout' />\n    }\n\n    let artefacts = []\n\n    // If the user has selected a family there will be a list of artefacts\n    // Though the list may be empty\n    if (selectedFamily) {\n        artefacts = home_data.me.profile.selectedFamily.hasArtefacts.edges\n    }\n\n\n    return (\n        <Fragment>\n            <CssBaseline />\n            <Grid container justify='center'>\n                <Grid\n                    item\n                    xs={12}\n                    lg={10}\n                    container\n                    spacing={3}\n                    justify='space-between'\n                    className={classes.outerContainer}\n                >\n                    <Grid\n                        item\n                        xs={12}\n                        sm={7}\n                        container\n                        justify='center'\n                        alignItems='stretch'\n                        spacing={1}\n                        className={classes.paper}\n                    >\n                        {selectedFamily && (\n                            <Fragment>\n                                <Grid item xs={12}>\n                                    <Typography variant='h1'>\n                                        {selectedFamily.familyName}\n                                    </Typography>\n                                </Grid>\n                                <Grid item xs={12}>\n                                    <Typography variant='subtitle1'>\n                                        {selectedFamily.about}\n                                    </Typography>\n                                </Grid>\n\n                                <Grid item xs={12}>\n                                    <CopyToClipboard\n                                        text={selectedFamily.joinCode}\n                                        onCopy={() => setCopied(true)}\n                                    >\n                                        <Button variant='outlined'>\n                                            Copy family join code\n                                        </Button>\n                                    </CopyToClipboard>\n                                </Grid>\n                            </Fragment>\n                        )}\n\n                        {!selectedFamily && (\n                            <Typography variant='h2'>\n                            Join or Create a Family\n                            </Typography>\n                        )}\n                    </Grid>\n                    <Grid\n                        item\n                        xs={8}\n                        sm={5}\n                        md={3}\n                        container\n                        spacing={1}\n                        justify='center'\n                        alignContent='flex-start'\n                    >\n                        <Grid item xs={12}>\n                            <TextField\n                                fullWidth\n                                label='Select Family'\n                                variant='outlined'\n                                value={\n                                    selectedFamily ? selectedFamily.id : null\n                                }\n                                select\n                                onChange={handleChange}\n                                SelectProps={{\n                                    name: 'age',\n                                    autoWidth: true\n                                }}\n                                disabled={families.length <= 1}\n                            >\n                                {families &&\n                                    families.map((item, key) => (\n                                        <MenuItem key={item.id} value={item.id}>\n                                            {item.familyName}\n                                        </MenuItem>\n                                    ))}\n                            </TextField>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                fullWidth\n                                id='joinCodeField'\n                                variant='outlined'\n                                label='Enter join code'\n                                value={formJoinCode}\n                                className={classes.textField}\n                                onChange={e => setFormJoinCode(e.target.value)}\n                                InputProps={{\n                                    endAdornment: (\n                                        <Button\n                                            variant='contained'\n                                            color='primary'\n                                            onClick={handleJoinFamily}\n                                            className={classes.button}\n                                            size='small'\n                                        >\n                                            Join\n                                        </Button>\n                                    ),\n                                    style: {}\n                                }}\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid\n                        container\n                        justify='flex-start'\n                        alignItems='stretch'\n                        spacing={1}\n                        item\n                        xs={12}\n                    >\n                        {artefacts.map((artefact, key) => (\n                            <Grid item xs={12} sm={6} md={4} key={key}>\n                                <ArtefactCard\n                                    artefact={artefact.node}\n                                    className={classes.card}\n                                />\n                            </Grid>\n                        ))}\n                        {(artefacts.length === 0) && selectedFamily && (\n                            <Paper\n                                className={classes.paper}\n                                style={{ \n                                    marginTop: 15,\n                                    padding: \"6px\", }}\n                            >\n                                This family has no artefacts, click\n                                <Link\n                                    component={RouterLink}\n                                    to='/artefacts/create'\n                                    color='secondary'\n                                >\n                                    {' here '}\n                                </Link>\n                                to create one. Make sure to asign them to this\n                                family\n                            </Paper>\n                        )}\n                        {(artefacts.length === 0) && !selectedFamily && (\n                            <Paper\n                                className={classes.paper}\n                                style={{\n                                    marginTop: 15,\n                                    padding: \"6px\",\n                                }}\n                            >\n                                You are not yet a member of a family. Click\n                                <Link\n                                    component={RouterLink}\n                                    to='/family/create'\n                                    color='secondary'\n                                >\n                                    {' here '}\n                                </Link>\n                                to create one. Or join using a join code on the right.\n                            </Paper>\n                        )}\n                    </Grid>\n                </Grid>\n            </Grid>\n            { selectedFamily && (\n                <Snackbar\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'left'\n                    }}\n                    open={copied}\n                    autoHideDuration={2000}\n                    onClose={() => setCopied(false)}\n                    message={<span id='message-id'>Join code copied to clipboard<br />\n                        {selectedFamily.joinCode}</span>}\n                />\n            )}\n\n\n            <HelpDialog\n                open={props.helpOpen}\n                setOpen={props.setHelpOpen}\n                content={HelpContent}\n            />\n        </Fragment>\n    )\n}\n","import React, { useState, Fragment } from 'react'\nimport { useTheme } from '@material-ui/styles'\nimport {\n    MenuItem,\n    TextField,\n    Grid,\n    Paper,\n    IconButton,\n    Snackbar,\n    SnackbarContent,\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle\n} from '@material-ui/core'\nimport HelpIcon from '@material-ui/icons/Help'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\nimport { green } from '@material-ui/core/colors'\n\nimport { Map } from '../components'\nimport { artefactGeocodeQuery } from '../components/MapAPI'\n\nimport { GetFamiliesWrapper, HelpDialog } from '../components'\n\nimport { GET_FAMILY_ARTEFACTS } from '../gqlQueriesMutations'\nimport { useQuery } from '@apollo/react-hooks'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n    overlay: {\n        position: 'absolute',\n        top: '70px',\n        right: '5px',\n        // backgroundColor: theme.palette.background.paper,\n        margin: theme.spacing(1),\n        minWidth: 140\n    },\n    paper: {\n        padding: theme.spacing(1),\n        margin: theme.spacing(1),\n        borderRadius: 10\n    },\n    error: {\n        backgroundColor: theme.palette.error.dark\n    },\n    success: {\n        backgroundColor: green[600]\n    },\n    icon: {\n        opacity: 0.9,\n        marginRight: theme.spacing(1),\n        fontSize: 20\n    },\n    message: {\n        display: 'flex',\n        alignItems: 'center'\n    }\n}))\n\nconst MyDialogContent = () => (\n    <Fragment>\n        <DialogTitle id='help-title'>Help</DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                Select from your families in the corner to view their artefacts\n            </DialogContentText>\n            <DialogContentText>\n                Only artefacts with a location will be shown\n            </DialogContentText>\n        </DialogContent>\n\n        <DialogTitle id='help-title'>Map Controls</DialogTitle>\n        <DialogContent>\n            <DialogContentText>Scroll to zoom</DialogContentText>\n            <DialogContentText>Click and drag to move</DialogContentText>\n            <DialogContentText>\n                Click on an artefact to show more information\n            </DialogContentText>\n        </DialogContent>\n    </Fragment>\n)\n\nconst MapStyles = [\n    { value: 'mapbox://styles/mapbox/streets-v11', name: 'Streets' },\n    { value: 'mapbox://styles/mapbox/satellite-v9', name: 'Satellite' },\n    { value: 'mapbox://styles/mapbox/light-v10', name: 'Light' },\n    { value: 'mapbox://styles/mapbox/dark-v10', name: 'Dark' },\n    {\n        value: 'mapbox://styles/zduffield/ck1q1hwgo2idy1cl3jt3rh1vk',\n        name: 'Ugly'\n    }\n]\n\nfunction MapView(props) {\n    const theme = useTheme()\n    const classes = useStyles()\n    var defaultMapStyle = 'mapbox://styles/mapbox/streets-v9?optimize=true'\n    if (theme.palette.type === 'dark') {\n        defaultMapStyle = 'mapbox://styles/mapbox/dark-v10?optimize=true'\n    }\n\n    var { families, familiesLoading } = props\n\n    // initally query is run with invalid ID\n    const [state, setState] = useState({\n        family: { id: '-1' },\n        defaultMapStyle: defaultMapStyle,\n        mapStyle: defaultMapStyle,\n        selectedArtefact: {}\n    })\n\n    if (state.defaultMapStyle !== defaultMapStyle) {\n        // avoid unnecessary rerender of map\n        if (state.mapStyle !== defaultMapStyle) {\n            setState({\n                ...state,\n                defaultMapStyle: defaultMapStyle,\n                mapStyle: defaultMapStyle\n            })\n        } else {\n            setState({\n                ...state,\n                defaultMapStyle: defaultMapStyle\n            })\n        }\n    }\n\n    const [mapArtefacts, setMapArtefacts] = useState([])\n    const initMapState = { zoom: [2] }\n    const [mapState, setMapState] = useState(initMapState)\n    const [snackbarOpen, setSnackbarOpen] = useState(false)\n    const [errorSnackbar, setErrorSnackbar] = useState({ open: false, msg: '' })\n    const getArtefactMapData = data => {\n        console.log('Query resulted')\n        if (!data || !data.family) return\n        artefacts = data.family.hasArtefacts.edges.map(edge => edge.node)\n\n        var promiseArr = []\n        for (var i = 0; i < artefacts.length; i++) {\n            if (artefacts[i].address) {\n                promiseArr.push(\n                    artefactGeocodeQuery(artefacts[i]).then(result => {\n                        var { response, artefact } = result\n                        if (response.error) {\n                            console.log(response.error)\n                            setErrorSnackbar({\n                                open: true,\n                                msg: 'Error loading artefacts'\n                            })\n                        } else {\n                            var mapArtefact = {\n                                ...artefact,\n                                popup: true,\n                                center: response.results[0].mapState.center,\n                                initPopupOpen: false\n                            }\n                            return mapArtefact\n                        }\n                    })\n                )\n            }\n        }\n        Promise.all(promiseArr).then(result => {\n            setMapArtefacts(result)\n            setSnackbarOpen(true)\n        })\n    }\n\n    useQuery(GET_FAMILY_ARTEFACTS, {\n        variables: { id: state.family.id },\n        onCompleted: getArtefactMapData,\n        onError: error => {\n            if (state.family.id > 0) {\n                setErrorSnackbar({ open: true, msg: 'Error loading family' })\n                console.log(error)\n            }\n        },\n    })\n\n    var artefacts = []\n\n    const handleChange = event => {\n        if (event.target.value === state.family) return\n\n        if (event.target.name === 'family') {\n            setMapArtefacts([])\n        }\n\n        if (event.target.name === 'selectedArtefact') {\n            if (event.target.value !== null) {\n                var newCenter = event.target.value.center\n                if (newCenter === mapState.center) {\n                    newCenter = newCenter.map(coord => 0.99999999 * coord)\n                }\n                setMapState({\n                    center: newCenter\n                })\n                event.target.value.initPopupOpen = true\n            }\n        }\n        setState({\n            ...state,\n            [event.target.name]: event.target.value\n        })\n    }\n\n    return (\n        <Paper className={classes.paper} elevation={10}>\n            <Grid container>\n                <Map\n                    interactive\n                    mapStyle={state.mapStyle}\n                    mapState={mapState}\n                    containerStyle={{\n                        height: '87vh',\n                        width: '100vw',\n                        position: 'relative',\n                        zIndex: 0,\n                        borderRadius: 10\n                    }}\n                    artefacts={mapArtefacts}\n                    // onClick={e => setState({ ...state, selectedArtefact: {} })}\n                />\n            </Grid>\n            <Grid\n                container\n                item\n                xs={4}\n                sm={1}\n                className={classes.overlay}\n                justify='flex-end'\n            >\n                {!familiesLoading && (\n                    <Grid item xs={12}>\n                        <Paper className={classes.paper}>\n                            <TextField\n                                fullWidth\n                                label='Family'\n                                variant='outlined'\n                                value={state.family || {}}\n                                select\n                                onChange={handleChange}\n                                SelectProps={{\n                                    name: 'family',\n                                    autoWidth: true\n                                }}\n                            >\n                                {families.map(fam => (\n                                    <MenuItem value={fam} key={fam.id}>\n                                        {fam.familyName}\n                                    </MenuItem>\n                                ))}\n                            </TextField>\n                        </Paper>\n                    </Grid>\n                )}\n                <Grid item xs={12}>\n                    <Paper className={classes.paper}>\n                        <TextField\n                            fullWidth\n                            label='Map Style'\n                            variant='outlined'\n                            value={state.mapStyle}\n                            select\n                            onChange={handleChange}\n                            SelectProps={{\n                                name: 'mapStyle',\n                                autoWidth: true\n                            }}\n                        >\n                            <MenuItem value={defaultMapStyle}>Default</MenuItem>\n                            {MapStyles.map(style => (\n                                <MenuItem value={style.value} key={style.value}>\n                                    {style.name}\n                                </MenuItem>\n                            ))}\n                        </TextField>\n                    </Paper>\n                </Grid>\n\n                {mapArtefacts.length > 0 && (\n                    <Grid item xs={12}>\n                        <Paper className={classes.paper}>\n                            <TextField\n                                fullWidth\n                                label='Jump to'\n                                variant='outlined'\n                                value={state.selectedArtefact || {}}\n                                select\n                                onChange={handleChange}\n                                SelectProps={{\n                                    name: 'selectedArtefact',\n                                    autoWidth: true\n                                }}\n                            >\n                                {mapArtefacts.map(artefact => (\n                                    <MenuItem\n                                        value={artefact}\n                                        key={artefact.id}\n                                    >\n                                        {artefact.name}\n                                    </MenuItem>\n                                ))}\n                            </TextField>\n                        </Paper>\n                    </Grid>\n                )}\n            </Grid>\n\n            <HelpDialog\n                open={props.helpOpen}\n                setOpen={props.setHelpOpen}\n                content={MyDialogContent}\n            />\n\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left'\n                }}\n                open={snackbarOpen}\n                autoHideDuration={2000}\n                onClose={e => setSnackbarOpen(false)}\n            >\n                <SnackbarContent\n                    className={classes.success}\n                    aria-describedby='success-message-id'\n                    message={\n                        <span\n                            id='success-message-id'\n                            className={classes.message}\n                        >\n                            <CheckCircleIcon className={classes.icon} />\n                            {mapArtefacts.length} Artefacts Loaded\n                        </span>\n                    }\n                />\n            </Snackbar>\n\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left'\n                }}\n                open={errorSnackbar.open}\n                autoHideDuration={2000}\n                onClose={e => setErrorSnackbar({ open: false, msg: '' })}\n            >\n                <SnackbarContent\n                    className={classes.error}\n                    aria-describedby='err-message-id'\n                    message={\n                        <span id='err-message-id' className={classes.message}>\n                            <ErrorIcon className={classes.icon} />\n                            {errorSnackbar.msg}\n                        </span>\n                    }\n                />\n            </Snackbar>\n        </Paper>\n    )\n}\n\nexport default props => <GetFamiliesWrapper {...props} child={MapView} />\n","import React from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport { PrivateRoute } from './components/PrivateRoute'\nimport { CssBaseline } from '@material-ui/core'\n\n// Views\nimport Login from './views/LoginView'\nimport Signup from './views/SignupView'\nimport Logout from './components/Logout'\n\n// Family views\nimport CreateFamilyView from './views/CreateFamilyView'\n// Artefact Views\nimport CreateArtefactView from './views/artefactViews/CreateArtefactView'\nimport DetailView from './views/artefactViews/DetailView'\nimport ManageArtefactsView from './views/artefactViews/ManageArtefactsView'\nimport EditArtefactView from './views/artefactViews/EditArtefactView'\nimport Error404View from './views/Error404View'\n\nimport UserHomeView from './views/UserHomeView'\n\nimport MapView from './views/MapView'\n\nfunction App(props) {\n    return (\n        <Router>\n            <CssBaseline />\n            <div>\n                <Switch>\n                    {/* This is a special protected route, since it sends to the landing page if not logged in, which \n                        has the same url as the userHomeView */}\n                    <PrivateRoute\n                        exact\n                        path='/'\n                        loggedIn={UserHomeView}\n                        landingPage\n                    />\n                    {/* User auth routes */}\n                    <Route exact path='/login/' component={Login} />\n                    <Route exact path='/signup/' component={Signup} />\n                    <Route exact path='/logout/' component={Logout} />\n\n                    {/* Artefact routes */}\n                    <PrivateRoute\n                        exact\n                        path='/artefacts/create/'\n                        loggedIn={CreateArtefactView}\n                    />\n                    <PrivateRoute\n                        exact\n                        path='/artefacts/manage/'\n                        loggedIn={ManageArtefactsView}\n                    />\n                    <PrivateRoute\n                        exact\n                        path='/artefacts/:id/'\n                        loggedIn={DetailView}\n                    />\n                    <PrivateRoute\n                        exact\n                        path='/artefacts/edit/:id/'\n                        loggedIn={EditArtefactView}\n                    />\n\n                    {/* Family routes */}\n                    <PrivateRoute\n                        exact\n                        path='/family/create/'\n                        loggedIn={CreateFamilyView}\n                    />\n\n                    {/* Map */}\n                    <PrivateRoute\n                        exact\n                        path='/map/'\n                        loggedIn={MapView}\n                    />\n\n                    <Route component={Error404View} />\n                </Switch>\n            </div>\n        </Router>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport * as serviceWorker from './serviceWorker'\nimport { ApolloClient } from 'apollo-client'\nimport { createHttpLink } from 'apollo-link-http'\nimport { setContext } from 'apollo-link-context'\nimport { InMemoryCache } from 'apollo-cache-inmemory'\nimport { ApolloProvider } from '@apollo/react-hooks'\nimport Auth from './components/Auth'\n\nimport App from './App'\nimport { AUTH_TOKEN, config } from './constants'\n\n// Depending on prod or dev, set the appropriate uri for the graphql queries\nconst httpLink = createHttpLink({\n    uri: config.uri\n})\n\nconst authLink = setContext((_, { headers }) => {\n    // get the authentication token from local storage if it exists\n    const token = localStorage.getItem(AUTH_TOKEN)\n    // return the headers to the context so httpLink can read them\n    return {\n        headers: {\n            ...headers,\n            authorization: token ? `JWT ${token}` : ''\n        }\n    }\n})\n\nconst defaultOptions = {\n    watchQuery: {\n        fetchPolicy: 'no-cache',\n        errorPolicy: 'ignore',\n    },\n    query: {\n        fetchPolicy: 'no-cache',\n        errorPolicy: 'all',\n    },\n}\n\n// Set up Apollo client using Jwt auth\nconst client = new ApolloClient({\n    link: authLink.concat(httpLink),\n    cache: new InMemoryCache(),\n    defaultOptions: defaultOptions\n})\n\n// Wrap application with Apollo and Auth providers to give access across the application\nReactDOM.render(\n    <ApolloProvider client={client}>\n        <Auth>\n            <App />\n        </Auth>\n    </ApolloProvider>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}