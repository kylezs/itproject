(window["webpackJsonpartefacts-app"]=window["webpackJsonpartefacts-app"]||[]).push([[0],{121:function(e,t,a){e.exports=a(140)},126:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a(0),o=a.n(r),c=a(14),i=a.n(c);a(126),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(45),u=a(112),s=a(108),m=a(111),p=a(26),d=a(13),f=a.n(d),g=a(16),b=a(10),h=a(22),v=a(23),E=a.n(v),O=a(18),j=Object(r.createContext)({authenticated:!1,user:{},authToken:"",initiateLogin:function(){},handleAuthentication:function(){},logout:function(){}}),y=j,w=j.Provider,x=(j.Consumer,"auth-token"),C="duplicate key",k="Please, enter valid credentials",S={uri:"/graphql/"};function P(){var e=Object(h.a)(["\nmutation VerifyToken($token: String!) {\n    verifyToken(token: $token) {\n        payload\n    }\n}\n"]);return P=function(){return e},e}var A=E()(P());var $=a(50),N=a(38),T=a(64),W=a(65),I=a(72),D=a(24),F=a(44),L=a(3),B=a(103),q=a(188),M=a(185),U=a(186),R=a(113),_=a(183),V=a(104),Q=a.n(V),z=a(181),J=a(110),H=a(201),G=a(102),Y=a.n(G),X=function(e){var t=o.a.useState(null),a=Object(b.a)(t,2),n=a[0],c=a[1],i=Object(r.useContext)(y),l=Boolean(n);function u(){c(null)}return o.a.createElement("div",null,o.a.createElement(z.a,{component:D.b,to:"/family/create",color:"inherit"},"Create Family"),o.a.createElement(z.a,{color:"inherit"},"Manage Artefacts"),o.a.createElement(z.a,{component:D.b,to:"/artefacts/create",color:"inherit"},"Create Artefact"),o.a.createElement(_.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},color:"inherit"},o.a.createElement(Y.a,null)),o.a.createElement(J.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:u},o.a.createElement(H.a,{onClick:u},"Profile"),o.a.createElement(H.a,{onClick:u},"Settings"),o.a.createElement(H.a,{onClick:function(){i.logout()}},"Logout")))},Z=o.a.forwardRef(function(e,t){return o.a.createElement(D.b,Object.assign({innerRef:t,to:"/login"},e))}),K=o.a.forwardRef(function(e,t){return o.a.createElement(D.b,Object.assign({innerRef:t,to:"/signup"},e))}),ee=function(e){return o.a.createElement("div",null,o.a.createElement(z.a,{color:"inherit",underline:"none",component:K},"Sign up"),o.a.createElement(z.a,{color:"inherit",underline:"none",component:Z},"Login"))},te=a(187),ae=Object(B.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}});function ne(){var e=ae(),t=Object(r.useContext)(y).authenticated;return o.a.createElement("div",{className:e.root},o.a.createElement(M.a,{position:"static"},o.a.createElement(U.a,null,o.a.createElement(_.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},o.a.createElement(Q.a,null)),o.a.createElement(R.a,{variant:"h6",className:e.title},o.a.createElement(te.a,{component:D.b,to:"/",color:"inherit",variant:"inherit",underline:"none"},"Family AR")),t&&o.a.createElement(X,{username:null}),!t&&o.a.createElement(ee,null))))}var re=function(e){return o.a.createElement("div",null,o.a.createElement(ne,null),o.a.createElement(q.a,{style:{padding:"20px"}},e.children))},oe=a(189);var ce=function(){var e=Object(B.a)(function(e){return{progress:{margin:e.spacing(2)}}})();return o.a.createElement(re,null,o.a.createElement(oe.a,{className:e.progress}))};var ie=function(e){return o.a.createElement(re,null,"This is some cool landing page yo. Welcome!",o.a.createElement("br",null),"Also, in the future, this page should not have a navigation bar, it'll have cooler design stuff. It only has the nav bar for easier linking to signup / login for now")},le=function(e){function t(){var e,a;Object($.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(T.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={checkAuthenticated:!1},a}return Object(I.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.authenticated&&this.setState({checkAuthenticated:!0});var t=localStorage.getItem(x);!this.context.authenticated&&t?this.context.handleAuthentication(t,function(){console.log("Setting state"),e.setState({checkAuthenticated:!0})}):this.setState({checkAuthenticated:!0})}},{key:"render",value:function(){return this.props.children(this.state.checkAuthenticated)}}]),t}(r.Component);le.contextType=y;var ue=function(e){var t=e.loggedIn,a=e.loggedOut,n=(e.path,e.landingPage),c=Object(L.a)(e,["loggedIn","loggedOut","path","landingPage"]),i=Object(r.useContext)(y).authenticated;return a||(a="/login"),console.log("Authenticated: ",i),o.a.createElement(le,null,function(e){return!1===e?o.a.createElement(ce,null):o.a.createElement(F.b,Object.assign({},c,{render:function(e){return i?o.a.createElement(t,e):!i&&n?o.a.createElement(ie,null):o.a.createElement(F.a,{to:a})}}))})};function se(){var e=Object(h.a)(["\nmutation ArtefactCreate($artefactInput:ArtefactInputType!) {\n  artefactCreate(input: $artefactInput) {\n    artefact {\n      name,\n      description\n    }\n  }\n}"]);return se=function(){return e},e}E()(se());var me=a(190),pe=a(198),de=a(192),fe=a(191);function ge(){var e=Object(h.a)(["\nmutation TokenAuth($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n        token\n    }\n}\n"]);return ge=function(){return e},e}var be=E()(ge()),he=Object(B.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"50%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}});var ve=function(e){var t=Object(r.useContext)(y),a=he(),n=Object(r.useState)(""),c=Object(b.a)(n,2),i=c[0],l=c[1],u=Object(r.useState)(""),s=Object(b.a)(u,2),m=s[0],p=s[1],d=Object(r.useState)(!1),h=Object(b.a)(d,2),v=h[0],E=h[1],j=Object(r.useState)(!1),w=Object(b.a)(j,2),C=w[0],S=w[1],P=function(){var a=Object(g.a)(f.a.mark(function a(n){var r;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=n.tokenAuth.token,console.log("getting token first in confirm mutation"),t.handleAuthentication(r),localStorage.setItem(x,r),e.history.push("/");case 5:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),A=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("_handleError run"),t.graphQLErrors&&(a=t.graphQLErrors[0].message.substring(0,15),k.startsWith(a)?(E(!0),console.log("invalid credentials")):(console.log("unexpect error(s):"),console.log(t),S(!0)));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),$=Object(O.a)(be,{onCompleted:P,onError:A}),N=Object(b.a)($,1)[0],T=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N({variables:{username:i,password:m}}),t.preventDefault();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(re,null,o.a.createElement(me.a,null),o.a.createElement("div",{className:a.paper},o.a.createElement("form",{className:a.form,onSubmit:T},o.a.createElement(fe.a,{container:!0,spacing:2},o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(R.a,{component:"h1",variant:"h5"},"Log In")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",autoFocus:!0,onChange:function(e){return l(e.target.value)},error:v})),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",onChange:function(e){return p(e.target.value)},error:v}),v&&o.a.createElement(de.a,{id:"password",error:v},"Please enter valid credentials")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(z.a,{name:"submit",label:"Submit",type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Log In"),C&&o.a.createElement(de.a,{id:"password",error:C},"Unknown Error Occurred")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(fe.a,{item:!0},o.a.createElement(te.a,{component:D.b,to:"/signup"},"Need an account? Sign up")))))))},Ee=new(a(135));Ee.is().min(6).is().max(100).has().uppercase().has().digits().is().not().oneOf(["password","Password123"]);var Oe=function(e){for(var t="",a=0;a<e.length;a++){a>=1&&(t+=" | ");var n=e[a];"min"===n&&(t+="Password must be at least ".concat(6," characters long")),"max"===n&&(t+="Password must be at most ".concat(100," characters long")),"uppercase"===n&&(t+="Password must have an uppercase letter"),"digits"===n&&(t+="Password must have a digit"),"oneOf"===n&&(t+="Password is too common")}return t};function je(){var e=Object(h.a)(["\nmutation SignupMutation($email: String!, $password: String!, $username: String!){\n    createUser(email: $email, username: $username, password: $password) {\n        user {\n            id\n            username\n            email\n        }\n    }\n}\n"]);return je=function(){return e},e}var ye=E()(je()),we=Object(B.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"50%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}});var xe=function(e){var t=Object(r.useState)(""),n=Object(b.a)(t,2),c=n[0],i=n[1],l=Object(r.useState)(""),u=Object(b.a)(l,2),s=u[0],m=u[1],p=Object(r.useState)(""),d=Object(b.a)(p,2),h=d[0],v=d[1],E=Object(r.useState)(""),j=Object(b.a)(E,2),y=j[0],w=j[1],x=Object(r.useState)(!1),k=Object(b.a)(x,2),S=k[0],P=k[1],A=Object(r.useState)(!1),$=Object(b.a)(A,2),N=$[0],T=($[1],Object(r.useState)(!1)),W=Object(b.a)(T,2),I=W[0],F=W[1],L=Object(r.useState)([]),B=Object(b.a)(L,2),q=B[0],M=B[1],U=Object(r.useState)(!1),_=Object(b.a)(U,2),V=_[0],Q=_[1],J=a(139),H=we(),G=function(){var t=Object(g.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.history.push("/login");case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),Y=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("_handleError run"),t.graphQLErrors&&(a=t.graphQLErrors[0].message.substring(0,10),C.startsWith(a)?P(!0):(console.log("unexpect error(s):"),console.log(t),Q(!0)));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),X=Object(O.a)(ye,{onCompleted:G,onError:Y}),Z=Object(b.a)(X,1)[0],K=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("form submitted"),Z({variables:{username:c,email:s,password:h}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v(t),M(Ee.validate(t,{list:!0})),F(!q);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ae=!!h&&!I,ne=!!y&&!(y===h);return o.a.createElement(re,null,o.a.createElement(me.a,null),o.a.createElement("div",{className:H.paper},o.a.createElement("form",{className:H.form,onSubmit:K},o.a.createElement(fe.a,{container:!0,spacing:2},o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(R.a,{component:"h1",variant:"h5"},"Sign up")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{autoComplete:"username",name:"username",variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",autoFocus:!0,error:S,onChange:function(e){return i(e.target.value)}}),S&&o.a.createElement(de.a,{id:"username",error:S},"Username is taken")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",type:"email",error:N||!!s&&!J.validate(s),onChange:function(e){return m(e.target.value)}}),!!s&&!J.validate(s)&&o.a.createElement(de.a,{id:"email",error:!J.validate(s)},"Email is invalid"),N&&o.a.createElement(de.a,{id:"email",error:N},"Email is taken")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return ee(e.target.value)},error:ae}),ae&&o.a.createElement(de.a,{id:"password",error:ae},Oe(q))),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"current-password",onChange:function(e){return w(e.target.value)},error:ne}),ne&&o.a.createElement(de.a,{id:"confirmPassword",error:ne},"Passwords must match")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(z.a,{name:"submit",label:"Submit",type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:!(y===h)||!c||!s||!I||!J.validate(s)},"Sign Up"),V&&o.a.createElement(de.a,{error:V},"Unknown Error Occurred")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(fe.a,{item:!0},o.a.createElement(te.a,{component:D.b,to:"/login"},"Already have an account? Log in")))))))};var Ce=function(){return Object(r.useContext)(y).logout(),o.a.createElement(F.a,{to:"/login"})},ke=a(7),Se=a(200),Pe=a(193),Ae=a(194),$e=a(71),Ne=a.n($e);function Te(){var e=Object(h.a)(["\nmutation FamilyCreate($familyName: String!, $about: String) {\n  familyCreate(input: {\n    familyName: $familyName\n    about:$about\n  })\n  {\n    family {\n      familyName\n      joinCode\n    }\n  }\n}\n"]);return Te=function(){return e},e}var We=Object(B.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"50%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}),Ie=E()(Te()),De=Object(ke.a)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return o.a.createElement(Pe.a,{disableTypography:!0,className:a.root},o.a.createElement(R.a,{variant:"h6"},t),n?o.a.createElement(_.a,{"aria-label":"close",className:a.closeButton,onClick:n},o.a.createElement(Ne.a,null)):null)}),Fe=Object(ke.a)(function(e){return{root:{padding:e.spacing(2)}}})(Ae.a);function Le(e){var t=We(),a=Object(r.useContext)(y).user.username,n=Object(r.useState)(""),c=Object(b.a)(n,2),i=c[0],l=c[1],u=Object(r.useState)(""),s=Object(b.a)(u,2),m=s[0],p=s[1],d=Object(r.useState)(""),h=Object(b.a)(d,2),v=h[0],E=h[1],j=Object(r.useState)(!1),w=Object(b.a)(j,2),x=w[0],C=w[1],k=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a=t.familyCreate.family.joinCode,E(a),C(!0);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),S=Object(O.a)(Ie,{onCompleted:k}),P=Object(b.a)(S,2),A=P[0],$=P[1].data,N=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("Family name: "+i),console.log("About: "+m),A({variables:{familyName:i,about:m}});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=function(e){e.preventDefault(),C(!1)};return o.a.createElement(re,null,o.a.createElement("h1",null,"Create a Family"),o.a.createElement("p",null,"Families are how you manage your artefacts. We recognise there is often complex overlap between families. That's why you can create and be a part of several families, so you can separate which of the artefacts you manage belong to which family."),o.a.createElement(me.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement("form",{className:t.form,onSubmit:N},o.a.createElement(fe.a,{container:!0,spacing:2},o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(R.a,{component:"h1",variant:"h5"},"Create Family")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"family-name",label:"Family name",autoFocus:!0,onChange:function(e){return l(e.target.value)}})),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",multiline:!0,rows:6,fullWidth:!0,id:"about",label:"Tell people about your family",onChange:function(e){return p(e.target.value)}})),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",disabled:!0,defaultValue:a,fullWidth:!0,id:"family-admin",label:"Family Admin",onChange:function(e){return console.log("hello")}})),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(z.a,{name:"create",label:"Create",type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Create")))),$&&o.a.createElement(Se.a,{open:x,onClose:T},o.a.createElement(De,{onClose:T},"Begin adding members to '",i,"'!"),o.a.createElement(Fe,null,o.a.createElement(R.a,{align:"center"},"Begin getting members to join your family! Simply share the code below to your family members, get them to sign up and then they can join!",o.a.createElement("br",null),v)))))}var Be=a(109);function qe(){var e=Object(h.a)(["\nquery ArtefactStatesQuery($name: String!){\n    __type(name: $name){\n        enumValues{\n            name\n            description\n        }\n    }\n}\n"]);return qe=function(){return e},e}function Me(){var e=Object(h.a)(["\nmutation CreateArtefactMutation($name: String!, $state: String!, $isPublic: Boolean!, $description: String,){\n    artefactCreate(input: {\n        name: $name\n        state: $state\n        description: $description\n        isPublic: $isPublic\n    })\n    {\n        artefact {\n            id\n        }\n    }\n}\n"]);return Me=function(){return e},e}var Ue=Object(B.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"50%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}),Re=E()(Me()),_e=E()(qe()),Ve=Object(ke.a)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return o.a.createElement(Pe.a,{disableTypography:!0,className:a.root},o.a.createElement(R.a,{variant:"h6"},t),n?o.a.createElement(_.a,{"aria-label":"close",className:a.closeButton,onClick:n},o.a.createElement(Ne.a,null)):null)}),Qe=Object(ke.a)(function(e){return{root:{padding:e.spacing(2)}}})(Ae.a);function ze(e){var t=Ue(),a=Object(r.useContext)(y).user.username,n=Object(r.useState)(""),c=Object(b.a)(n,2),i=c[0],l=c[1],u=Object(r.useState)(""),s=Object(b.a)(u,2),m=s[0],p=s[1],d=Object(r.useState)(!1),h=Object(b.a)(d,2),v=h[0],E=h[1],j=Object(r.useState)(!1),w=Object(b.a)(j,2),x=w[0],C=w[1],k=Object(r.useState)(!1),S=Object(b.a)(k,2),P=(S[0],S[1]),A=Object(r.useState)({}),$=Object(b.a)(A,2),N=$[0],T=$[1],W=Object(r.useState)(""),I=Object(b.a)(W,2),D=I[0],F=I[1],L=Object(r.useState)([]),B=Object(b.a)(L,2),q=B[0],M=B[1],U=function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a=t.artefactCreate.artefact.id.id,C(a);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),V=Object(O.a)(Re,{onCompleted:U,onError:_}),Q=Object(b.a)(V,2),J=Q[0],G=Q[1].data,Y=function(){var e=Object(g.a)(f.a.mark(function e(t){var a,n,r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o in a={},t.__type.enumValues)r=t.__type.enumValues[o],n=r.description,a[n]=r.name;T(a);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),X=Object(O.b)(_e,{variables:{name:"ArtefactState"},onCompleted:Y}),Z=(X.loading,X.error,X.data,function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("Artefact name: "+i),console.log("About: "+m),J({variables:{name:i,description:m,state:D,isPublic:v}});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),K=function(e){e.preventDefault(),P(!1)},ee=!i||!D;return o.a.createElement(re,null,o.a.createElement("h1",null,"Create an Artefact"),o.a.createElement("p",null,"$$ Description of what you should enter about an artefact $$ "),o.a.createElement(me.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement("form",{className:t.form,onSubmit:Z},o.a.createElement(fe.a,{container:!0,spacing:2},o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(R.a,{component:"h1",variant:"h5"},"Create Artefact")),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"artefact-name",label:"Artefact name",autoFocus:!0,onChange:function(e){return l(e.target.value)}})),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"state",label:"Please select the state of the artefact",select:!0,className:t.textField,value:D,onChange:function(e){return F(e.target.value)},SelectProps:{MenuProps:{className:t.menu}}},Object.keys(N).map(function(e,t){return o.a.createElement(H.a,{value:N[e],key:e},e)}))),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"public",label:"Is this artefact for public viewing?",select:!0,className:t.textField,value:v,onChange:function(e){return E(e.target.value)},SelectProps:{MenuProps:{className:t.menu}}},[!0,!1].map(function(e,t){return o.a.createElement(H.a,{value:e,key:e},e?"Public":"Not Public")}))),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",multiline:!0,rows:6,fullWidth:!0,value:m,id:"about",label:"Tell people about your artefact",onChange:function(e){return p(e.target.value)}})),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(pe.a,{variant:"outlined",disabled:!0,defaultValue:a,fullWidth:!0,id:"artefact-admin",label:"Artefact Admin",onChange:function(e){return console.log("hello")}})),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(Be.a,{onChange:function(e){return M(q.concat(e))}})),o.a.createElement(fe.a,{item:!0,xs:12},o.a.createElement(z.a,{name:"create",label:"Create",type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:ee},"Create")))),G&&o.a.createElement(Se.a,{open:!1,onClose:K},o.a.createElement(Ve,{onClose:K},"Here's your artefact"),o.a.createElement(Qe,null,o.a.createElement(R.a,{align:"center"},x)))))}function Je(){var e=Object(h.a)(["\n    query DetailView($id: ID!) {\n        artefact(id: $id) {\n            id,\n            name,\n            description,\n            addedAt\n        }\n    }"]);return Je=function(){return e},e}var He=E()(Je());function Ge(e){var t=Object(O.b)(He,{variables:{id:e.match.params.id}}),a=t.data,n=t.loading,r=t.errors;return n?o.a.createElement("p",null,"Loading..."):r?o.a.createElement("p",null,"ERROR!"):o.a.createElement("div",null,o.a.createElement("h1",null,a.artefact.name," - #",a.artefact.id),o.a.createElement("p",null,a.artefact.addedAt),o.a.createElement("p",null,a.artefact.description))}var Ye=a(195),Xe=a(196),Ze=a(197),Ke=a(107),et=a.n(Ke);function tt(){var e=Object(h.a)(["\n        query {\n            me {\n                isMemberOf {\n                    id\n                    familyName\n                    joinCode\n                }\n            }\n        }"]);return tt=function(){return e},e}var at=Object(B.a)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:"80%",height:450},icon:{color:"rgba(255, 255, 255, 0.54)"}}}),nt=[{img:"https://assets.pernod-ricard.com/nz/media_images/test.jpg?hUV74FvXQrWUBk1P2.fBvzoBUmjZ1wct",title:"Title1",author:"Author 1"}],rt=E()(tt());var ot=function(e){var t=at(),a=Object(r.useContext)(y).user.username,n=Object(O.b)(rt),c=n.data,i=n.loading;if(console.log("The data is: ",c),i)return o.a.createElement("p",null,"Loading...");var l=c.me.isMemberOf;return o.a.createElement(re,null,o.a.createElement("h1",null,"Family: ",l[0].familyName),o.a.createElement("h3",null,"Join code: ",l[0].joinCode),o.a.createElement("h4",null,"Your username is: ",a),o.a.createElement("h4",null,"Your families:"),c.me.isMemberOf.map(function(e){return o.a.createElement("p",{key:e.id,id:e.id},e.familyName)}),o.a.createElement("div",{className:t.root},o.a.createElement(Ye.a,{cellHeight:180,className:t.gridList},nt.map(function(e){return o.a.createElement(Xe.a,{key:e.img},o.a.createElement("img",{src:e.img,alt:e.title}),o.a.createElement(Ze.a,{title:e.title,subtitle:o.a.createElement("span",null,"by: ",e.author),actionIcon:o.a.createElement(_.a,{"aria-label":"info about ".concat(e.title),className:t.icon},o.a.createElement(et.a,null))}))}))))},ct=function(e){function t(){return Object($.a)(this,t),Object(T.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return o.a.createElement(D.a,null,o.a.createElement("div",null,o.a.createElement(F.d,null,o.a.createElement(ue,{exact:!0,path:"/",loggedIn:ot,landingPage:!0}),o.a.createElement(F.b,{exact:!0,path:"/login/",component:ve}),o.a.createElement(F.b,{exact:!0,path:"/signup/",component:xe}),o.a.createElement(F.b,{exact:!0,path:"/logout/",component:Ce}),o.a.createElement(ue,{exact:!0,path:"/artefacts/create/",component:ze}),o.a.createElement(ue,{exact:!0,path:"/artefacts/:id/",component:Ge}),o.a.createElement(ue,{exact:!0,path:"/family/create",loggedIn:Le}))))}}]),t}(r.Component);function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?it(a,!0).forEach(function(t){Object(n.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ut=Object(u.a)({uri:S.uri}),st=Object(s.a)(function(e,t){var a=t.headers,n=localStorage.getItem(x);return{headers:lt({},a,{authorization:n?"JWT ".concat(n):""})}}),mt=new l.a({link:st.concat(ut),cache:new m.a});i.a.render(o.a.createElement(p.a,{client:mt},o.a.createElement(function(e){var t=this,a=Object(r.useState)(!1),n=Object(b.a)(a,2),c=n[0],i=n[1],l=Object(r.useState)({}),u=Object(b.a)(l,2),s=u[0],m=u[1],p=Object(r.useState)(""),d=Object(b.a)(p,2),h=d[0],v=d[1],E=Object(O.a)(A),j=Object(b.a)(E,2),y=j[0],C=j[1],k=C.error,S=C.loading,P=function(){var e=Object(g.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=localStorage.getItem(x)),e.next=3,y({variables:{token:t}}).then(function(e){$(e),a&&a()}).catch(function(e){localStorage[x]="",a&&a()});case 3:if(!k){e.next=6;break}return console.log("[Error] handleAuthentication()"),e.abrupt("return");case 6:S&&console.log("Thing is loading");case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),$=function(e){if(k)console.log("Invalid data, please sign in again");else{var t=e.data.verifyToken.payload.username;console.log("Here's the user id: ",e.data.verifyToken.payload.id);var a={username:t};i(!0),v(e.verifyToken),m(a)}},N={authenticated:c,authToken:h,user:s,initiateLogin:function(){t.history.pushState(null,"login")},handleAuthentication:P,logout:function(){console.log("Logout called"),i(!1),m({}),v(""),localStorage[x]=""}};return o.a.createElement(w,{value:N},e.children)},null,o.a.createElement(ct,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[121,1,2]]]);
//# sourceMappingURL=main.1ed4a54f.chunk.js.map