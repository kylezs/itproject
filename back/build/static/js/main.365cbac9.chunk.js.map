{"version":3,"sources":["serviceWorker.js","authContext.js","constants.js","components/Auth.js","components/Loading.js","components/LoggedInBar.js","components/NotLoggedInBar.js","components/Header.js","components/Layout.js","views/LandingPage.js","components/PrivateRoute.js","gqlQueriesMutations.js","views/LoginView.js","components/passwordValidator.js","views/SignupView.js","components/Logout.js","views/CreateFamilyView.js","components/Map.js","views/ArtefactView.js","views/CreateArtefactView.js","views/DetailView.js","components/ArtefactCard.js","views/ManageArtefactsView.js","views/EditArtefactView.js","views/Error404View.js","views/UserHomeView.js","App.js","index.js"],"names":["Boolean","window","location","hostname","match","authContext","createContext","authenticated","user","authToken","initiateLogin","handleAuthentication","logout","AuthProvider","Provider","AUTH_TOKEN","Consumer","USERNAME_TAKEN_ERR_MSG","INVALID_CRED_ERR_MSG","MY_ACCESS_TOKEN","config","uri","VERIFY_TOKEN_MUTATION","gql","Loading","classes","makeStyles","theme","progress","margin","spacing","useStyles","CircularProgress","className","props","React","useState","anchorEl","setAnchorEl","context","useContext","open","handleClose","Button","component","RouterLink","to","color","IconButton","aria-label","aria-controls","aria-haspopup","onClick","event","currentTarget","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","LoginLink","forwardRef","ref","innerRef","SignupLink","underline","root","flexGrow","menuButton","marginRight","title","MenuAppBar","loggedIn","useTheme","dark","palette","type","AppBar","position","Toolbar","edge","Typography","variant","Link","onToggleDarkTheme","LoggedInBar","username","NotLoggedInBar","localStorage","getItem","setItem","console","log","primary","light","main","contrastText","secondary","setTheme","muiTheme","createMuiTheme","ThemeProvider","newPaletteType","Container","children","LandingPage","Layout","WaitWraper","state","checkAuthenticated","this","setState","localToken","Component","contextType","PrivateRoute","LoggedIn","loggedOut","landingPage","path","rest","render","CREATE_ARTEFACT_MUTATION","GET_ARTEFACT_STATES_QUERY","GET_FAMILIES_QUERY","ARTEFACT_DETAIL","UPDATE_ARTEFACT_MUTATION","LOGIN_MUTATION","body","backgroundColor","background","paper","marginTop","display","flexDirection","alignItems","form","width","submit","Login","setUsername","password","setPassword","invalidCred","setInvalidCred","unknownError","setUnknownError","_confirm","data","a","token","tokenAuth","history","push","_handleError","errors","graphQLErrors","subMessage","message","substring","startsWith","useMutation","onCompleted","onError","login","submitForm","variables","preventDefault","onSubmit","justifyContent","Paper","Grid","container","item","xs","TextField","required","fullWidth","label","autoFocus","onChange","e","target","value","error","FormHelperText","name","PASSWORD_SCHEMA","require","is","min","max","has","uppercase","digits","not","oneOf","parseFailedRules","rules","output","i","length","rule","SIGNUP_MUTATION","Signup","email","setEmail","confirmPassword","setConfirmPassword","usernameIsTaken","setUsernameIsTaken","emailIsTaken","validPassword","setValidPassword","failedPassRules","setFailedPassRules","emailValidator","signup","changePassword","pass","failedRules","validate","list","errorPassword","errorConfirmPassword","disableSubmit","autoComplete","disabled","Logout","textField","padding","textAlign","button","CREATE_FAMILY_MUTATION","DialogTitle","withStyles","closeButton","right","top","grey","disableTypography","DialogContent","MuiDialogContent","CreateFamilyView","familyName","setFamilyName","about","setAbout","joinCode","setJoinCode","setOpen","_completed","familyCreate","family","createFamily","CssBaseline","direction","alignContent","justify","multiline","rows","defaultValue","Dialog","align","geocodingService","mbxGeocoding","accessToken","_handleResponse","response","out","features","noResults","results","feature","result","mapState","center","place_type","bboxCoords","bbox","fitBounds","zoom","placeName","place_name","locationType","geocodeQuery","query","types","Promise","resolve","reject","args","limit","reverseGeocode","send","then","forwardGeocode","Mapbox","ReactMapboxGl","interactive","attributionControl","maxZoom","Map","style","mapStyle","containerStyle","height","coordinates","src","alt","formControl","marginLeft","paperTextWrapper","map","marginBottom","flexWrap","iconButton","dropzone","minHeight","withRouter","create","edit","mode","beingEdited","setBeingEdited","prevValue","setPrevValue","currValue","setCurrValue","snackbarOpen","setSnackbarOpen","locationError","locationState","setLocationState","addressIsSearchResult","setAddressIsSearchResult","queryResults","setQueryResults","stateLen","Object","keys","artefact","belong","belongsToFamilies","val","address","errMsg","belongsToFamiliesBools","_pushViewArtefactURL","_creationCompleted","artefactCreate","_handleCreationError","_handleUpdateError","createArtefact","creationErrors","creationLoading","loading","_updateCompleted","updateArtefact","updateErrors","setField","fieldName","prev","handleSetField","famId","_handleGeocodeQuery","noErrors","cancelEditing","handleUnselectedSearchField","reader","FileReader","onabort","onerror","onload","binaryStr","files","forEach","file","readAsArrayBuffer","famIDs","filter","input","description","isPublic","saveChange","artefactInput","SaveButton","CancelButton","EditButtons","handleCloseSnackbar","reason","dataLoading","familyLoading","statesLoading","sm","FormControl","select","artefactStates","key","admin","List","subheader","ListSubheader","dense","ListItem","ListItemIcon","Checkbox","checked","tabIndex","ListItemText","families","initialFiles","dropzoneClass","InputProps","endAdornment","onKeyDown","keyCode","document","getElementById","click","helperText","Collapse","in","timeout","unmountOnExit","disablePadding","nested","handleSetLocationResult","ClickAwayListener","onClickAway","Snackbar","autoHideDuration","ContentProps","action","size","close","EditArtefactView","setArtefactStates","_saveArtefactStates","statesData","temp","__type","enumValues","desc","useQuery","setFamilies","me","isMemberOf","DetailView","params","addedAt","card","maxWidth","media","ArtefactCard","mediaURI","Card","CardActionArea","CardMedia","image","CardContent","zeroMinWidth","gutterBottom","noWrap","CardActions","LIST_OF_ARTEFACTS","ManageArtefactsView","artefactEdges","SetArtefactEdges","first","artefactAdministratorOf","edges","node","setArtefact","_genericHandleError","_saveArtefact","artefactLoading","Error404View","href","overflow","gridList","icon","HOMEPAGE_INFO","JOIN_FAMILY_MUTATION","SELECT_FAMILY_MUTATION","UserHomeView","formJoinCode","setFormJoinCode","refetchQueries","joinFamilyMutation","profile","selectedFamily","_homepageInfoCompleted","home_data","called","selectFamily","inputLabel","useRef","profileId","artefacts","hasArtefacts","GridList","cellHeight","cols","GridListTile","upload","InputLabel","htmlFor","Select","newFamily","toFamily","inputProps","styles","App","exact","CreateArtefactView","httpLink","createHttpLink","authLink","setContext","_","headers","authorization","client","ApolloClient","link","concat","cache","InMemoryCache","ReactDOM","setAuthenticated","setUser","setAuthToken","VerifyToken","_callback","setSession","catch","verifyToken","payload","authProviderValue","pushState","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.365cbac9.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createContext } from \"react\";\n\nconst authContext = createContext({\n    authenticated: false, // to check if authenticated or not\n    user: {}, // store all the user details\n    authToken: \"\", \n    initiateLogin: () => { }, \n    handleAuthentication: () => { }, \n    logout: () => { }\n});\n\nexport default authContext;\nexport const AuthProvider = authContext.Provider;\nexport const AuthConsumer = authContext.Consumer;","export const AUTH_TOKEN = 'auth-token'\nexport const THEME_TYPE = 'theme-type'\nexport const USERNAME_TAKEN_ERR_MSG = `duplicate key`\nexport const INVALID_CRED_ERR_MSG = `Please, enter valid credentials`\nexport const MY_ACCESS_TOKEN =\n           'pk.eyJ1IjoiemR1ZmZpZWxkIiwiYSI6ImNrMWdkODhpOTBiM28zZG03eDdjZ2dmN24ifQ.vAzlFYY5S9O82SKnwX69kQ'\n\n// GQL API for prod vs dev\n\n// Whatever server the app is on, /graphql/\nconst prod = {\n    uri: '/graphql/'\n}\n\n// In case running dev on either :8000 or :3000, this must be specified as full path\nconst dev = {\n    uri: 'http://localhost:8000/graphql/'\n}\n\n// If npm run build => production, if npm start => development (built into react)\nexport const config = process.env.NODE_ENV === 'development' ? dev : prod\n","import React, { useState } from \"react\";\nimport gql from 'graphql-tag';\nimport { useMutation } from '@apollo/react-hooks';\nimport { AuthProvider } from \"../authContext\";\nimport { AUTH_TOKEN } from '../constants'\n\n\nconst VERIFY_TOKEN_MUTATION = gql`\nmutation VerifyToken($token: String!) {\n    verifyToken(token: $token) {\n        payload\n    }\n}\n`\n\nexport default function Auth(props) {\n    const [authenticated, setAuthenticated] = useState(false)\n    const [user, setUser] = useState({})\n    const [authToken, setAuthToken] = useState(\"\");\n    const [VerifyToken, {error, loading }] = useMutation(VERIFY_TOKEN_MUTATION)\n\n    const handleAuthentication = async (authToken, _callback) => {\n        if (!authToken) {\n            authToken = localStorage.getItem(AUTH_TOKEN)\n        }\n\n        await VerifyToken({ variables: { token: authToken } }).then((data) => {\n            setSession(data)\n            if (_callback) {\n                _callback();\n            }\n        }).catch((errors) => {\n            // If could not validate it, remove it to stop unnecessary requests\n            localStorage[AUTH_TOKEN] = \"\"\n            if (_callback) {\n                _callback();\n            }\n        }\n\n        );\n        if (error) {\n            console.log(\"[Error] handleAuthentication()\")\n            return;\n        }\n\n        if (loading) {\n            console.log(\"Thing is loading\");\n        }\n\n    };\n\n    const setSession = (data) => {\n\n        if (error) {\n            console.log(\"Invalid data, please sign in again\");\n            return;\n        }\n\n        const username = data.data.verifyToken.payload.username\n        console.log(\"Here's the user id: \", data.data.verifyToken.payload.id);\n        const user = {\n            username: username,\n        };\n        setAuthenticated(true);\n        setAuthToken(data.verifyToken);\n        setUser(user);\n    }\n\n    const initiateLogin = () => {\n        this.history.pushState(null, 'login');\n    };\n\n    const logout = () => {\n        console.log(\"Logout called\");\n        setAuthenticated(false);\n        setUser({});\n        setAuthToken(\"\");\n        localStorage[AUTH_TOKEN] = \"\";\n    };\n\n    const authProviderValue = {\n        authenticated,\n        authToken,\n        user,\n        initiateLogin: initiateLogin,\n        handleAuthentication: handleAuthentication,\n        logout: logout\n    };\n\n    return (\n        <AuthProvider value={authProviderValue}>\n            {props.children}\n        </AuthProvider>\n    );\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nfunction Loading() {\n    const useStyles = makeStyles(theme => ({\n        progress: {\n            margin: theme.spacing(2)\n        }\n    }))\n\n    const classes = useStyles()\n\n    return <CircularProgress className={classes.progress} />\n}\n\nexport default Loading\n","import React, { useContext } from 'react';\nimport { IconButton, Menu, MenuItem, Button } from '@material-ui/core';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport authContext from '../authContext';\nimport { Link as RouterLink } from 'react-router-dom'\n\nexport default props => {\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const context = useContext(authContext);\n    const open = Boolean(anchorEl);\n\n    function handleMenu(event) {\n        setAnchorEl(event.currentTarget);\n    }\n\n    function handleClose() {\n        setAnchorEl(null);\n    }\n\n    function handleLogout() {\n        context.logout();\n    }\n\n    return (\n        <div>\n            <Button component={RouterLink} to='/family/create' color='inherit'>\n                Create Family\n            </Button>\n            <Button\n                component={RouterLink}\n                to='/artefacts/manage'\n                color='inherit'\n            >\n                Manage Artefacts\n            </Button>\n            <Button\n                component={RouterLink}\n                to='/artefacts/create'\n                color='inherit'\n            >\n                Create Artefact\n            </Button>\n            <IconButton\n                aria-label='account of current user'\n                aria-controls='menu-appbar'\n                aria-haspopup='true'\n                onClick={handleMenu}\n                color='inherit'\n            >\n                <AccountCircle />\n            </IconButton>\n            <Menu\n                id='menu-appbar'\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right'\n                }}\n                keepMounted\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right'\n                }}\n                open={open}\n                onClose={handleClose}\n            >\n                <MenuItem onClick={handleClose}>Profile</MenuItem>\n                <MenuItem onClick={handleClose}>Settings</MenuItem>\n                <MenuItem onClick={handleLogout}>Logout</MenuItem>\n            </Menu>\n        </div>\n    )\n};\n","import React from 'react';\nimport { Button } from '@material-ui/core';\nimport { Link as RouterLink } from 'react-router-dom';\n\nconst LoginLink = React.forwardRef((props, ref) => (\n    <RouterLink innerRef={ref} to=\"/login\" {...props} />\n));\n\nconst SignupLink = React.forwardRef((props, ref) => (\n    <RouterLink innerRef={ref} to=\"/signup\" {...props} />\n));\n\n\nexport default props => {\n    return (\n        <div>\n            <Button color=\"inherit\" underline=\"none\" component={SignupLink}>Sign up</Button>\n            <Button color=\"inherit\" underline=\"none\" component={LoginLink}>Login</Button>\n        </div>\n    );\n};\n","import React, { useContext } from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n    IconButton,\n    Typography,\n    Toolbar,\n    AppBar\n} from '@material-ui/core'\nimport MenuIcon from '@material-ui/icons/Menu'\n\nimport Brightness3Icon from '@material-ui/icons/Brightness3';\nimport BrightnessHighIcon from '@material-ui/icons/BrightnessHigh';\n\nimport LoggedInBar from './LoggedInBar'\nimport NotLoggedInBar from './NotLoggedInBar'\nimport { Link as RouterLink } from 'react-router-dom'\nimport { Link } from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\n\nimport authContext from '../authContext'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        flexGrow: 1\n    },\n    menuButton: {\n        marginRight: theme.spacing(2)\n    },\n    title: {\n        flexGrow: 1\n    }\n}))\n\nexport default function MenuAppBar(props) {\n    const classes = useStyles()\n    const context = useContext(authContext)\n    let loggedIn = context.authenticated\n    let username = null\n    const theme = useTheme()\n    const dark = (theme && theme.palette.type === 'dark')\n    return (\n        <div className={classes.root}>\n            <AppBar position='static'>\n                <Toolbar>\n                    <IconButton\n                        edge='start'\n                        className={classes.menuButton}\n                        color='inherit'\n                        aria-label='menu'\n                    >\n                        <MenuIcon />\n                    </IconButton>\n                    <Typography variant='h6' className={classes.title}>\n                        <Link\n                            component={RouterLink}\n                            to='/'\n                            color='inherit'\n                            variant='inherit'\n                            underline='none'\n                        >\n                            Family AR\n                        </Link>\n                    </Typography>\n\n                    <IconButton\n                        edge='start'\n                        className={classes.menuButton}\n                        color='inherit'\n                        aria-label='menu'\n                        onClick={props.onToggleDarkTheme}\n                    >\n                        {!dark ? <Brightness3Icon /> : <BrightnessHighIcon />}\n                    </IconButton>\n\n                    {loggedIn && <LoggedInBar username={username} />}\n                    {!loggedIn && <NotLoggedInBar />}\n                </Toolbar>\n            </AppBar>\n        </div>\n    )\n}\n","import React, { useState } from 'react'\nimport { Container } from '@material-ui/core'\nimport Header from './Header'\n\nimport { createMuiTheme } from '@material-ui/core/styles'\nimport { ThemeProvider } from '@material-ui/styles'\n\nimport { THEME_TYPE } from '../constants.js'\n\nexport default props => {\n    if (!localStorage.getItem(THEME_TYPE)){\n        localStorage.setItem(THEME_TYPE, 'light')\n        console.log(\"here\")\n    }\n\n    const [theme, setTheme] = useState({\n        palette: {\n            primary: {\n                light: '#757ce8',\n                main: '#3f50b5',\n                dark: '#002884',\n                contrastText: '#fff'\n            },\n            secondary: {\n                light: '#ff7961',\n                main: '#f44336',\n                dark: '#ba000d',\n                contrastText: '#000'\n            },\n            type: localStorage.getItem(THEME_TYPE) || 'light'\n        }\n    })\n\n    const toggleDarkTheme = () => {\n        var newPaletteType = theme.palette.type === 'light' ? 'dark' : 'light'\n        localStorage.setItem(THEME_TYPE, newPaletteType)\n        setTheme({\n            palette: {\n                ...theme.palette,\n                type: newPaletteType\n            }\n        })\n    }\n\n    const muiTheme = createMuiTheme(theme)\n\n    return (\n        <div>\n            <ThemeProvider theme={muiTheme}>\n                <Header onToggleDarkTheme={toggleDarkTheme} />\n                <Container>{props.children}</Container>\n            </ThemeProvider>\n        </div>\n    )\n}\n","import React from 'react'\nimport Layout from '../components/Layout'\n\n// NB: REMOVE THE LAYOUT, THIS SHOULD NOT HAVE THE APP BAR, THIS SHOULD BE EXTRA COOL DESIGNED PAGE\nfunction LandingPage(props) {\n    return (\n        <Layout>\n            This is some cool landing page yo. Welcome!\n            <br />\n            Also, in the future, this page should not have a navigation bar,\n            it'll have cooler design stuff. It only has the nav bar for easier\n            linking to signup / login for now\n        </Layout>\n    )\n}\nexport default LandingPage\n","import React, { Component, useContext } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport authContext from '../authContext';\nimport { AUTH_TOKEN } from '../constants';\nimport Loading from './Loading';\nimport LandingPage from '../views/LandingPage';\n\n\nclass WaitWraper extends Component {\n    state = { checkAuthenticated: false }\n    static contextType = authContext;\n\n    componentDidMount() {\n        if (this.context.authenticated) {\n            this.setState({checkAuthenticated: true})\n        }\n        const localToken = localStorage.getItem(AUTH_TOKEN);\n\n        // If there's no token, then they can't have been logged in i.e. checkauthenticated complete\n        if (!this.context.authenticated && localToken) {\n            this.context.handleAuthentication(localToken, () => {\n                console.log(\"Setting state\");\n                this.setState({checkAuthenticated: true})\n            });\n        } else {\n            this.setState({ checkAuthenticated: true })\n        }\n    }\n\n    render() {\n        // Render the children with a function using state as the argument\n        return this.props.children(this.state.checkAuthenticated);\n    }\n}\n\nexport const PrivateRoute = ({loggedIn: LoggedIn, loggedOut, path, landingPage, ...rest}) => {\n    const context = useContext(authContext);\n    const authenticated = context.authenticated;\n\n    if (!loggedOut) {\n        loggedOut = \"/login\"\n    }\n\n    console.log(\"Authenticated: \", authenticated)\n    return (\n        <WaitWraper>\n            {checkAuthenticated => checkAuthenticated === false\n            ? <Loading />\n            : <Route {...rest}\n                render={props => {\n                    if (authenticated) {\n                        return <LoggedIn {...props} />\n                    } else if (!authenticated && landingPage) {\n                        return <LandingPage />;\n                    } else {\n                        return (\n                            <Redirect to={loggedOut} />\n                        )\n                    }\n                }} />\n            }\n        </WaitWraper>\n    )\n}","import gql from 'graphql-tag'\n\n// Get the id back to allow for querying for the artefact later\nexport const CREATE_ARTEFACT_MUTATION = gql`\n    mutation CreateArtefactMutation(\n        $name: String!\n        $state: String!\n        $isPublic: Boolean\n        $description: String!\n        $belongsToFamilies: [ID]\n        $address: String\n    ) {\n        artefactCreate(\n            input: {\n                name: $name\n                state: $state\n                description: $description\n                isPublic: $isPublic\n                belongsToFamilies: $belongsToFamilies\n                address: $address\n            }\n        ) {\n            artefact {\n                id\n            }\n        }\n    }\n`\n\nexport const GET_ARTEFACT_STATES_QUERY = gql`\n    query ArtefactStatesQuery($name: String!) {\n        __type(name: $name) {\n            enumValues {\n                name\n                description\n            }\n        }\n    }\n`\n\nexport const GET_FAMILIES_QUERY = gql`\n    query artefactsQuery {\n        me {\n            isMemberOf {\n                familyName\n                id\n            }\n        }\n    }\n`\n\nexport const ARTEFACT_DETAIL = gql`\n    query DetailView($id: ID!) {\n        artefact(id: $id) {\n            id\n            name\n            description\n            admin {\n                id\n                username\n            }\n            state\n            isPublic\n            upload\n            belongsToFamilies {\n                id\n            }\n            addedAt\n            address\n        }\n    }\n`\n\nexport const UPDATE_ARTEFACT_MUTATION = gql`\n    mutation UpdateArtefactMutation(\n        $id: ID!\n        $artefactInput: ArtefactInputType!\n    ) {\n        artefactUpdate(id: $id, input: $artefactInput) {\n            artefact {\n                id\n            }\n        }\n    }\n`\n\nexport const LOGIN_MUTATION = gql`\n    mutation TokenAuth($username: String!, $password: String!) {\n        tokenAuth(username: $username, password: $password) {\n            token\n        }\n    }\n`\n","import React, { useState, useContext } from 'react'\nimport {\n    Button,\n    TextField,\n    FormHelperText,\n    Link,\n    Grid,\n    Typography,\n    Paper,\n    Container\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Link as RouterLink } from 'react-router-dom'\nimport authContext from '../authContext'\nimport { useMutation } from '@apollo/react-hooks'\nimport { AUTH_TOKEN, INVALID_CRED_ERR_MSG } from '../constants.js'\n\nimport { LOGIN_MUTATION } from '../gqlQueriesMutations'\n\nconst useStyles = makeStyles(theme => ({\n    '@global': {\n        body: {\n            backgroundColor: theme.palette.background.paper\n        }\n    },\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        backgroundColor: theme.palette.background.paper\n    },\n    form: {\n        width: '50%', // Fix IE 11 issue.\n        marginTop: theme.spacing(3),\n        backgroundColor: theme.palette.background.paper\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2)\n    }\n}))\n\nfunction Login(props) {\n    const context = useContext(authContext)\n    const classes = useStyles()\n\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [invalidCred, setInvalidCred] = useState(false)\n    const [unknownError, setUnknownError] = useState(false)\n\n    const _confirm = async data => {\n        const { token } = data.tokenAuth\n        console.log('getting token first in confirm mutation')\n        context.handleAuthentication(token)\n        localStorage.setItem(AUTH_TOKEN, token)\n\n        // this._saveUserData(token)\n        props.history.push(`/`)\n    }\n\n    const _handleError = async errors => {\n        console.log('_handleError run')\n        if (errors.graphQLErrors) {\n            const subMessage = errors.graphQLErrors[0].message.substring(0, 15)\n            if (INVALID_CRED_ERR_MSG.startsWith(subMessage)) {\n                setInvalidCred(true)\n                console.log('invalid credentials')\n            } else {\n                console.log('unexpect error(s):')\n                console.log(errors)\n                setUnknownError(true)\n            }\n        }\n    }\n\n    const [login] = useMutation(LOGIN_MUTATION, {\n        onCompleted: _confirm,\n        onError: _handleError\n    })\n\n    const submitForm = async event => {\n        login({ variables: { username: username, password: password } })\n        event.preventDefault()\n    }\n\n    return (\n        <form className={classes.form} onSubmit={submitForm}>\n            <Container justifyContent='center'>\n                <Paper className={classes.paper}>\n                    <Grid container spacing={2}>\n                        <Grid item xs={12}>\n                            <Typography component='h1' variant='h5'>\n                                Log In\n                            </Typography>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField\n                                variant='outlined'\n                                required\n                                fullWidth\n                                id='username'\n                                label='Username'\n                                autoFocus\n                                onChange={e => setUsername(e.target.value)}\n                                error={invalidCred}\n                            />\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <TextField\n                                variant='outlined'\n                                required\n                                fullWidth\n                                label='Password'\n                                type='password'\n                                id='password'\n                                onChange={e => setPassword(e.target.value)}\n                                error={invalidCred}\n                            />\n                            {invalidCred && (\n                                <FormHelperText\n                                    id='password'\n                                    error={invalidCred}\n                                >\n                                    Please enter valid credentials\n                                </FormHelperText>\n                            )}\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <Button\n                                name='submit'\n                                label='Submit'\n                                type='submit'\n                                fullWidth\n                                variant='contained'\n                                color='primary'\n                            >\n                                Log In\n                            </Button>\n                            {unknownError && (\n                                <FormHelperText\n                                    id='password'\n                                    error={unknownError}\n                                >\n                                    Unknown Error Occurred\n                                </FormHelperText>\n                            )}\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <Grid item>\n                                <Link component={RouterLink} to='/signup'>\n                                    Need an account? Sign up\n                                </Link>\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Container>\n        </form>\n    )\n}\n\nexport default Login\n","var passwordValidator = require('password-validator');\n\n// Create a schema\nexport var PASSWORD_SCHEMA = new passwordValidator();\n\nconst min_len = 6\nconst max_len = 100\n\n// NOTE: for every rule added to the Schema, a corresponding parsing conditional should be added below\nPASSWORD_SCHEMA\n    .is().min(min_len)                                    // Minimum length 8\n    .is().max(max_len)                                  // Maximum length 100\n    .has().uppercase()                              // Must have uppercase letters\n    .has().digits()                                 // Must have digits\n    .is().not().oneOf(['password', 'Password123']); // Blacklist these values\n    // .has().lowercase()                              // Must have lowercase letters\n    // .has().not().spaces()                           // Should not have spaces\n\nexport const parseFailedRules = (rules) => {\n    var output = ''\n    for (var i=0; i < rules.length; i++){\n        if (i >=1) output += \" | \"\n        \n        var rule = rules[i]\n        if (rule === 'min'){\n            output += `Password must be at least ${min_len} characters long`\n        }\n        if (rule === 'max') {\n            output += `Password must be at most ${max_len} characters long`\n        }\n        if (rule === 'uppercase') {\n            output += `Password must have an uppercase letter`\n        }\n        if (rule === 'digits') {\n            output += `Password must have a digit`\n        }\n        if (rule === 'oneOf') {\n            output += `Password is too common`\n        }\n    }\n    return output\n}","import React, { useState } from 'react'\nimport Button from '@material-ui/core/Button'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport TextField from '@material-ui/core/TextField'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport Link from '@material-ui/core/Link'\nimport { Link as RouterLink } from 'react-router-dom'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Layout from '../components/Layout'\n\nimport gql from 'graphql-tag'\nimport { useMutation } from '@apollo/react-hooks'\nimport { USERNAME_TAKEN_ERR_MSG } from '../constants.js'\nimport {\n    PASSWORD_SCHEMA,\n    parseFailedRules\n} from '../components/passwordValidator.js'\nimport { Paper } from '@material-ui/core'\n\nconst SIGNUP_MUTATION = gql`\n    mutation SignupMutation(\n        $email: String!\n        $password: String!\n        $username: String!\n    ) {\n        createUser(email: $email, username: $username, password: $password) {\n            user {\n                id\n                username\n                email\n            }\n        }\n    }\n`\n\nconst useStyles = makeStyles(theme => ({\n    '@global': {\n        body: {\n            backgroundColor: theme.palette.background.paper\n        }\n    },\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        backgroundColor: theme.palette.background.paper\n    },\n    form: {\n        width: '50%', // Fix IE 11 issue.\n        marginTop: theme.spacing(3)\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2)\n    }\n}))\n\nfunction Signup(props) {\n    const [username, setUsername] = useState('')\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [confirmPassword, setConfirmPassword] = useState('')\n    const [usernameIsTaken, setUsernameIsTaken] = useState(false)\n    const [emailIsTaken, setEmailIsTaken] = useState(false)\n    const [validPassword, setValidPassword] = useState(false)\n    const [failedPassRules, setFailedPassRules] = useState([])\n    const [unknownError, setUnknownError] = useState(false)\n\n    var emailValidator = require('email-validator')\n\n    const classes = useStyles()\n    const _confirm = async data => {\n        // handle signup errors and potentially login\n        props.history.push(`/login`)\n    }\n\n    const _handleError = async errors => {\n        console.log('_handleError run')\n        if (errors.graphQLErrors) {\n            const subMessage = errors.graphQLErrors[0].message.substring(0, 10)\n            if (USERNAME_TAKEN_ERR_MSG.startsWith(subMessage)) {\n                setUsernameIsTaken(true)\n            } else {\n                console.log('unexpect error(s):')\n                console.log(errors)\n                setUnknownError(true)\n            }\n        }\n    }\n\n    const [signup] = useMutation(SIGNUP_MUTATION, {\n        onCompleted: _confirm,\n        onError: _handleError\n    })\n\n    const submitForm = async event => {\n        event.preventDefault()\n        console.log('form submitted')\n        signup({\n            variables: { username: username, email: email, password: password }\n        })\n    }\n\n    const changePassword = async pass => {\n        setPassword(pass)\n\n        // password validation\n        var failedRules = PASSWORD_SCHEMA.validate(pass, { list: true })\n        setFailedPassRules(failedRules)\n        if (failedRules.length !== 0) {\n            setValidPassword(false)\n        } else {\n            setValidPassword(true)\n        }\n    }\n\n    const errorPassword = !!password && !validPassword\n    const errorConfirmPassword =\n        !!confirmPassword && !(confirmPassword === password)\n\n    const disableSubmit =\n        (!!password && (!(confirmPassword === password) || !validPassword)) ||\n        (!!email && !emailValidator.validate(email))\n\n    return (\n        <Paper className={classes.paper}>\n            <form className={classes.form} onSubmit={submitForm}>\n                <Grid container spacing={2}>\n                    <Grid item xs={12}>\n                        <Typography component='h1' variant='h5'>\n                            Sign up\n                        </Typography>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <TextField\n                            autoComplete='username'\n                            name='username'\n                            variant='outlined'\n                            required\n                            fullWidth\n                            id='username'\n                            label='Username'\n                            autoFocus\n                            error={usernameIsTaken}\n                            onChange={e => setUsername(e.target.value)}\n                        />\n                        {usernameIsTaken && (\n                            <FormHelperText\n                                id='username'\n                                error={usernameIsTaken}\n                            >\n                                Username is taken\n                            </FormHelperText>\n                        )}\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <TextField\n                            variant='outlined'\n                            required\n                            fullWidth\n                            id='email'\n                            label='Email Address'\n                            name='email'\n                            autoComplete='email'\n                            type='email'\n                            error={\n                                emailIsTaken ||\n                                (!!email && !emailValidator.validate(email))\n                            }\n                            onChange={e => setEmail(e.target.value)}\n                        />\n                        {!!email && !emailValidator.validate(email) && (\n                            <FormHelperText\n                                id='email'\n                                error={!emailValidator.validate(email)}\n                            >\n                                Email is invalid\n                            </FormHelperText>\n                        )}\n                        {emailIsTaken && (\n                            <FormHelperText id='email' error={emailIsTaken}>\n                                Email is taken\n                            </FormHelperText>\n                        )}\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <TextField\n                            variant='outlined'\n                            required\n                            fullWidth\n                            name='password'\n                            label='Password'\n                            type='password'\n                            id='password'\n                            autoComplete='current-password'\n                            onChange={e => changePassword(e.target.value)}\n                            error={errorPassword}\n                        />\n                        {errorPassword && (\n                            <FormHelperText id='password' error={errorPassword}>\n                                {parseFailedRules(failedPassRules)}\n                            </FormHelperText>\n                        )}\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <TextField\n                            variant='outlined'\n                            required\n                            fullWidth\n                            name='confirmPassword'\n                            label='Confirm Password'\n                            type='password'\n                            id='confirmPassword'\n                            autoComplete='current-password'\n                            onChange={e => setConfirmPassword(e.target.value)}\n                            error={errorConfirmPassword}\n                        />\n                        {errorConfirmPassword && (\n                            <FormHelperText\n                                id='confirmPassword'\n                                error={errorConfirmPassword}\n                            >\n                                Passwords must match\n                            </FormHelperText>\n                        )}\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Button\n                            name='submit'\n                            label='Submit'\n                            type='submit'\n                            fullWidth\n                            variant='contained'\n                            color='primary'\n                            disabled={disableSubmit}\n                        >\n                            Sign Up\n                        </Button>\n                        {unknownError && (\n                            <FormHelperText error={unknownError}>\n                                Unknown Error Occurred\n                            </FormHelperText>\n                        )}\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Grid item>\n                            <Link component={RouterLink} to='/login'>\n                                Already have an account? Log in\n                            </Link>\n                        </Grid>\n                    </Grid>\n                </Grid>\n            </form>\n        </Paper>\n    )\n}\n\nexport default Signup\n","import React, { useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport authContext from '../authContext';\n\nfunction Logout() {\n    const context = useContext(authContext);\n    context.logout();\n\n    return (\n        <Redirect to='/login' />\n    );\n}\n\nexport default Logout;\n","import React, { useContext, useState } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport Layout from '../components/Layout'\nimport authContext from '../authContext'\nimport Button from '@material-ui/core/Button'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport TextField from '@material-ui/core/TextField'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\nimport gql from 'graphql-tag'\nimport { useMutation } from '@apollo/react-hooks'\nimport Dialog from '@material-ui/core/Dialog'\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\nimport MuiDialogContent from '@material-ui/core/DialogContent'\nimport { IconButton } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { Paper } from '@material-ui/core'\n\nconst useStyles = makeStyles(theme => ({\n    textField: {\n        // marginLeft: theme.spacing(1),\n        // marginRight: theme.spacing(1),\n        padding: theme.spacing(1),\n        textAlign: 'center',\n        marginTop: theme.spacing(1)\n    },\n    paper: {\n        marginTop: theme.spacing(1),\n        padding: theme.spacing(1),\n        textAlign: 'center'\n    },\n    button: {\n        margin: theme.spacing(1)\n    }\n}))\n\n// Get the familyName and joinCode back to present to the user straight away after\n// successful creation\nconst CREATE_FAMILY_MUTATION = gql`\n    mutation FamilyCreate($familyName: String!, $about: String) {\n        familyCreate(input: { familyName: $familyName, about: $about }) {\n            family {\n                familyName\n                joinCode\n            }\n        }\n    }\n`\n\nconst styles = theme => ({\n    root: {\n        margin: 0,\n        padding: theme.spacing(2)\n    },\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500]\n    }\n})\n\nconst DialogTitle = withStyles(styles)(props => {\n    const { children, classes, onClose } = props\n    return (\n        <MuiDialogTitle disableTypography className={classes.root}>\n            <Typography variant='h6'>{children}</Typography>\n            {onClose ? (\n                <IconButton\n                    aria-label='close'\n                    className={classes.closeButton}\n                    onClick={onClose}\n                >\n                    <CloseIcon />\n                </IconButton>\n            ) : null}\n        </MuiDialogTitle>\n    )\n})\n\nconst DialogContent = withStyles(theme => ({\n    root: {\n        padding: theme.spacing(2)\n    }\n}))(MuiDialogContent)\n\nexport default function CreateFamilyView(props) {\n    const classes = useStyles()\n\n    const context = useContext(authContext)\n    const username = context.user.username\n\n    const [familyName, setFamilyName] = useState('')\n    const [about, setAbout] = useState('')\n    const [joinCode, setJoinCode] = useState('')\n    const [open, setOpen] = useState(false)\n\n    const _completed = async data => {\n        console.log(data)\n        const { joinCode } = data.familyCreate.family\n        setJoinCode(joinCode)\n        setOpen(true)\n    }\n\n    const [createFamily, { data }] = useMutation(CREATE_FAMILY_MUTATION, {\n        onCompleted: _completed\n    })\n\n    const submitForm = async event => {\n        event.preventDefault()\n        console.log('Family name: ' + familyName)\n        console.log('About: ' + about)\n        createFamily({\n            variables: {\n                familyName: familyName,\n                about: about\n            }\n        })\n    }\n\n    const handleClose = event => {\n        event.preventDefault()\n        setOpen(false)\n    }\n\n    return (\n        <Layout>\n            <CssBaseline />\n            <form className={classes.form} onSubmit={submitForm}>\n                <Grid\n                    container\n                    spacing={2}\n                    direction='row'\n                    alignItems='stretch'\n                    alignContent='stretch'\n                    justify='space-evenly'\n                >\n                    <Grid item xs={12}>\n                        <Paper className={classes.paper}>\n                            <Typography variant='h4'>Create Family</Typography>\n                            <Typography variant='subtitle1'>\n                                Families are how you manage your artefacts. We\n                                recognise there is often complex overlap between\n                                families. That's why you can create and be a\n                                part of several families, so you can separate\n                                which of the artefacts you manage belong to\n                                which family.\n                            </Typography>\n                        </Paper>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Paper className={classes.paper}>\n                            <TextField\n                                className={classes.textField}\n                                variant='outlined'\n                                required\n                                fullWidth\n                                id='family-name'\n                                label='Family name'\n                                autoFocus\n                                onChange={e => setFamilyName(e.target.value)}\n                            />\n                        </Paper>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Paper className={classes.paper}>\n                            <TextField\n                                className={classes.textField}\n                                variant='outlined'\n                                multiline\n                                rows={6}\n                                fullWidth\n                                id='about'\n                                label='Tell people about your family'\n                                onChange={e => setAbout(e.target.value)}\n                            />\n                        </Paper>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Paper className={classes.paper}>\n                            <TextField\n                                className={classes.textField}\n                                variant='outlined'\n                                disabled\n                                defaultValue={username}\n                                fullWidth\n                                id='family-admin'\n                                label='Family Admin'\n                                onChange={e => console.log('hello')}\n                            />\n                        </Paper>\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <Button\n                            name='create'\n                            label='Create'\n                            type='submit'\n                            fullWidth\n                            variant='contained'\n                            color='primary'\n                        >\n                            Create\n                        </Button>\n                    </Grid>\n                </Grid>\n            </form>\n\n            {data && (\n                <Dialog open={open} onClose={handleClose}>\n                    <DialogTitle onClose={handleClose}>\n                        Begin adding members to '{familyName}'!\n                    </DialogTitle>\n                    <DialogContent>\n                        <Typography align='center'>\n                            Begin getting members to join your family! Simply\n                            share the code below to your family members, get\n                            them to sign up and then they can join!\n                            <br />\n                            {joinCode}\n                        </Typography>\n                    </DialogContent>\n                </Dialog>\n            )}\n        </Layout>\n    )\n}\n","import React, { Fragment } from 'react'\nimport ReactMapboxGl, { Layer, Feature, Marker, Popup } from 'react-mapbox-gl'\nimport { MY_ACCESS_TOKEN } from '../constants'\n\nconst mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding')\nconst geocodingService = mbxGeocoding({ accessToken: MY_ACCESS_TOKEN })\n\nconst _handleResponse = response => {\n    var out = {}\n    console.log('GEOCODING RESPONSE: ', response.body)\n    const features = response.body.features\n    if (!features) {\n        out.noResults = true\n        return out\n    }\n    var results = []\n    for (var i = 0; i < features.length; i++) {\n        var feature = features[i]\n        var result = {}\n        result.mapState = { center: feature.center }\n\n        if (feature.place_type[0] === 'place') {\n            const bboxCoords = feature.bbox\n            const bbox = [\n                [bboxCoords[0], bboxCoords[1]],\n                [bboxCoords[2], bboxCoords[3]]\n            ]\n            result.mapState.fitBounds = bbox\n        } else if (feature.place_type[0] === 'address') {\n            result.mapState.zoom = [15]\n        }\n        result.placeName = feature.place_name\n        result.locationType = feature.place_type[0]\n        results.push(result)\n    }\n    out.results = results\n    return out\n}\n\nconst _handleError = error => {\n    var out = {}\n    console.log('query error occurred')\n    out.error = error\n    return out\n}\n\nexport const geocodeQuery = (query, types) => {\n    if (!query) {\n        return new Promise(function(resolve, reject) {\n            resolve()\n        })\n    }\n\n    var args = {\n        query: query,\n        limit: 5\n    }\n    if (types) args.types = types\n\n    if (typeof query === 'object') {\n        return geocodingService\n            .reverseGeocode(args)\n            .send()\n            .then(\n                response => _handleResponse(response),\n                error => _handleError(error)\n            )\n    } else if (typeof query === 'string') {\n        return geocodingService\n            .forwardGeocode(args)\n            .send()\n            .then(\n                response => _handleResponse(response),\n                error => _handleError(error)\n            )\n    }\n}\n\nconst Mapbox = ReactMapboxGl({\n    accessToken: MY_ACCESS_TOKEN,\n    interactive: true,\n    attributionControl: false,\n    maxZoom: 18\n})\n\nexport default function Map(props) {\n    const containerStyle = {\n        height: '60vh',\n        width: '100vw'\n    }\n\n    return (\n        <Mapbox\n            style={\n                props.mapStyle\n                    ? props.mapStyle\n                    : 'mapbox://styles/mapbox/streets-v9?optimize=true'\n            }\n            containerStyle={containerStyle}\n            {...props.mapState}\n        >\n            {props.mapState && props.mapState.center && (\n                <Marker coordinates={props.mapState.center}>\n                    <img\n                        src={'http://maps.google.com/mapfiles/ms/icons/red.png'}\n                        alt='marker-img'\n                    />\n                </Marker>\n            )}\n\n            {/* for later when doing artefact card popups over pin */}\n            {/* <Popup\n                coordinates={mapState.center}\n                offset={{\n                    'bottom-left': [12, -38],\n                    bottom: [0, -38],\n                    'bottom-right': [-12, -38]\n                }}\n            >\n                <img src={'http://maps.google.com/mapfiles/ms/icons/red.png'} />\n            </Popup> */}\n        </Mapbox>\n    )\n}\n","import React, { useContext, useState, Fragment } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport {\n    Button,\n    CssBaseline,\n    TextField,\n    Grid,\n    Typography,\n    MenuItem,\n    Snackbar,\n    IconButton,\n    FormControl\n} from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n    List,\n    ListItem,\n    ListItemIcon,\n    ListSubheader,\n    ListItemText,\n    Collapse,\n    Checkbox,\n    Paper,\n    FormHelperText,\n    ClickAwayListener\n} from '@material-ui/core'\nimport { useTheme } from '@material-ui/styles'\nimport { Loading, Map } from '../components'\nimport { geocodeQuery } from '../components/Map'\nimport authContext from '../authContext'\nimport { useMutation } from '@apollo/react-hooks'\nimport { DropzoneArea } from 'material-ui-dropzone'\n\nimport SearchIcon from '@material-ui/icons/Search'\n\nimport {\n    CREATE_ARTEFACT_MUTATION,\n    UPDATE_ARTEFACT_MUTATION\n} from '../gqlQueriesMutations'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n        height: '100%',\n        backgroundColor: theme.palette.background.paper,\n        justifyContent: 'center'\n    },\n    formControl: {\n        height: '100%',\n        justifyContent: 'center'\n    },\n    title: {\n        marginLeft: theme.spacing(3),\n        marginRight: theme.spacing(3),\n        padding: theme.spacing(1),\n        textAlign: 'center'\n    },\n    paper: {\n        padding: theme.spacing(1),\n        // textAlign: 'center',\n        backgroundColor: theme.palette.background.paper\n    },\n    paperTextWrapper: {\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.paper,\n        height: '100%',\n        alignItems: 'center'\n    },\n    button: {\n        height: '100%'\n    },\n    map: {\n        height: '200px',\n        type: theme.palette.type\n    },\n    form: {\n        marginBottom: theme.spacing(10),\n        marginTop: theme.spacing(2),\n        display: 'flex',\n        flexWrap: 'wrap'\n    },\n    iconButton: {\n        padding: 10\n    },\n    dropzone: {\n        backgroundColor: theme.palette.background.paper,\n        minHeight: '80px' \n    }\n}))\n\nfunction ArtefactView(props) {\n    var create = true,\n        edit = false\n    if (props.mode === 'edit') {\n        create = false\n        edit = true\n    } else if (props.mode !== 'create') {\n        console.log('unknown mode provided, defaulted to create')\n    }\n\n    const theme = useTheme()\n    const classes = useStyles()\n\n    const context = useContext(authContext)\n\n    const [beingEdited, setBeingEdited] = useState('')\n    const [prevValue, setPrevValue] = useState({})\n    const [currValue, setCurrValue] = useState({})\n    const [snackbarOpen, setSnackbarOpen] = useState(false)\n\n    const [locationState, setLocationState] = useState({\n        mapState: {},\n        locationError: ''\n    })\n    const [addressIsSearchResult, setAddressIsSearchResult] = useState(true)\n    const [queryResults, setQueryResults] = useState([])\n\n    const [state, setState] = useState({})\n    const stateLen = Object.keys(state).length\n    const artefactLoaded = edit && Object.keys(props.artefact).length !== 0\n    if (artefactLoaded && stateLen === 0) {\n        var belong = {}\n        props.artefact.belongsToFamilies.map(val => (belong[val.id] = true))\n\n        // run geocode query here and process result\n        // if the query is blank an empty promise is immediately returned\n        var address = ''\n        console.log('Query run with argument: ', props.artefact.address)\n        geocodeQuery(props.artefact.address)\n            .then(response => {\n                if (props.artefact.address) {\n                    var errMsg = ''\n                    console.log('response: ', response)\n                    if (response.error) {\n                        errMsg =\n                            'Unknown error occurred, check console for details'\n                        console.log(response.error)\n                    }\n\n                    // only say no results when the query was non-empty\n                    if (response.noResults && props.artefact.address) {\n                        errMsg = 'No results'\n                    }\n\n                    if (errMsg) {\n                        setLocationState({\n                            ...locationState,\n                            locationError: errMsg\n                        })\n                    } else {\n                        setLocationState({\n                            mapState: response.results[0].mapState,\n                            locationError: ''\n                        })\n                        address = response.results[0].placeName\n                    }\n                }\n            })\n            .then(result => {\n                console.log(address)\n                setState({\n                    ...props.artefact,\n                    belongsToFamiliesBools: belong,\n                    address: address\n                })\n                setAddressIsSearchResult(true)\n            })\n    }\n\n    const _pushViewArtefactURL = id => {\n        const { history } = props\n        if (history) {\n            history.push(`/artefacts/${id}`)\n        }\n    }\n\n    const _creationCompleted = async data => {\n        var id = data.artefactCreate.artefact.id\n        _pushViewArtefactURL(id)\n    }\n\n    const _handleCreationError = async errors => {\n        // TO DO\n        console.log('Creation errors occurred:', errors)\n    }\n\n    const _handleUpdateError = async errors => {\n        console.log('update error occured: ', errors)\n    }\n\n    const [\n        createArtefact,\n        { error: creationErrors, loading: creationLoading }\n    ] = useMutation(CREATE_ARTEFACT_MUTATION, {\n        onCompleted: _creationCompleted,\n        onError: _handleCreationError\n    })\n\n    const _updateCompleted = async data => {\n        setBeingEdited('')\n        setSnackbarOpen(true)\n    }\n\n    const [updateArtefact, { error: updateErrors }] = useMutation(\n        UPDATE_ARTEFACT_MUTATION,\n        {\n            onCompleted: _updateCompleted,\n            onError: _handleUpdateError\n        }\n    )\n\n    const setField = (fieldName, value) => {\n        var prev = state[fieldName]\n        setState({\n            ...state,\n            [fieldName]: value\n        })\n\n        if (edit && beingEdited !== fieldName) {\n            setPrevValue(prev)\n        }\n    }\n\n    const handleSetField = (fieldName, value, famId) => {\n        if (fieldName === 'belongsToFamiliesBools') {\n            value = {\n                ...state.belongsToFamiliesBools,\n                [famId]: value\n            }\n        }\n\n        setField(fieldName, value)\n        setCurrValue(value)\n        if (edit && beingEdited !== fieldName) {\n            setBeingEdited(fieldName)\n        }\n    }\n\n    const _handleGeocodeQuery = query => {\n        if (query) {\n            console.log('Query run with argument: ', query)\n            return geocodeQuery(query, ['place', 'address']).then(response => {\n                var errMsg = ''\n                if (response.error) {\n                    errMsg = 'Unknown error occurred, check console for details'\n                    console.log(response.error)\n                }\n                if (response.noErrors) errMsg = 'No results'\n                if (errMsg) {\n                    setLocationState({\n                        ...locationState,\n                        locationError: errMsg\n                    })\n                } else {\n                    setQueryResults(response.results)\n                }\n                return response\n            })\n        }\n    }\n\n    const handleSetLocationResult = result => {\n        handleSetField('address', result.placeName)\n        setQueryResults([])\n        setLocationState({\n            mapState: result.mapState,\n            locationError: ''\n        })\n        setAddressIsSearchResult(true)\n    }\n\n    const cancelEditing = () => {\n        setField(beingEdited, prevValue)\n        setBeingEdited('')\n\n        if (beingEdited === 'address') {\n            _handleGeocodeQuery(prevValue)\n        }\n    }\n\n    const handleUnselectedSearchField = () => {\n        setLocationState({\n            ...locationState,\n            locationError: 'Select a search result or clear search field'\n        })\n    }\n\n    const submitForm = async event => {\n        if (!addressIsSearchResult) {\n            handleUnselectedSearchField()\n            return\n        }\n\n        // read image files\n        // TO DO\n        const reader = new FileReader()\n\n        reader.onabort = () => console.log('file reading was aborted')\n        reader.onerror = () => console.log('file reading has failed')\n        reader.onload = () => {\n            // Do whatever you want with the file contents\n            const binaryStr = reader.result\n            console.log(binaryStr)\n        }\n\n        if (state.files) {\n            state.files.forEach(file => reader.readAsArrayBuffer(file))\n        }\n\n        var famIDs\n        if (state.belongsToFamiliesBools) {\n            famIDs = Object.keys(state.belongsToFamiliesBools).filter(\n                id => state.belongsToFamiliesBools[id]\n            )\n        } else {\n            famIDs = []\n        }\n\n        var input = {\n            name: state.name,\n            description: state.description,\n            state: state.state,\n            isPublic: state.isPublic ? state.isPublic : false,\n            belongsToFamilies: famIDs,\n            address: state.address ? state.address : ''\n        }\n        console.log('Input to GQL creation mutation:', input)\n\n        createArtefact({\n            variables: input\n        })\n    }\n\n    const saveChange = async event => {\n        if (edit) {\n            var input = {}\n\n            if (!addressIsSearchResult) {\n                handleUnselectedSearchField()\n                return\n            }\n\n            if (beingEdited === 'belongsToFamiliesBools') {\n                input[beingEdited] = Object.keys(\n                    state.belongsToFamiliesBools\n                ).filter(id => state.belongsToFamiliesBools[id])\n            } else {\n                input[beingEdited] = currValue\n            }\n\n            console.log('Input to GQL update mutation: input', input)\n\n            updateArtefact({\n                variables: {\n                    id: props.artefact.id,\n                    artefactInput: input\n                }\n            })\n        }\n    }\n\n    function SaveButton() {\n        return (\n            <Button\n                variant='contained'\n                color='primary'\n                type='submit'\n                className={classes.button}\n                onClick={saveChange}\n                fullWidth\n                padding={1}\n            >\n                Save\n            </Button>\n        )\n    }\n\n    function CancelButton() {\n        return (\n            <Button\n                variant='contained'\n                color='default'\n                className={classes.button}\n                onClick={cancelEditing}\n                fullWidth\n                padding={1}\n            >\n                Cancel\n            </Button>\n        )\n    }\n\n    function EditButtons() {\n        return (\n            <Grid\n                container\n                justify='space-evenly'\n                alignItems='center'\n                spacing={1}\n                style={{ marginTop: 1 }}\n            >\n                <Grid item xs={6}>\n                    <SaveButton />\n                </Grid>\n                <Grid item xs={6}>\n                    <CancelButton />\n                </Grid>\n\n                {updateErrors && (\n                    <Grid item xs={12}>\n                        <FormHelperText error>\n                            Error Updating Artefact\n                        </FormHelperText>\n                    </Grid>\n                )}\n            </Grid>\n        )\n    }\n\n    function handleCloseSnackbar(event, reason) {\n        if (reason === 'clickaway') {\n            return\n        }\n\n        setSnackbarOpen(false)\n    }\n\n    const noErrors = !creationErrors\n    const dataLoading = props.familyLoading || props.statesLoading\n\n    var mapStyle\n    if (theme && theme.palette.type === 'dark') {\n        mapStyle = 'mapbox://styles/mapbox/dark-v10?optimize=true'\n    } else {\n        mapStyle = 'mapbox://styles/mapbox/light-v10?optimize=true'\n    }\n\n    const submitHandler = e => {\n        e.preventDefault()\n        create ? submitForm(e) : saveChange(e)\n    }\n\n    if (edit && dataLoading) {\n        return <Loading />\n    }\n\n    return (\n        <Fragment>\n            <CssBaseline />\n            <form onSubmit={submitHandler} className={classes.form}>\n                <Grid\n                    container\n                    spacing={1}\n                    alignItems='stretch'\n                    alignContent='stretch'\n                    justify='space-evenly'\n                >\n                    <Grid item xs={12} container justify='center'>\n                        <Grid item xs={12} sm={8}>\n                            <Typography variant='h4' className={classes.title}>\n                                {create ? 'Create' : 'Edit'} Artefact\n                            </Typography>\n                            <Typography\n                                variant='subtitle1'\n                                className={classes.title}\n                            >\n                                {create\n                                    ? 'Artefacts are belongings of the family, enter as much or as little detail as you like'\n                                    : 'Click to start editing'}\n                            </Typography>\n                        </Grid>\n                    </Grid>\n                    {/* Left Pane */}\n                    <Grid item xs={12} sm={6} container spacing={1}>\n                        <Grid item xs={12}>\n                            <Paper className={classes.paperTextWrapper}>\n                                <FormControl\n                                    className={classes.formControl}\n                                    fullWidth\n                                >\n                                    <TextField\n                                        // style={{ height: '100%' }}\n                                        // InputProps={{ style: {height: '100%'} }}\n                                        id='artefact-name'\n                                        label='Artefact name'\n                                        variant='outlined'\n                                        required\n                                        fullWidth\n                                        value={state.name || ''}\n                                        onChange={e =>\n                                            handleSetField(\n                                                'name',\n                                                e.target.value\n                                            )\n                                        }\n                                        disabled={\n                                            edit &&\n                                            !!beingEdited &&\n                                            beingEdited !== 'name'\n                                        }\n                                    />\n\n                                    {edit && beingEdited === 'name' && (\n                                        <EditButtons />\n                                    )}\n                                </FormControl>\n                            </Paper>\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <Paper className={classes.paperTextWrapper}>\n                                <FormControl\n                                    className={classes.formControl}\n                                    fullWidth\n                                >\n                                    <TextField\n                                        id='state'\n                                        label='Artefact State'\n                                        variant='outlined'\n                                        required\n                                        fullWidth\n                                        value={state.state || ''}\n                                        onChange={e =>\n                                            handleSetField(\n                                                'state',\n                                                e.target.value\n                                            )\n                                        }\n                                        select\n                                        disabled={\n                                            edit &&\n                                            !!beingEdited &&\n                                            beingEdited !== 'state'\n                                        }\n                                    >\n                                        {Object.keys(props.artefactStates).map(\n                                            value => {\n                                                return (\n                                                    <MenuItem\n                                                        value={\n                                                            props\n                                                                .artefactStates[\n                                                                value\n                                                            ]\n                                                        }\n                                                        key={value}\n                                                    >\n                                                        {value}\n                                                    </MenuItem>\n                                                )\n                                            }\n                                        )}\n                                    </TextField>\n\n                                    {edit && beingEdited === 'state' && (\n                                        <EditButtons />\n                                    )}\n                                </FormControl>\n                            </Paper>\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <Paper className={classes.paperTextWrapper}>\n                                <FormControl\n                                    className={classes.formControl}\n                                    fullWidth\n                                >\n                                    <TextField\n                                        id='description'\n                                        label='Description'\n                                        variant='outlined'\n                                        required\n                                        fullWidth\n                                        multiline\n                                        rows={6}\n                                        value={state.description || ''}\n                                        onChange={e =>\n                                            handleSetField(\n                                                'description',\n                                                e.target.value\n                                            )\n                                        }\n                                        disabled={\n                                            edit &&\n                                            !!beingEdited &&\n                                            beingEdited !== 'description'\n                                        }\n                                    />\n\n                                    {edit && beingEdited === 'description' && (\n                                        <EditButtons />\n                                    )}\n                                </FormControl>\n                            </Paper>\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <Paper className={classes.paperTextWrapper}>\n                                <FormControl\n                                    className={classes.formControl}\n                                    fullWidth\n                                >\n                                    <TextField\n                                        id='artefact-admin'\n                                        label='Artefact Admin'\n                                        variant='outlined'\n                                        required\n                                        fullWidth\n                                        value={\n                                            state.admin &&\n                                            Object.keys(state.admin).length !==\n                                                0\n                                                ? state.admin.username\n                                                : context.user.username\n                                        }\n                                        onChange={e =>\n                                            console.log(\n                                                'admin field was changed'\n                                            )\n                                        }\n                                        disabled\n                                    />\n                                </FormControl>\n                            </Paper>\n                        </Grid>\n                    </Grid>\n                    {/* Right Pane */}\n                    <Grid\n                        item\n                        xs={12}\n                        sm={6}\n                        container\n                        spacing={1}\n                        alignContent='stretch'\n                    >\n                        <Grid item xs={12}>\n                            <Paper className={classes.paper}>\n                                <FormControl\n                                    className={classes.formControl}\n                                    fullWidth\n                                >\n                                    <List\n                                        subheader={\n                                            <ListSubheader component='div'>\n                                                Privacy\n                                            </ListSubheader>\n                                        }\n                                        dense\n                                    >\n                                        <ListItem\n                                            disabled={\n                                                edit &&\n                                                !!beingEdited &&\n                                                beingEdited !== 'isPublic'\n                                            }\n                                        >\n                                            <ListItemIcon>\n                                                <Checkbox\n                                                    edge='start'\n                                                    checked={\n                                                        state.isPublic || false\n                                                    }\n                                                    tabIndex={-1}\n                                                    onClick={e =>\n                                                        handleSetField(\n                                                            'isPublic',\n                                                            e.target.checked\n                                                        )\n                                                    }\n                                                />\n                                            </ListItemIcon>\n                                            <ListItemText primary={'Public'} />\n                                        </ListItem>\n                                    </List>\n\n                                    {edit && beingEdited === 'isPublic' && (\n                                        <EditButtons />\n                                    )}\n                                </FormControl>\n                            </Paper>\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <Paper className={classes.paper}>\n                                <FormControl\n                                    className={classes.formControl}\n                                    fullWidth\n                                >\n                                    <List\n                                        subheader={\n                                            <ListSubheader component='div'>\n                                                Select which of your families\n                                                the artefact belongs to\n                                            </ListSubheader>\n                                        }\n                                    >\n                                        {props.families.map(family => {\n                                            if (\n                                                state.belongsToFamiliesBools &&\n                                                !state.belongsToFamiliesBools[\n                                                    family.id\n                                                ]\n                                            ) {\n                                                state.belongsToFamiliesBools[\n                                                    family.id\n                                                ] = false\n                                            }\n\n                                            return (\n                                                <ListItem\n                                                    key={family.id}\n                                                    dense\n                                                    disabled={\n                                                        edit &&\n                                                        !!beingEdited &&\n                                                        beingEdited !==\n                                                            'belongsToFamiliesBools'\n                                                    }\n                                                >\n                                                    <ListItemIcon>\n                                                        <Checkbox\n                                                            edge='start'\n                                                            checked={\n                                                                (state.belongsToFamiliesBools &&\n                                                                    state\n                                                                        .belongsToFamiliesBools[\n                                                                        family\n                                                                            .id\n                                                                    ]) ||\n                                                                false\n                                                            }\n                                                            onClick={e =>\n                                                                handleSetField(\n                                                                    'belongsToFamiliesBools',\n                                                                    e.target\n                                                                        .checked,\n                                                                    family.id\n                                                                )\n                                                            }\n                                                            tabIndex={-1}\n                                                        />\n                                                    </ListItemIcon>\n                                                    <ListItemText\n                                                        primary={\n                                                            family.familyName\n                                                        }\n                                                    />\n                                                </ListItem>\n                                            )\n                                        })}\n                                    </List>\n\n                                    {edit &&\n                                        beingEdited ===\n                                            'belongsToFamiliesBools' && (\n                                            <EditButtons />\n                                        )}\n                                </FormControl>\n                            </Paper>\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <Paper className={classes.paper}>\n                                <DropzoneArea\n                                    initialFiles={state.files || []}\n                                    onChange={files =>\n                                        handleSetField('files', files)\n                                    }\n                                    disabled={\n                                        edit &&\n                                        !!beingEdited &&\n                                        beingEdited !== 'files'\n                                    }\n                                    dropzoneClass={classes.dropzone}\n                                />\n                            </Paper>\n                        </Grid>\n                    </Grid>\n\n                    <Grid container item xs={12} spacing={1}>\n                        <Grid item xs={12}>\n                            <Paper className={classes.paperTextWrapper}>\n                                <FormControl\n                                    className={classes.formControl}\n                                    fullWidth\n                                >\n                                    <TextField\n                                        id='address'\n                                        label='Address'\n                                        variant='outlined'\n                                        fullWidth\n                                        value={state.address || ''}\n                                        onChange={e => {\n                                            setState({\n                                                ...state,\n                                                address: e.target.value\n                                            })\n                                            if (e.target.value) {\n                                                setAddressIsSearchResult(false)\n                                            } else {\n                                                // allow blank address\n                                                setAddressIsSearchResult(true)\n                                            }\n                                        }}\n                                        error={!!locationState.locationError}\n                                        InputProps={{\n                                            endAdornment: (\n                                                <IconButton\n                                                    className={\n                                                        classes.iconButton\n                                                    }\n                                                    aria-label='search'\n                                                    id='search'\n                                                    onClick={() =>\n                                                        _handleGeocodeQuery(\n                                                            state.address\n                                                        )\n                                                    }\n                                                >\n                                                    <SearchIcon />\n                                                </IconButton>\n                                            ),\n                                            style: { marginBottom: 3 }\n                                        }}\n                                        onKeyDown={e => {\n                                            if (e.keyCode === 13) {\n                                                e.preventDefault()\n                                                document\n                                                    .getElementById('search')\n                                                    .click()\n                                            }\n                                        }}\n                                        helperText={locationState.locationError}\n                                    />\n\n                                    <Collapse\n                                        in={!!queryResults}\n                                        timeout='auto'\n                                        unmountOnExit\n                                    >\n                                        <List component='div' disablePadding>\n                                            {queryResults.map(result => (\n                                                <ListItem\n                                                    key={result.placeName}\n                                                    button\n                                                    className={classes.nested}\n                                                    onClick={e =>\n                                                        handleSetLocationResult(\n                                                            result\n                                                        )\n                                                    }\n                                                >\n                                                    {/* <ListItemIcon>\n                                                        <StarBorder />\n                                                    </ListItemIcon> */}\n                                                    <ListItemText\n                                                        primary={\n                                                            result.placeName\n                                                        }\n                                                    />\n                                                </ListItem>\n                                            ))}\n                                        </List>\n                                    </Collapse>\n\n                                    {edit && beingEdited === 'address' && (\n                                        <EditButtons />\n                                    )}\n\n                                    <Grid container style={{ marginTop: 1 }}>\n                                        <Map\n                                            className={classes.map}\n                                            mapStyle={mapStyle}\n                                            mapState={locationState.mapState}\n                                        />\n                                    </Grid>\n                                </FormControl>\n                            </Paper>\n                        </Grid>\n                    </Grid>\n\n                    {create && (\n                        <Grid item xs={6}>\n                            <Button\n                                name='create'\n                                label='Create'\n                                type='submit'\n                                fullWidth\n                                variant='contained'\n                                color='primary'\n                                disabled={creationLoading}\n                            >\n                                Create\n                            </Button>\n                            {!noErrors && (\n                                <FormHelperText error={!noErrors}>\n                                    Unknown Error Occurred\n                                </FormHelperText>\n                            )}\n                        </Grid>\n                    )}\n                </Grid>\n\n                <ClickAwayListener onClickAway={handleCloseSnackbar}>\n                    <Snackbar\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'left'\n                        }}\n                        open={snackbarOpen}\n                        autoHideDuration={2000}\n                        onClose={handleCloseSnackbar}\n                        ContentProps={{\n                            'aria-describedby': 'message-id'\n                        }}\n                        message={<span id='message-id'>Edit successful</span>}\n                        action={[\n                            <Button\n                                key='view'\n                                color='secondary'\n                                size='small'\n                                onClick={e => {\n                                    _pushViewArtefactURL(props.artefact.id) &&\n                                        handleCloseSnackbar(e)\n                                }}\n                            >\n                                VIEW\n                            </Button>,\n                            <IconButton\n                                key='close'\n                                aria-label='close'\n                                color='inherit'\n                                onClick={handleCloseSnackbar}\n                                className={classes.close}\n                            >\n                                <CloseIcon />\n                            </IconButton>\n                        ]}\n                    />\n                </ClickAwayListener>\n            </form>\n        </Fragment>\n    )\n}\n\nexport default withRouter(ArtefactView)\n","import React, { useState } from 'react'\nimport ArtefactView from './ArtefactView'\nimport { Layout } from '../components'\nimport { useQuery } from '@apollo/react-hooks'\n\nimport {\n    GET_ARTEFACT_STATES_QUERY,\n    GET_FAMILIES_QUERY\n} from '../gqlQueriesMutations'\n\nexport default function EditArtefactView(props) {\n    // get artefact states\n    const [artefactStates, setArtefactStates] = useState({})\n    const _saveArtefactStates = async statesData => {\n        var temp = {}\n        var desc\n        var state\n        for (var i in statesData.__type.enumValues) {\n            state = statesData.__type.enumValues[i]\n            desc = state.description\n            temp[desc] = state.name\n        }\n        setArtefactStates(temp)\n    }\n    const { loading: statesLoading } = useQuery(GET_ARTEFACT_STATES_QUERY, {\n        variables: {\n            name: 'ArtefactState'\n        },\n        onCompleted: _saveArtefactStates,\n        onError: error => console.log(error)\n    })\n\n    // get users families\n    const [families, setFamilies] = useState([])\n    const { loading: familyLoading } = useQuery(GET_FAMILIES_QUERY, {\n        onCompleted: data => setFamilies(data.me.isMemberOf),\n        onError: error => console.log(error)\n    })\n\n    return (\n        <Layout>\n            <ArtefactView\n                mode={'create'}\n                families={families}\n                familyLoading={familyLoading}\n                artefactStates={artefactStates}\n                statesLoading={statesLoading}\n            />\n        </Layout>\n    )\n}\n","import React from 'react'\nimport gql from 'graphql-tag'\nimport { useQuery } from '@apollo/react-hooks'\n\nconst ARTEFACT_DETAIL = gql`\n    query DetailView($id: ID!) {\n        artefact(id: $id) {\n            id\n            name\n            description\n            addedAt\n        }\n    }\n`\n\nexport default function DetailView(props) {\n    let { data, loading, errors } = useQuery(ARTEFACT_DETAIL, {\n        variables: { id: props.match.params.id }\n    })\n    if (loading) {\n        return <p>Loading...</p>\n    } else if (errors) {\n        return <p>ERROR!</p>\n    }\n    return (\n        <div>\n            <h1>\n                {data.artefact.name} - #{data.artefact.id}\n            </h1>\n            <p>{data.artefact.addedAt}</p>\n            <p>{data.artefact.description}</p>\n        </div>\n    )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport CardActionArea from '@material-ui/core/CardActionArea'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardMedia from '@material-ui/core/CardMedia'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport { Link as RouterLink } from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n    textField: {\n        // marginLeft: theme.spacing(1),\n        // marginRight: theme.spacing(1),\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.paper,\n        textAlign: 'center',\n        marginTop: theme.spacing(1)\n    },\n    paper: {\n        marginTop: theme.spacing(1),\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.paper,\n        textAlign: 'center'\n    },\n    button: {\n        margin: theme.spacing(1)\n    },\n    card: {\n        backgroundColor: theme.palette.background.paper,\n        maxWidth: 345\n    },\n    media: {\n        backgroundColor: theme.palette.background.paper,\n        height: 140\n    }\n}))\n\n\n/*\nThis component is to present a summary of the artefact to a user, it's used in the homepage\nand manage page as a quick way to assist navigating through artefacts\n*/\nfunction ArtefactCard({ mediaURI, title, description, id }) {\n    const classes = useStyles()\n\n    return (\n        <Card className={classes.card}>\n            <CardActionArea>\n                <CardMedia\n                    className={classes.media}\n                    image={\"https://img1.cgtrader.com/items/995815/731bda0123/antique-old-clock-3d-model-low-poly-animated-obj-3ds-fbx-blend-dae-mtl.jpg\"}\n                    title={title}\n                />\n                <CardContent>\n                    <Grid item xs zeroMinWidth>\n                        <Typography\n                            gutterBottom\n                            variant='h5'\n                            component='h2'\n                            noWrap\n                        >\n                            {title}\n                        </Typography>\n                    </Grid>\n                    <Grid item xs zeroMinWidth>\n                        <Typography\n                            variant='body2'\n                            color='textSecondary'\n                            component='p'\n                            noWrap\n                        >\n                            {description}\n                        </Typography>\n                    </Grid>\n                </CardContent>\n            </CardActionArea>\n            <CardActions>\n                <Button\n                    size='small'\n                    color='primary'\n                    component={RouterLink}\n                    to={`/artefacts/${id}`}\n                >\n                    View\n                </Button>\n                <Button\n                    size='small'\n                    color='primary'\n                    component={RouterLink}\n                    to={`/artefacts/edit/${id}`}\n                >\n                    Edit\n                </Button>\n            </CardActions>\n        </Card>\n    )\n}\n\nexport default ArtefactCard\n","import React, { useState } from 'react'\nimport Layout from '../components/Layout'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport { CssBaseline } from '@material-ui/core'\nimport gql from 'graphql-tag'\nimport { useQuery } from '@apollo/react-hooks'\nimport ArtefactCard from '../components/ArtefactCard'\n\nconst useStyles = makeStyles(theme => ({\n    textField: {\n        // marginLeft: theme.spacing(1),\n        // marginRight: theme.spacing(1),\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.paper,\n        textAlign: 'center',\n        marginTop: theme.spacing(1)\n    },\n    paper: {\n        marginTop: theme.spacing(1),\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.paper,\n        textAlign: 'center'\n    },\n    button: {\n        margin: theme.spacing(1)\n    }\n}))\n\nconst LIST_OF_ARTEFACTS = gql`\n    query artefactsQuery($first: Int!) {\n        me {\n            artefactAdministratorOf(first: $first) {\n                edges {\n                    node {\n                        id\n                        name\n                        description\n                        upload\n                    }\n                }\n            }\n        }\n    }\n`\n\nfunction ManageArtefactsView(props) {\n    const tempImgURI =\n        'https://assets.pernod-ricard.com/nz/media_images/test.jpg?hUV74FvXQrWUBk1P2.fBvzoBUmjZ1wct'\n\n    const classes = useStyles()\n    const numArtefactsFetched = 10\n    const [artefactEdges, SetArtefactEdges] = useState([])\n\n    let { data, loading } = useQuery(LIST_OF_ARTEFACTS, {\n        variables: {\n            first: numArtefactsFetched\n        },\n        onCompleted: data => SetArtefactEdges(data.me.artefactAdministratorOf.edges)\n    })\n\n    console.log('The data is: ', data)\n\n    if (loading) {\n        return <p>Loading...</p>\n    }\n    return (\n        <Layout>\n            <CssBaseline />\n            <Grid container spacing={2}>\n                <Grid item xs={12}>\n                    <Grid container justify='center' spacing={2}>\n                        {artefactEdges.map(edge => (\n                            <Grid item key={edge.node.id}>\n                                <ArtefactCard\n                                    mediaURI={tempImgURI}\n                                    title={edge.node.name}\n                                    description={edge.node.description}\n                                    id={edge.node.id}\n                                />\n                            </Grid>\n                        ))}\n                    </Grid>\n                </Grid>\n            </Grid>\n        </Layout>\n    )\n}\n\nexport default ManageArtefactsView\n","import React, { useState } from 'react'\nimport ArtefactView from './ArtefactView'\nimport { useQuery } from '@apollo/react-hooks'\nimport { ARTEFACT_DETAIL } from '../gqlQueriesMutations'\nimport { Layout, Loading } from '../components'\n\nimport {\n    GET_ARTEFACT_STATES_QUERY,\n    GET_FAMILIES_QUERY\n} from '../gqlQueriesMutations'\n\nexport default function EditArtefactView(props) {\n    // get artefact states\n    const [artefactStates, setArtefactStates] = useState({})\n    const _saveArtefactStates = async statesData => {\n        var temp = {}\n        var desc\n        var state\n        for (var i in statesData.__type.enumValues) {\n            state = statesData.__type.enumValues[i]\n            desc = state.description\n            temp[desc] = state.name\n        }\n        setArtefactStates(temp)\n    }\n    const { loading: statesLoading } = useQuery(GET_ARTEFACT_STATES_QUERY, {\n        variables: {\n            name: 'ArtefactState'\n        },\n        onCompleted: _saveArtefactStates,\n        onError: error => console.log(error)\n    })\n\n    // get users families\n    const [families, setFamilies] = useState([])\n\n    const { loading: familyLoading } = useQuery(GET_FAMILIES_QUERY, {\n        onCompleted: data => setFamilies(data.me.isMemberOf),\n        onError: error => console.log(error)\n    })\n\n    const [artefact, setArtefact] = useState({})\n\n    // get artefact details\n    const _genericHandleError = async errors => {\n        console.log(errors)\n    }\n\n    const _saveArtefact = async data => {\n        setArtefact(data.artefact)\n        console.log('Artefact:', data.artefact)\n    }\n\n    const { loading: artefactLoading } = useQuery(ARTEFACT_DETAIL, {\n        variables: {\n            id: props.match.params.id\n        },\n        onCompleted: _saveArtefact,\n        onError: _genericHandleError\n    })\n\n    return (\n        <Layout>\n            {artefactLoading || Object.keys(artefact) === 0 ? (\n                <Loading />\n            ) : (\n                <ArtefactView\n                    artefact={artefact}\n                    mode={'edit'}\n                    families={families}\n                    familyLoading={familyLoading}\n                    artefactStates={artefactStates}\n                    statesLoading={statesLoading}\n                />\n            )}\n        </Layout>\n    )\n}\n","import React from 'react'\n\nexport default function Error404View(props) {\n    return (\n        <div style={{padding:'50px'}}>\n            <h1 style={{color: 'red'}}>404 Page Not Found</h1>\n            <h3>If you're seeing this page...</h3>\n            <img src=\"https://media0.giphy.com/media/KVZXay4Uduy8XHpZRc/giphy.gif\" alt=''/>\n            <p><a href=\"/\">Return home</a></p>\n        </div>\n    )\n}","import React, { useContext, useState } from 'react';\nimport Layout from '../components/Layout';\nimport authContext from '../authContext';\nimport { makeStyles } from '@material-ui/core/styles';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport InfoIcon from '@material-ui/icons/Info';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Typography, CssBaseline, Button, TextField, Grid,\nFormControl } from '@material-ui/core';\nimport Select from '@material-ui/core/Select';\nimport gql from \"graphql-tag\";\nimport { useMutation, useQuery, useLazyQuery } from '@apollo/react-hooks';\nimport ArtefactCard from '../components/ArtefactCard';\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-around',\n        overflow: 'hidden',\n        backgroundColor: theme.palette.background.paper\n    },\n    gridList: {\n        width: '80%',\n        backgroundColor: theme.palette.background.paper\n    },\n    icon: {\n        color: 'rgba(255, 255, 255, 0.54)'\n    }\n}))\n\nconst HOMEPAGE_INFO = gql`\n        query {\n            me {\n            isMemberOf {\n            id\n            familyName\n            joinCode\n            hasArtefacts {\n                edges {\n                node {\n                    id\n                    name\n                    admin {\n                    username\n                    }\n                }\n                }\n            }\n            }\n            profile {\n                id\n                selectedFamily {\n                    id\n                    familyName\n                    joinCode\n                        hasArtefacts {\n                            edges {\n                                node {\n                                    id\n                                    name\n                                    description\n                                    upload\n                                }\n                            }\n                        }\n                    }\n                }\n        }\n    }`\n\nconst JOIN_FAMILY_MUTATION = gql`\nmutation JoinFamily($joinCode: String!) {\n  familyJoin(joinCode: $joinCode) {\n    family {\n      familyName\n      familyAdmin {\n          username\n      }\n    }\n  }\n}`\n\nconst SELECT_FAMILY_MUTATION = gql`\nmutation SelectFamilyMutation($profileId: Int!, $toFamily: String!) {\n    updateProfile(input: {\n        id: $profileId,\n        selectedFamily: $toFamily\n    }) {\n        id\n        selectedFamily\n    }\n}`\n\nfunction UserHomeView(props) {\n    const classes = useStyles()\n\n    const context = useContext(authContext)\n    const username = context.user.username\n    const [formJoinCode, setFormJoinCode] = useState(\"\")\n\n    const [joinFamilyMutation, { data: join_mutation_data }] = useMutation(JOIN_FAMILY_MUTATION,\n        {\n            refetchQueries: (data) => [\n                { query: HOMEPAGE_INFO },\n            ],\n        });\n\n    const handleJoinFamily = () => {\n        if (formJoinCode.length === 0) {\n            console.error(\"Enter a valid joinCode\");\n            return;\n        }\n\n        joinFamilyMutation({variables: {joinCode: formJoinCode }})\n    }\n\n    const _homepageInfoCompleted = (data) => {\n        const selectedFamily = data.me.profile.selectedFamily\n        if (!selectedFamily) {\n            console.error(\"User has not selected a family\");\n            return;\n        }\n    }\n\n    let { data: home_data, loading, called: home_page_info_called } = useQuery(HOMEPAGE_INFO, {\n        onCompleted: (data) => {\n            _homepageInfoCompleted(data)\n        }\n    })\n\n\n    const [selectFamily, { data: mutation_data }] = useMutation(SELECT_FAMILY_MUTATION,\n        {\n            refetchQueries: (data) => [\n                { query: HOMEPAGE_INFO },\n            ],\n        });\n\n    const inputLabel = React.useRef(null);\n\n    const handleChange = event => {\n        event.preventDefault()\n        const newFamily = event.target.value;\n        selectFamily({ variables: { profileId: profileId, toFamily: newFamily } })\n    };\n\n    if (loading) {\n        return <p>Loading...</p>\n    }\n\n    const selectedFamily = home_data.me.profile.selectedFamily\n    const families = home_data.me.isMemberOf;\n    const profileId = home_data.me.profile.id;\n    const artefacts = home_data.me.profile.selectedFamily.hasArtefacts.edges;\n\n    return (\n        <Layout>\n            <CssBaseline />\n            <Grid container spacing={3}>\n                <Grid item xs={9}>\n                    {selectedFamily && (\n                        <div>\n                        <Typography variant=\"h1\">{selectedFamily.familyName}</Typography>\n                        <Typography variant=\"h5\">Join code: {selectedFamily.joinCode}</Typography>\n                        </div>\n                    )}\n                    {!selectedFamily && (\n                        <Typography variant=\"h2\">Join and/or Select a Family</Typography>\n                    )}\n                    <h4>Your username is (temp, for testing): {username}</h4>\n                    <GridList cellHeight={\"auto\"} className={classes.gridList} cols={2}>\n                        {artefacts.map((artefact, key) => (\n                            <GridListTile\n                                key={key}>\n                                <ArtefactCard\n                                    key={key}\n                                    mediaURI={artefact.node.upload}\n                                    title={artefact.node.name}\n                                    description={artefact.node.description}\n                                    id={artefact.node.id} />\n                            </GridListTile>\n                        ))}\n                    </GridList>\n                </Grid>\n                <Grid item xs={3}>\n                    <InputLabel ref={inputLabel} htmlFor=\"outlined-age-simple\">\n                        Select Family\n                    </InputLabel>\n                    <Select\n                        variant='outlined'\n                        fullWidth\n                        value={selectedFamily ? selectedFamily.id : null}\n                        onChange={handleChange}\n                        inputProps={{\n                            name: 'age',\n                            id: 'outlined-age-simple',\n                            styles: { padding: '4px' }\n                        }}\n                        padding=\"5px\"\n                    >\n                        {families && (families.map((item, key) =>\n                            <MenuItem\n                                key={item.id}\n                                value={item.id}\n                            >\n                                {item.familyName}\n                            </MenuItem>\n                        )\n                        )}\n                    </Select>\n                    <FormControl\n                    fullWidth\n                    >\n                    <TextField \n                        id=\"joinCodeField\"\n                        label=\"Join a family\"\n                        value={formJoinCode}\n                        className={classes.textField}\n                        margin=\"normal\"\n                        onChange={e => setFormJoinCode(e.target.value)}\n                        fullWidth\n                    />\n                    <Button\n                        variant=\"outlined\" \n                        onClick={handleJoinFamily}\n                    >\n                        Join Family\n                    </Button>\n                    </FormControl>\n                </Grid>\n            </Grid>\n        </Layout>\n    )\n}\n\nexport default UserHomeView\n","import React from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport { PrivateRoute } from './components/PrivateRoute'\nimport { CssBaseline } from '@material-ui/core'\n\n// Views\nimport Login from './views/LoginView'\nimport Signup from './views/SignupView'\nimport Logout from './components/Logout'\nimport Layout from './components/Layout'\n\n// Family views\nimport CreateFamilyView from './views/CreateFamilyView'\n// Artefact Views\nimport CreateArtefactView from './views/CreateArtefactView'\nimport DetailView from './views/DetailView'\nimport ManageArtefactsView from './views/ManageArtefactsView'\nimport EditArtefactView from './views/EditArtefactView'\nimport Error404View from './views/Error404View'\n\nimport UserHomeView from './views/UserHomeView'\n\nfunction App(props) {\n    return (\n        <Router>\n            <CssBaseline />\n            <div>\n                <Switch>\n                    {/* This is a special protected route, since it sends to the landing page if not logged in, which \n                        has the same url as the userHomeView */}\n                    <PrivateRoute\n                        exact\n                        path='/'\n                        loggedIn={UserHomeView}\n                        landingPage\n                    />\n                    {/* User auth routes */}\n                    <Route\n                        exact\n                        path='/login/'\n                        render={props => (\n                            <Layout>\n                                <Login {...props} />\n                            </Layout>\n                        )}\n                    />\n                    <Route\n                        exact\n                        path='/signup/'\n                        render={props => (\n                            <Layout>\n                                <Signup {...props} />\n                            </Layout>\n                        )}\n                    />\n                    <Route exact path='/logout/' component={Logout} />\n\n                    {/* Artefact routes */}\n                    <PrivateRoute\n                        exact\n                        path='/artefacts/create/'\n                        loggedIn={CreateArtefactView}\n                        landingPage\n                    />\n                    <PrivateRoute\n                        exact\n                        path='/artefacts/manage/'\n                        loggedIn={ManageArtefactsView}\n                        landingPage\n                    />\n                    <PrivateRoute\n                        exact\n                        path='/artefacts/:id/'\n                        loggedIn={DetailView}\n                        landingPage\n                    />\n                    <PrivateRoute\n                        exact\n                        path='/artefacts/edit/:id/'\n                        loggedIn={EditArtefactView}\n                        landingPage\n                    />\n\n                    {/* Family routes */}\n                    <PrivateRoute\n                        exact\n                        path='/family/create'\n                        loggedIn={CreateFamilyView}\n                        landingPage\n                    />\n                    <Route component={Error404View} />\n                </Switch>\n            </div>\n        </Router>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport * as serviceWorker from './serviceWorker'\nimport { ApolloClient } from 'apollo-client'\nimport { createHttpLink } from 'apollo-link-http'\nimport { setContext } from 'apollo-link-context'\nimport { InMemoryCache } from 'apollo-cache-inmemory'\nimport { ApolloProvider } from '@apollo/react-hooks'\nimport Auth from './components/Auth'\n\nimport App from './App'\nimport { AUTH_TOKEN, config } from './constants'\n\n// Depending on prod or dev, set the appropriate uri for the graphql queries\nconst httpLink = createHttpLink({\n    uri: config.uri\n})\n\nconst authLink = setContext((_, { headers }) => {\n    // get the authentication token from local storage if it exists\n    const token = localStorage.getItem(AUTH_TOKEN)\n    // return the headers to the context so httpLink can read them\n    return {\n        headers: {\n            ...headers,\n            authorization: token ? `JWT ${token}` : ''\n        }\n    }\n})\n\n// Set up Apollo client using Jwt auth\nconst client = new ApolloClient({\n    link: authLink.concat(httpLink),\n    cache: new InMemoryCache()\n})\n\n// Wrap application with Apollo and Auth providers to give access across the application\nReactDOM.render(\n    <ApolloProvider client={client}>\n        <Auth>\n            <App />\n        </Auth>\n    </ApolloProvider>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}